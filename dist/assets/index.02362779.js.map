{"version":3,"file":"index.02362779.js","sources":["../../vite/modulepreload-polyfill","../../src/vendor/leaflet-slider/leaflet-slider.js","../../src/vendor/leaflet.filelayer.js","../../src/layers.js","../../src/elevation.js","../../src/routes.js","../../src/controls.js","../../src/save-route.js","../../src/index.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","L.Control.Slider = L.Control.extend({\n  update: function (value) {\n    return value\n  },\n\n  options: {\n    size: '100px',\n    position: 'topright',\n    min: 0,\n    max: 250,\n    step: 1,\n    id: 'slider',\n    value: 50,\n    collapsed: true,\n    title: 'Leaflet Slider',\n    logo: 'S',\n    orientation: 'horizontal',\n    increment: false,\n    getValue: function (value) {\n      return value\n    },\n    showValue: true,\n    syncSlider: false\n  },\n  initialize: function (f, options) {\n    L.setOptions(this, options)\n    if (typeof f === 'function') {\n      this.update = f\n    } else {\n      this.update = function (value) {\n        console.log(value)\n      }\n    }\n    if (typeof this.options.getValue !== 'function') {\n      this.options.getValue = function (value) {\n        return value\n      }\n    }\n    if (this.options.orientation != 'vertical') {\n      this.options.orientation = 'horizontal'\n    }\n  },\n  onAdd: function (map) {\n    this._initLayout()\n    this.update(this.options.value + '')\n    return this._container\n  },\n  _updateValue: function () {\n    this.value = this.slider.value\n    if (this.options.showValue) {\n      this._sliderValue.innerHTML = this.options.getValue(this.value)\n    }\n    this.update(this.value)\n  },\n  _initLayout: function () {\n    var className = 'leaflet-control-slider'\n    this._container = L.DomUtil.create(\n      'div',\n      className + ' ' + className + '-' + this.options.orientation\n    )\n    this._sliderLink = L.DomUtil.create(\n      'a',\n      className + '-toggle',\n      this._container\n    )\n    this._sliderLink.setAttribute('title', this.options.title)\n    this._sliderLink.innerHTML = this.options.logo\n\n    if (this.options.showValue) {\n      this._sliderValue = L.DomUtil.create(\n        'p',\n        className + '-value',\n        this._container\n      )\n      this._sliderValue.innerHTML = this.options.getValue(this.options.value)\n    }\n\n    if (this.options.increment) {\n      this._plus = L.DomUtil.create('a', className + '-plus', this._container)\n      this._plus.innerHTML = '+'\n      L.DomEvent.on(this._plus, 'click', this._increment, this)\n      L.DomUtil.addClass(this._container, 'leaflet-control-slider-incdec')\n    }\n\n    this._sliderContainer = L.DomUtil.create(\n      'div',\n      'leaflet-slider-container',\n      this._container\n    )\n    this.slider = L.DomUtil.create(\n      'input',\n      'leaflet-slider',\n      this._sliderContainer\n    )\n    if (this.options.orientation == 'vertical') {\n      this.slider.setAttribute('orient', 'vertical')\n    }\n    this.slider.setAttribute('title', this.options.title)\n    this.slider.setAttribute('id', this.options.id)\n    this.slider.setAttribute('type', 'range')\n    this.slider.setAttribute('min', this.options.min)\n    this.slider.setAttribute('max', this.options.max)\n    this.slider.setAttribute('step', this.options.step)\n    this.slider.setAttribute('value', this.options.value)\n    if (this.options.syncSlider) {\n      L.DomEvent.on(\n        this.slider,\n        'input',\n        function (e) {\n          this._updateValue()\n        },\n        this\n      )\n    } else {\n      L.DomEvent.on(\n        this.slider,\n        'change',\n        function (e) {\n          this._updateValue()\n        },\n        this\n      )\n    }\n\n    if (this.options.increment) {\n      this._minus = L.DomUtil.create('a', className + '-minus', this._container)\n      this._minus.innerHTML = '-'\n      L.DomEvent.on(this._minus, 'click', this._decrement, this)\n    }\n\n    if (this.options.showValue) {\n      if (\n        window.matchMedia('screen and (-webkit-min-device-pixel-ratio:0)')\n          .matches &&\n        this.options.orientation == 'vertical'\n      ) {\n        this.slider.style.width =\n          this.options.size.replace('px', '') - 36 + 'px'\n        this._sliderContainer.style.height =\n          this.options.size.replace('px', '') - 36 + 'px'\n      } else if (this.options.orientation == 'vertical') {\n        this._sliderContainer.style.height =\n          this.options.size.replace('px', '') - 36 + 'px'\n      } else {\n        this._sliderContainer.style.width =\n          this.options.size.replace('px', '') - 56 + 'px'\n      }\n    } else {\n      if (\n        window.matchMedia('screen and (-webkit-min-device-pixel-ratio:0)')\n          .matches &&\n        this.options.orientation == 'vertical'\n      ) {\n        this.slider.style.width =\n          this.options.size.replace('px', '') - 10 + 'px'\n        this._sliderContainer.style.height =\n          this.options.size.replace('px', '') - 10 + 'px'\n      } else if (this.options.orientation == 'vertical') {\n        this._sliderContainer.style.height =\n          this.options.size.replace('px', '') - 10 + 'px'\n      } else {\n        this._sliderContainer.style.width =\n          this.options.size.replace('px', '') - 25 + 'px'\n      }\n    }\n\n    L.DomEvent.disableClickPropagation(this._container)\n\n    if (this.options.collapsed) {\n      if (!L.Browser.android) {\n        L.DomEvent.on(this._container, 'mouseenter', this._expand, this).on(\n          this._container,\n          'mouseleave',\n          this._collapse,\n          this\n        )\n      }\n\n      if (L.Browser.touch) {\n        L.DomEvent.on(this._sliderLink, 'click', L.DomEvent.stop).on(\n          this._sliderLink,\n          'click',\n          this._expand,\n          this\n        )\n      } else {\n        L.DomEvent.on(this._sliderLink, 'focus', this._expand, this)\n      }\n    } else {\n      this._expand()\n    }\n  },\n  _expand: function () {\n    L.DomUtil.addClass(this._container, 'leaflet-control-slider-expanded')\n  },\n  _collapse: function () {\n    L.DomUtil.removeClass(this._container, 'leaflet-control-slider-expanded')\n  },\n  _increment: function () {\n    console.log(\n      this.slider.value -\n        this.slider.step +\n        ' ' +\n        this.slider.value +\n        this.slider.step\n    )\n    this.slider.value = this.slider.value * 1 + this.slider.step * 1\n    this._updateValue()\n  },\n  _decrement: function () {\n    console.log(\n      this.slider.value -\n        this.slider.step +\n        ' ' +\n        this.slider.value +\n        this.slider.step\n    )\n    this.slider.value = this.slider.value * 1 - this.slider.step * 1\n    this._updateValue()\n  }\n})\nL.control.slider = function (f, options) {\n  return new L.Control.Slider(f, options)\n}\n","/*\n * Load files *locally* (GeoJSON, KML, GPX) into the map\n * using the HTML5 File API.\n *\n * Requires Mapbox's togeojson.js to be in global scope\n * https://github.com/mapbox/togeojson\n */\n\nimport * as toGeoJSON from '@tmcw/togeojson';\nimport L from 'leaflet';\n\nconst FileLoader = L.Layer.extend({\n\toptions: {\n\t\tlayer: L.geoJson,\n\t\tlayerOptions: {},\n\t\tfileSizeLimit: 1024,\n\t},\n\n\tinitialize(map, options) {\n\t\tthis._map = map;\n\t\tL.Util.setOptions(this, options);\n\n\t\tthis._parsers = {\n\t\t\tgeojson: this._loadGeoJSON,\n\t\t\tjson: this._loadGeoJSON,\n\t\t\tgpx: this._convertToGeoJSON,\n\t\t\tkml: this._convertToGeoJSON,\n\t\t};\n\t},\n\n\tload(file, ext) {\n\t\tlet parser;\n\t\tlet reader;\n\n\t\t// Check file is defined\n\t\tif (this._isParameterMissing(file, 'file')) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Check file size\n\t\tif (!this._isFileSizeOk(file.size)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Get parser for this data type\n\t\tparser = this._getParser(file.name, ext);\n\t\tif (!parser) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read selected file using HTML5 File API\n\t\treader = new FileReader();\n\t\treader.addEventListener(\n\t\t\t'load',\n\t\t\tL.Util.bind(function (e) {\n\t\t\t\tlet layer;\n\t\t\t\ttry {\n\t\t\t\t\tthis.fire('data:loading', {\n\t\t\t\t\t\tfilename: file.name,\n\t\t\t\t\t\tformat: parser.ext,\n\t\t\t\t\t});\n\t\t\t\t\tlayer = parser.processor.call(this, e.target.result, parser.ext);\n\t\t\t\t\tthis.fire('data:loaded', {\n\t\t\t\t\t\tlayer,\n\t\t\t\t\t\tfilename: file.name,\n\t\t\t\t\t\tformat: parser.ext,\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.fire('data:error', {error});\n\t\t\t\t}\n\t\t\t}, this),\n\t\t);\n\t\t// Testing trick: tests don't pass a real file,\n\t\t// but an object with file.testing set to true.\n\t\t// This object cannot be read by reader, just skip it.\n\t\tif (!file.testing) {\n\t\t\treader.readAsText(file);\n\t\t}\n\n\t\t// We return this to ease testing\n\t\treturn reader;\n\t},\n\n\tloadMultiple(files, ext) {\n\t\tconst readers = [];\n\t\tif (files[0]) {\n\t\t\tfiles = Array.prototype.slice.apply(files);\n\t\t\twhile (files.length > 0) {\n\t\t\t\treaders.push(this.load(files.shift(), ext));\n\t\t\t}\n\t\t}\n\n\t\t// Return first reader (or false if no file),\n\t\t// which is also used for subsequent loadings\n\t\treturn readers;\n\t},\n\n\tloadData(data, name, ext) {\n\t\tlet parser;\n\t\tlet layer;\n\n\t\t// Check required parameters\n\t\tif (\n\t\t\tthis._isParameterMissing(data, 'data') ||\n\t\t\tthis._isParameterMissing(name, 'name')\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Check file size\n\t\tif (!this._isFileSizeOk(data.length)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get parser for this data type\n\t\tparser = this._getParser(name, ext);\n\t\tif (!parser) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Process data\n\t\ttry {\n\t\t\tthis.fire('data:loading', {filename: name, format: parser.ext});\n\t\t\tlayer = parser.processor.call(this, data, parser.ext);\n\t\t\tthis.fire('data:loaded', {\n\t\t\t\tlayer,\n\t\t\t\tfilename: name,\n\t\t\t\tformat: parser.ext,\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tthis.fire('data:error', {error});\n\t\t}\n\t},\n\n\t_isParameterMissing(v, vname) {\n\t\tif (typeof v === 'undefined') {\n\t\t\tthis.fire('data:error', {\n\t\t\t\terror: new Error('Missing parameter: ' + vname),\n\t\t\t});\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_getParser(name, ext) {\n\t\tlet parser;\n\t\text = ext || name.split('.').pop();\n\t\tparser = this._parsers[ext];\n\t\tif (!parser) {\n\t\t\tthis.fire('data:error', {\n\t\t\t\terror: new Error('Unsupported file type (' + ext + ')'),\n\t\t\t});\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\t\t\tprocessor: parser,\n\t\t\text,\n\t\t};\n\t},\n\n\t_isFileSizeOk(size) {\n\t\tconst fileSize = (size / 1024).toFixed(4);\n\t\tif (fileSize > this.options.fileSizeLimit) {\n\t\t\tthis.fire('data:error', {\n\t\t\t\terror: new Error(\n\t\t\t\t\t'File size exceeds limit (' +\n\t\t\t\t\t\tfileSize +\n\t\t\t\t\t\t' > ' +\n\t\t\t\t\t\tthis.options.fileSizeLimit +\n\t\t\t\t\t\t'kb)',\n\t\t\t\t),\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t_loadGeoJSON: function _loadGeoJSON(content) {\n\t\tlet layer;\n\t\tif (typeof content === 'string') {\n\t\t\tcontent = JSON.parse(content);\n\t\t}\n\n\t\tlayer = this.options.layer(content, this.options.layerOptions);\n\n\t\tif (layer.getLayers().length === 0) {\n\t\t\tthrow new Error('GeoJSON has no valid layers.');\n\t\t}\n\n\t\tif (this.options.addToMap) {\n\t\t\tlayer.addTo(this._map);\n\t\t}\n\n\t\treturn layer;\n\t},\n\n\t_convertToGeoJSON: function _convertToGeoJSON(content, format) {\n\t\tlet geojson;\n\t\t// Format is either 'gpx' or 'kml'\n\t\tif (typeof content === 'string') {\n\t\t\tcontent = new window.DOMParser().parseFromString(content, 'text/xml');\n\t\t}\n\n\t\tif (format === 'gpx') {\n\t\t\tgeojson = toGeoJSON.gpx(content);\n\t\t}\n\n\t\tif (format === 'kml') {\n\t\t\tgeojson = toGeoJSON.kml(content);\n\t\t}\n\n\t\treturn this._loadGeoJSON(geojson);\n\t},\n});\n\nconst FileLayerLoad = L.Control.extend({\n\tstatics: {\n\t\tTITLE: 'Load local file (GPX, KML, GeoJSON)',\n\t\tLABEL: '&#8965;',\n\t},\n\toptions: {\n\t\tposition: 'topleft',\n\t\tfitBounds: true,\n\t\tlayerOptions: {},\n\t\taddToMap: true,\n\t\tfileSizeLimit: 1024,\n\t},\n\n\tinitialize(options) {\n\t\tL.Util.setOptions(this, options);\n\t\tthis.loader = null;\n\t},\n\n\tonAdd(map) {\n\t\tthis.loader = L.FileLayer.fileLoader(map, this.options);\n\n\t\tthis.loader.on(\n\t\t\t'data:loaded',\n\t\t\tfunction (e) {\n\t\t\t\t// Fit bounds after loading\n\t\t\t\tif (this.options.fitBounds) {\n\t\t\t\t\twindow.setTimeout(function () {\n\t\t\t\t\t\tmap.fitBounds(e.layer.getBounds());\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis,\n\t\t);\n\n\t\t// Initialize Drag-and-drop\n\t\tthis._initDragAndDrop(map);\n\n\t\t// Initialize map control\n\t\treturn this._initContainer();\n\t},\n\n\t_initDragAndDrop(map) {\n\t\tlet callbackName;\n\t\tconst thisLoader = this.loader;\n\t\tconst dropbox = map._container;\n\n\t\tconst callbacks = {\n\t\t\tdragenter() {\n\t\t\t\tmap.scrollWheelZoom.disable();\n\t\t\t},\n\t\t\tdragleave() {\n\t\t\t\tmap.scrollWheelZoom.enable();\n\t\t\t},\n\t\t\tdragover(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t},\n\t\t\tdrop(e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthisLoader.loadMultiple(e.dataTransfer.files);\n\t\t\t\tmap.scrollWheelZoom.enable();\n\t\t\t},\n\t\t};\n\t\tfor (callbackName in callbacks) {\n\t\t\tif (callbacks.hasOwnProperty(callbackName)) {\n\t\t\t\tdropbox.addEventListener(callbackName, callbacks[callbackName], false);\n\t\t\t}\n\t\t}\n\t},\n\n\t_initContainer() {\n\t\tconst thisLoader = this.loader;\n\n\t\t// Create a button, and bind click on hidden file input\n\t\tconst zoomName = 'leaflet-control-filelayer leaflet-control-zoom';\n\t\tconst barName = 'leaflet-bar';\n\t\tconst partName = barName + '-part';\n\t\tconst container = L.DomUtil.create('div', zoomName + ' ' + barName);\n\t\tconst link = L.DomUtil.create('a', zoomName + '-in ' + partName, container);\n\t\tlink.innerHTML = L.Control.FileLayerLoad.LABEL;\n\t\tlink.href = '#';\n\t\tlink.title = L.Control.FileLayerLoad.TITLE;\n\n\t\t// Create an invisible file input\n\t\tconst fileInput = L.DomUtil.create('input', 'hidden', container);\n\t\tfileInput.type = 'file';\n\t\tfileInput.multiple = 'multiple';\n\t\tfileInput.accept = !this.options.formats\n\t\t\t? '.gpx,.kml,.json,.geojson'\n\t\t\t: this.options.formats.join(',');\n\n\t\tfileInput.style.display = 'none';\n\t\t// Load on file change\n\t\tfileInput.addEventListener(\n\t\t\t'change',\n\t\t\tfunction () {\n\t\t\t\tthisLoader.loadMultiple(this.files);\n\t\t\t\t// Reset so that the user can upload the same file again if they want to\n\t\t\t\tthis.value = '';\n\t\t\t},\n\t\t\tfalse,\n\t\t);\n\n\t\tL.DomEvent.disableClickPropagation(link);\n\t\tL.DomEvent.on(link, 'click', function (e) {\n\t\t\tfileInput.click();\n\t\t\te.preventDefault();\n\t\t});\n\t\treturn container;\n\t},\n});\n\nL.FileLayer = {};\nL.FileLayer.FileLoader = FileLoader;\nL.FileLayer.fileLoader = function (map, options) {\n\treturn new L.FileLayer.FileLoader(map, options);\n};\n\nL.Control.FileLayerLoad = FileLayerLoad;\nL.Control.fileLayerLoad = function (options) {\n\treturn new L.Control.FileLayerLoad(options);\n};\n","import L from 'leaflet';\nimport {dynamicMapLayer} from 'esri-leaflet';\n\nconst attributionKartverket\n  = '<a href=\"http://www.kartverket.no/\">Kartverket</a>';\nconst subdomainsKartverket = ['opencache', 'opencache2', 'opencache3'];\n\nconst attributionNVE = '<a href=\"https://www.nve.no/\">NVE</a>';\n\nexport const rasterBaseMap = L.tileLayer(\n\t'https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=toporaster4&zoom={z}&x={x}&y={y}',\n\t{\n\t\tattribution: attributionKartverket,\n\t\tsubdomains: subdomainsKartverket,\n\t},\n);\n\nexport const vectorBaseMap = L.tileLayer(\n\t'https://{s}.statkart.no/gatekeeper/gk/gk.open_gmaps?layers=topo4&zoom={z}&x={x}&y={y}',\n\t{\n\t\tattribution: attributionKartverket,\n\t\tsubdomains: subdomainsKartverket,\n\t},\n);\n\nexport const kastOverlayMap = dynamicMapLayer(\n\t{\n\t\turl:\n      'https://gis2.nve.no/arcgis/rest/services/wmts/KastWMTS/MapServer',\n\t\tlayers: [0, 1, 2, 3],\n\t},\n\t{\n\t\tattribution: attributionNVE,\n\t},\n);\n\nexport const steepnessOverlayMap = L.tileLayer.wms(\n\t'https://gis3.nve.no/map/services/Bratthet/MapServer/WmsServer?',\n\t{\n\t\tlayers: 'Bratthet_snoskred',\n\t\tformat: 'image/png',\n\t\ttransparent: 'true',\n\t\tattribution: attributionNVE,\n\t},\n);\n\nexport const baseMaps = {\n\tVektorkart: vectorBaseMap,\n\tRasterkart: rasterBaseMap,\n};\n\nexport const overlayMaps = {\n\tHelning: steepnessOverlayMap,\n\tAutoKAST: kastOverlayMap,\n};\n\nexport const groupedOverlays = {\n\tTillegg: {\n\t\tHelning: steepnessOverlayMap,\n\t\tAutoKAST: kastOverlayMap,\n\t},\n};\n\nexport const layerControl = L.control.groupedLayers(baseMaps, groupedOverlays, {\n\texclusiveGroups: ['Tillegg'],\n\tposition: 'bottomright',\n\tcollapsed: true,\n});\n","/* eslint-disable no-magic-numbers */\n\nimport { lineChunk, lineString, bbox } from \"@turf/turf\";\nimport { coordEach, coordAll } from \"@turf/meta\";\nimport { fromArrayBuffer } from \"geotiff\";\nimport L from \"leaflet\";\n\nfunction addPointsToLineString(geojson, distance) {\n  const chunkedLineString = lineChunk(geojson, distance);\n  return lineString(coordAll(chunkedLineString));\n}\n\nfunction generateGeotransform(image) {\n  const [tiepoint] = image.getTiePoints();\n  const pixelScale = image.getFileDirectory().ModelPixelScale;\n  return [tiepoint.x, pixelScale[0], 0, tiepoint.y, 0, -1 * pixelScale[1]];\n}\n\nfunction generateWMSUrl(geojson) {\n  const WMS_URL =\n    \"https://openwms.statkart.no/skwms1/wcs.dtm?&SERVICE=WCS&REQUEST=GetCoverage&VERSION=1.0.0&COVERAGE=land_utm33_10m&FORMAT=GEOTIFF&COLORSCALE=false&CRS=EPSG:4326&WIDTH=700&HEIGHT=700\";\n  const boundingbox = bbox(geojson);\n  const boundingBoxString = boundingbox.join(\",\");\n  return `${WMS_URL}&BBOX=${boundingBoxString}`;\n}\n\nasync function fetchImage(url) {\n  const response = await fetch(url);\n  const arrayBuffer = await response.arrayBuffer();\n  const tiff = await fromArrayBuffer(arrayBuffer);\n  return tiff.getImage();\n}\n\nasync function arrayFromImage(image) {\n  const rasters = await image.readRasters();\n  const dataArray = [];\n\n  for (let heightIndex = 0; heightIndex < image.getHeight(); heightIndex++) {\n    dataArray[heightIndex] = [];\n\n    for (let widthIndex = 0; widthIndex < image.getWidth(); widthIndex++) {\n      dataArray[heightIndex][widthIndex] =\n        rasters[0][widthIndex + heightIndex * image.getWidth()];\n    }\n  }\n\n  return dataArray;\n}\n\nasync function altitudeService(geojson) {\n  const image = await fetchImage(generateWMSUrl(geojson));\n  const dataArray = await arrayFromImage(image);\n  const geotransform = generateGeotransform(image);\n\n  function altitudeAtCoord(lon, lat) {\n    let Xpixel = Math.round((lon - geotransform[0]) / geotransform[1]);\n    let Ypixel = Math.round((lat - geotransform[3]) / geotransform[5]);\n\n    if (Xpixel === image.getWidth()) {\n      Xpixel -= 1;\n    }\n\n    if (Ypixel === image.getHeight()) {\n      Ypixel -= 1;\n    }\n\n    return dataArray[Ypixel][Xpixel];\n  }\n\n  return {\n    altitudeAtCoord,\n  };\n}\n\nasync function addAltitudeToGeojson(geojson) {\n  const altitude = await altitudeService(geojson);\n  const geojsonWithAltitude = JSON.parse(JSON.stringify(geojson));\n\n  coordEach(geojsonWithAltitude, (coord) => {\n    const elevation = altitude.altitudeAtCoord(coord[0], coord[1]);\n    coord[2] = elevation;\n  });\n\n  return geojsonWithAltitude;\n}\n\nasync function addAltitudeToLayer(layer) {\n  const geojson = layer.toGeoJSON();\n  const chunkedGeojson = addPointsToLineString(geojson, 0.05);\n  const geojsonWithAltitude = await addAltitudeToGeojson(chunkedGeojson);\n  return L.geoJSON(geojsonWithAltitude);\n}\n\nfunction sumAltitudes(altitudes, treshold) {\n  let elevationGain = 0;\n  let elevationLoss = 0;\n  let previousAltitude = altitudes.shift();\n\n  for (const currentAltitude of altitudes) {\n    const diff = currentAltitude - previousAltitude;\n\n    if (diff > treshold) {\n      elevationGain += diff;\n      previousAltitude = currentAltitude;\n    }\n\n    if (diff < -treshold) {\n      elevationLoss += diff;\n      previousAltitude = currentAltitude;\n    }\n  }\n\n  return {\n    elevationGain: Math.round(elevationGain),\n    elevationLoss: Math.round(-elevationLoss),\n  };\n}\n\nfunction getElevationGainAndLoss(geojson) {\n  const ALTITUDE_TRESHOLD = 10;\n  const altitudes = coordAll(geojson).map((coord) => coord[2]);\n  return sumAltitudes(altitudes, ALTITUDE_TRESHOLD);\n}\n\nexport { getElevationGainAndLoss, addAltitudeToLayer };\n","import \"@geoman-io/leaflet-geoman-free\";\nimport \"@raruto/leaflet-elevation\";\nimport L from \"leaflet\";\nimport { length } from \"@turf/turf\";\n\nimport { addAltitudeToLayer, getElevationGainAndLoss } from \"./elevation.js\";\n\nconst pathOptions = { className: \"route\" };\n\nconst pmOptions = {\n  tooltips: false,\n  allowSelfIntersection: true,\n  markerStyle: { draggable: false },\n  // eslint-disable-next-line unicorn/no-null\n  finishOn: null,\n  templineStyle: { className: \"route is-drawing\" },\n  hintlineStyle: { className: \"route is-drawing\" },\n  pathOptions,\n};\n\nconst elevationOptions = {\n  theme: \"kartorama-theme\",\n  detached: false,\n  autohide: true, // If (!detached) autohide chart profile on chart mouseleave\n  collapsed: false, // If (!detached) initial state of chart profile control\n  position: \"topright\", // If (!detached) control position on one of map corners\n  followMarker: false, // Autoupdate map center on chart mouseover.\n  imperial: false, // Chart distance/elevation units.\n  reverseCoords: false, // [Lat, Long] vs [Long, Lat] points. (leaflet default: [Lat, Long])\n  summary: false,\n  legend: false,\n  ruler: false,\n  width: 400,\n  height: 150,\n  responsive: true,\n};\n\nconst drawingOptions = {\n  position: \"bottomleft\",\n  drawCircle: false,\n  drawMarker: false,\n  drawCircleMarker: false,\n  drawRectangle: false,\n  drawPolygon: false,\n  dragMode: false,\n  cutPolygon: false,\n  rotateMode: false,\n  removalMode: false,\n  editMode: false,\n  drawPolyline: true,\n};\n\nfunction generateTooltip(data, layer) {\n  const popupElement = document.createElement(\"p\");\n  popupElement.innerHTML = `Distanse: ${data.distance} km. Opp: ${data.elevationGain} m. Ned: ${data.elevationLoss} m. `;\n\n  // const removeLayerLink = document.createElement(\"a\");\n  // removeLayerLink.textContent = \"Slett spor\";\n  // removeLayerLink.href = \"#\";\n  // removeLayerLink.addEventListener(\"click\", () => {\n  //   deactivateRoute(layer);\n  //   layer.remove();\n  // });\n\n  // PopupElement.append(removeLayerLink);\n\n  return popupElement;\n}\n\nfunction addTooltipToRouteLayer(layer) {\n  const geojson = layer.toGeoJSON();\n  const distance = length(geojson).toFixed(1);\n  const { elevationGain, elevationLoss } = getElevationGainAndLoss(geojson);\n  const popupElement = generateTooltip(\n    {\n      elevationGain,\n      elevationLoss,\n      distance,\n    },\n    layer\n  );\n\n  layer.bindPopup(popupElement).openPopup();\n}\n\nfunction getElevationLine(routeLayer) {\n  return routeLayer.controlElevationProfile._layers._layers;\n}\n\nfunction deactivateElevationLine(routeLayer) {\n  const elevationLine = getElevationLine(routeLayer);\n  if (Object.keys(elevationLine).length > 0) {\n    Object.values(elevationLine)[0].remove();\n  }\n}\n\nfunction hideElevationProfile(layer) {\n  layer.controlElevationProfile._container.style.display = \"none\";\n}\n\nfunction allUserRoutes(map) {\n  let geojsons = [];\n  map.routeLayers.eachLayer((routeLayer) => {\n    const geojson = routeLayer.toGeoJSON();\n    geojsons = [...geojsons, ...geojson.features];\n  });\n\n  return geojsons;\n}\n\nfunction RouteHandler(map) {\n  function showElevationProfile(layer) {\n    layer.controlElevationProfile._container.style.display = \"block\";\n    layer.controlElevationProfile.addTo(map);\n  }\n\n  function activateElevationLine(routeLayer) {\n    const elevationLine = getElevationLine(routeLayer);\n    if (Object.keys(elevationLine).length > 0) {\n      Object.values(elevationLine)[0].addTo(map);\n    }\n  }\n\n  function deactivateRoute(routeLayer) {\n    hideElevationProfile(routeLayer);\n    deactivateElevationLine(routeLayer);\n    map.state.activeRouteLayer = undefined;\n  }\n\n  function setActiveRoute(routeLayer) {\n    if (map.state.activeRouteLayer) {\n      deactivateRoute(map.state.activeRouteLayer);\n    }\n\n    activateElevationLine(routeLayer);\n    showElevationProfile(routeLayer);\n    map.state.activeRouteLayer = routeLayer;\n  }\n\n  function initElevationLayer(layer) {\n    const geojsonWithElevation = layer.toGeoJSON();\n    layer.controlElevationProfile = L.control.elevation(elevationOptions);\n    layer.controlElevationProfile.addTo(map).loadData(geojsonWithElevation);\n    addTooltipToRouteLayer(layer);\n\n    // map.off(\"mousemove\");\n    map.fitBounds(layer.getBounds());\n\n    layer.setStyle(pathOptions);\n    map.addLayer(layer);\n    map.routeLayers.addLayer(layer);\n    setActiveRoute(layer);\n\n    layer.on(\"click\", (event) => {\n      setActiveRoute(event.target);\n    });\n  }\n\n  function distanceInKm(latlng1, latlng2) {\n    const METERS_IN_KM = 1000;\n\n    return map.distance(latlng1, latlng2) / METERS_IN_KM;\n  }\n\n  function initDrawingTooltip() {\n    map.on(\"pm:drawstart\", ({ workingLayer }) => {\n      let totalDistance = 0;\n      const tooltip = L.tooltip();\n      workingLayer.bindTooltip(tooltip);\n\n      workingLayer.on(\"pm:vertexadded\", (event) => {\n        const lastLatlng = event.latlng;\n        const lineGeoJSON = workingLayer.toGeoJSON();\n        totalDistance = length(lineGeoJSON);\n        workingLayer.setTooltipContent(`${totalDistance.toFixed(1)} km`);\n        workingLayer.openTooltip(event.latlng);\n\n        map.on(\"mousemove\", (event) => {\n          const currentLatlng = event.latlng;\n          const currentDistance =\n            distanceInKm(lastLatlng, currentLatlng) + totalDistance;\n          workingLayer.setTooltipContent(`${currentDistance.toFixed(1)} km`);\n          workingLayer.openTooltip(event.latlng);\n        });\n      });\n    });\n  }\n\n  async function addElevationAndReplace(layer) {\n    const layerWithElevation = await addAltitudeToLayer(layer);\n    map.removeLayer(layer);\n    initElevationLayer(layerWithElevation);\n  }\n\n  return {\n    init() {\n      map.on(\"click\", () => {\n        if (map.state.activeRouteLayer) {\n          deactivateRoute(map.state.activeRouteLayer);\n        }\n      });\n\n      map.routeLayers = L.layerGroup();\n\n      map.pm.setGlobalOptions(pmOptions);\n      map.pm.setLang(\"no\");\n      map.pm.addControls(drawingOptions);\n\n      map.on(\"pm:create\", (event) => {\n        addElevationAndReplace(event.layer);\n      });\n\n      initDrawingTooltip();\n    },\n\n    addElevationAndReplace,\n  };\n}\n\nexport { RouteHandler, allUserRoutes };\n","/* eslint-disable no-console */\n/* eslint-disable no-alert */\n/* eslint-disable unicorn/consistent-function-scoping */\nimport L from \"leaflet\";\n\nimport \"./vendor/leaflet-slider/leaflet-slider.js\";\nimport \"./vendor/leaflet.filelayer.js\";\nimport \"leaflet-groupedlayercontrol\";\nimport \"leaflet.locatecontrol\";\nimport { overlayMaps, baseMaps, groupedOverlays } from \"./layers.js\";\nimport { RouteHandler } from \"./routes.js\";\n\n// eslint-disable-next-line no-magic-numbers\nconst URKE_COORDINATES = [62.213_447_329_334_01, 6.566_903_178_568_401];\nconst DEFAULT_ZOOM_LEVEL = 10;\n\nfunction initMap() {\n  const map = L.map(\"map\", { zoomControl: false, pmIgnore: false });\n\n  L.PM.setOptIn(true);\n\n  map.state = {};\n\n  const center = window.localStorage.getItem(\"currentCenter\")\n    ? JSON.parse(window.localStorage.getItem(\"currentCenter\"))\n    : URKE_COORDINATES;\n\n  const zoom = window.localStorage.getItem(\"currentZoom\") || DEFAULT_ZOOM_LEVEL;\n\n  map.setView(center, zoom);\n\n  return map;\n}\n\nfunction initZoomControl(map) {\n  function saveZoom() {\n    localStorage.setItem(\"currentZoom\", map.getZoom());\n  }\n\n  L.control\n    .zoom({\n      position: \"bottomleft\",\n    })\n    .addTo(map);\n\n  map.on(\"zoomend\", saveZoom);\n}\n\nfunction initScaleControl(map) {\n  L.control.scale({ imperial: false, maxWidth: 200 }).addTo(map);\n}\n\nfunction initLayers(map) {\n  const activeBaseLayerName =\n    window.localStorage.getItem(\"activeBaseLayerName\") || \"Vektorkart\";\n  map.addLayer(baseMaps[activeBaseLayerName]);\n\n  const activeOverlayName =\n    window.localStorage.getItem(\"activeOverlayName\") || \"Helning\";\n  map.addLayer(overlayMaps[activeOverlayName]);\n\n  map.state.overlay = overlayMaps[activeOverlayName];\n}\n\nfunction initLayerControl(map) {\n  initLayers(map);\n\n  L.control\n    .groupedLayers(baseMaps, groupedOverlays, {\n      exclusiveGroups: [\"Tillegg\"],\n      position: \"bottomright\",\n      collapsed: true,\n    })\n    .addTo(map);\n\n  function saveActiveBaseLayer(event) {\n    localStorage.setItem(\"activeBaseLayerName\", event.name);\n  }\n\n  function saveActiveOverlay(event) {\n    localStorage.setItem(\"activeOverlayName\", event.name);\n  }\n\n  map.on(\"baselayerchange\", saveActiveBaseLayer);\n  map.on(\"overlayadd\", saveActiveOverlay);\n}\n\nfunction initLocateControl(map) {\n  L.control\n    .locate({\n      position: \"bottomleft\",\n      initialZoomLevel: 15,\n      icon: \"fa fa-map-marker-alt\",\n    })\n    .addTo(map);\n\n  function savePosition() {\n    localStorage.setItem(\"currentCenter\", JSON.stringify(map.getCenter()));\n  }\n\n  map.on(\"moveend\", savePosition);\n}\n\nfunction initFileLoaderControl(map) {\n  L.Control.FileLayerLoad.LABEL = \"<span class='fa fa-file-upload'></span>\";\n\n  const fileControl = L.Control.fileLayerLoad({\n    layer: L.geoJson,\n    layerOptions: { style: { className: \"route\" } },\n    position: \"topleft\",\n    fileSizeLimit: 4000,\n  });\n\n  fileControl.addTo(map);\n\n  fileControl.loader.on(\"data:error\", (error) => {\n    alert(\"Feil! Sjekk konsollen\");\n    console.log(error);\n  });\n\n  fileControl.loader.on(\"data:loaded\", (event) => {\n    const routeHandler = new RouteHandler(map);\n    routeHandler.addElevationAndReplace(event.layer);\n  });\n}\n\nfunction initOpacityControl(map) {\n  if (!map.state.overlay) initLayers(map);\n\n  const currentOpacity = window.localStorage.getItem(\"currentOpacity\") || 0;\n  map.state.overlay.setOpacity(currentOpacity);\n\n  const opacitySlider = L.control.slider(\n    (value) => {\n      map.state.overlay.setOpacity(value);\n    },\n    {\n      min: 0,\n      max: 1,\n      step: 0.01,\n      position: \"bottomright\",\n      collapsed: false,\n      syncSlider: true,\n      title: \"Gjennomsiktighet\",\n      showValue: false,\n      value: map.state.overlay.options.opacity,\n    }\n  );\n\n  opacitySlider.addTo(map);\n\n  opacitySlider.slider.addEventListener(\"click\", () => {\n    localStorage.setItem(\"currentOpacity\", opacitySlider.slider.valueAsNumber);\n  });\n\n  function setOpacity(event) {\n    map.state.overlay = event.layer;\n    if (opacitySlider.slider.valueAsNumber === 0) {\n      const value = 0.2;\n      map.state.overlay.setOpacity(value);\n      opacitySlider.slider.value = value;\n    } else {\n      map.state.overlay.setOpacity(opacitySlider.slider.value);\n    }\n  }\n\n  map.on(\"overlayadd\", setOpacity);\n}\n\nexport {\n  initFileLoaderControl,\n  initZoomControl,\n  initLayerControl,\n  initScaleControl,\n  initLocateControl,\n  initOpacityControl,\n  initMap,\n};\n","/* eslint-disable no-alert */\nimport L from \"leaflet\";\nimport { createClient } from \"@supabase/supabase-js\";\n\nimport { RouteHandler, allUserRoutes } from \"./routes.js\";\n\nfunction createButton(container) {\n  const button = L.DomUtil.create(\n    \"a\",\n    \"save-route-button leaflet-control-zoom-in\",\n    container\n  );\n  button.href = \"#\";\n  button.title = \"Lagre rute\";\n  button.innerHTML = \"<span class='fa fa-save'></span>\";\n  return button;\n}\n\nL.Control.SaveRoute = L.Control.extend({\n  options: {\n    position: \"topleft\",\n  },\n\n  initialize(options) {\n    L.Util.setOptions(this, options);\n  },\n\n  onAdd(map) {\n    this._isLoading = false;\n    this._map = map;\n    this._routeHandler = new RouteHandler(this._map);\n    const routeId = this.getRouteIdFromUrl();\n\n    if (routeId) {\n      this.loadRoute(routeId);\n    }\n\n    const container = L.DomUtil.create(\n      \"div\",\n      \"leaflet-control-save-route leaflet-bar\"\n    );\n    this._button = createButton(container);\n    L.DomEvent.on(this._button, \"dblclick\", L.DomEvent.stop, this)\n      .on(this._button, \"click\", L.DomEvent.stop, this)\n      .on(this._button, \"click\", this._saveRoute, this);\n    return container;\n  },\n\n  onRemove() {\n    this._isActive = false;\n    this._isLoading = false;\n    L.DomUtil.removeClass(this._button, \"active\");\n    L.DomUtil.removeClass(this._button, \"loading\");\n  },\n\n  _saveRoute() {\n    L.DomUtil.addClass(this._button, \"loading\");\n    const geojson = allUserRoutes(this._map);\n\n    if (geojson.length > 0) {\n      this._postRoute(geojson);\n    }\n  },\n\n  generatePath(routeId) {\n    return `/?routeid=${routeId}`;\n  },\n\n  async _postRoute(geojson) {\n    const supabase = createClient(\n      \"https://cvkrixhyrwhqqvrekwgz.supabase.co\",\n      \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNjkwNTE2MCwiZXhwIjoxOTUyNDgxMTYwfQ.H_zIyV0rN9nGxS5jVjSoo49UHdKw5n3fpQ6SZq21Z1g\"\n    );\n\n    try {\n      const { data, error } = await supabase.from(\"routes\").insert([\n        {\n          geojson,\n        },\n      ]);\n\n      if (error) throw error;\n\n      if (data) {\n        const path = this.generatePath(data[0].id);\n        history.replaceState(undefined, \"\", path);\n        alert(`Ruten er lagret pÃ¥ ${window.location.origin + path}`);\n      }\n    } catch (error) {\n      alert(error.message);\n    }\n  },\n\n  getRouteIdFromUrl() {\n    const urlParameters = new URLSearchParams(window.location.search);\n    const parameters = Object.fromEntries(urlParameters.entries());\n    return parameters.routeid || undefined;\n  },\n\n  async loadRoute(routeId) {\n    const supabase = createClient(\n      \"https://cvkrixhyrwhqqvrekwgz.supabase.co\",\n      \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzNjkwNTE2MCwiZXhwIjoxOTUyNDgxMTYwfQ.H_zIyV0rN9nGxS5jVjSoo49UHdKw5n3fpQ6SZq21Z1g\"\n    );\n\n    try {\n      const { data, error, status } = await supabase\n        .from(\"routes\")\n        .select(\"id, geojson\")\n        .eq(\"id\", routeId)\n        .single();\n\n      // eslint-disable-next-line no-magic-numbers\n      if (error && status !== 406) throw error;\n\n      if (data) {\n        for (const feature of data.geojson) {\n          const layer = L.geoJSON(feature).addTo(this._map);\n          this._routeHandler.addElevationAndReplace(layer);\n        }\n      }\n    } catch (error) {\n      alert(error.message);\n    }\n  },\n});\n\nL.Control.saveRoute = () => new L.Control.SaveRoute();\n\nfunction initSaveRouteControl(map) {\n  L.Control.saveRoute().addTo(map);\n}\n\nexport { initSaveRouteControl };\n","/* eslint-disable import/no-unused-modules */\nimport {\n  initFileLoaderControl,\n  initScaleControl,\n  initOpacityControl,\n  initZoomControl,\n  initLocateControl,\n  initLayerControl,\n  initMap,\n} from \"./controls.js\";\nimport { RouteHandler, allUserRoutes } from \"./routes.js\";\nimport { initSaveRouteControl } from \"./save-route.js\";\n\nconst map = initMap();\nconst routeHandler = new RouteHandler(map);\n\ninitScaleControl(map);\ninitZoomControl(map);\ninitOpacityControl(map);\ninitLayerControl(map);\nrouteHandler.init(map);\ninitFileLoaderControl(map);\ninitLocateControl(map);\ninitSaveRouteControl(map);\n\nexport {\n  initScaleControl,\n  initZoomControl,\n  initOpacityControl,\n  initLayerControl,\n  initLocateControl,\n  initFileLoaderControl,\n  initMap,\n} from \"./controls.js\";\n\nexport { RouteHandler, allUserRoutes } from \"./routes.js\";\n\nexport { initSaveRouteControl } from \"./save-route.js\";\n"],"names":["L","toGeoJSON.gpx","toGeoJSON.kml"],"mappings":"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"}