var Qr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function co(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var nr={exports:{}};/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(m,k){(function(l,f){f(k)})(Qr,function(l){var f="1.7.1";function c(t){var i,o,s,u;for(o=1,s=arguments.length;o<s;o++){u=arguments[o];for(i in u)t[i]=u[i]}return t}var y=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function _(t,i){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var s=o.call(arguments,2);return function(){return t.apply(i,s.length?s.concat(o.call(arguments)):arguments)}}var P=0;function B(t){return t._leaflet_id=t._leaflet_id||++P,t._leaflet_id}function I(t,i,o){var s,u,b,A;return A=function(){s=!1,u&&(b.apply(o,u),u=!1)},b=function(){s?u=arguments:(t.apply(o,arguments),setTimeout(A,i),s=!0)},b}function Z(t,i,o){var s=i[1],u=i[0],b=s-u;return t===s&&o?t:((t-u)%b+b)%b+u}function E(){return!1}function T(t,i){var o=Math.pow(10,i===void 0?6:i);return Math.round(t*o)/o}function N(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function U(t){return N(t).split(/\s+/)}function R(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?y(t.options):{});for(var o in i)t.options[o]=i[o];return t.options}function z(t,i,o){var s=[];for(var u in t)s.push(encodeURIComponent(o?u.toUpperCase():u)+"="+encodeURIComponent(t[u]));return(!i||i.indexOf("?")===-1?"?":"&")+s.join("&")}var M=/\{ *([\w_-]+) *\}/g;function C(t,i){return t.replace(M,function(o,s){var u=i[s];if(u===void 0)throw new Error("No value provided for variable "+o);return typeof u=="function"&&(u=u(i)),u})}var D=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function q(t,i){for(var o=0;o<t.length;o++)if(t[o]===i)return o;return-1}var K="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function nt(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var J=0;function lt(t){var i=+new Date,o=Math.max(0,16-(i-J));return J=i+o,window.setTimeout(t,o)}var ot=window.requestAnimationFrame||nt("RequestAnimationFrame")||lt,gt=window.cancelAnimationFrame||nt("CancelAnimationFrame")||nt("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function vt(t,i,o){if(o&&ot===lt)t.call(i);else return ot.call(window,_(t,i))}function dt(t){t&&gt.call(window,t)}var It={extend:c,create:y,bind:_,lastId:P,stamp:B,throttle:I,wrapNum:Z,falseFn:E,formatNum:T,trim:N,splitWords:U,setOptions:R,getParamString:z,template:C,isArray:D,indexOf:q,emptyImageUrl:K,requestFn:ot,cancelFn:gt,requestAnimFrame:vt,cancelAnimFrame:dt};function Pt(){}Pt.extend=function(t){var i=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=i.__super__=this.prototype,s=y(o);s.constructor=i,i.prototype=s;for(var u in this)Object.prototype.hasOwnProperty.call(this,u)&&u!=="prototype"&&u!=="__super__"&&(i[u]=this[u]);return t.statics&&(c(i,t.statics),delete t.statics),t.includes&&(At(t.includes),c.apply(null,[s].concat(t.includes)),delete t.includes),s.options&&(t.options=c(y(s.options),t.options)),c(s,t),s._initHooks=[],s.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,A=s._initHooks.length;b<A;b++)s._initHooks[b].call(this)}},i},Pt.include=function(t){return c(this.prototype,t),this},Pt.mergeOptions=function(t){return c(this.prototype.options,t),this},Pt.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function At(t){if(!(typeof L=="undefined"||!L||!L.Mixin)){t=D(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Bt={on:function(t,i,o){if(typeof t=="object")for(var s in t)this._on(s,t[s],i);else{t=U(t);for(var u=0,b=t.length;u<b;u++)this._on(t[u],i,o)}return this},off:function(t,i,o){if(!t)delete this._events;else if(typeof t=="object")for(var s in t)this._off(s,t[s],i);else{t=U(t);for(var u=0,b=t.length;u<b;u++)this._off(t[u],i,o)}return this},_on:function(t,i,o){this._events=this._events||{};var s=this._events[t];s||(s=[],this._events[t]=s),o===this&&(o=void 0);for(var u={fn:i,ctx:o},b=s,A=0,Y=b.length;A<Y;A++)if(b[A].fn===i&&b[A].ctx===o)return;b.push(u)},_off:function(t,i,o){var s,u,b;if(!!this._events&&(s=this._events[t],!!s)){if(!i){for(u=0,b=s.length;u<b;u++)s[u].fn=E;delete this._events[t];return}if(o===this&&(o=void 0),s)for(u=0,b=s.length;u<b;u++){var A=s[u];if(A.ctx===o&&A.fn===i){A.fn=E,this._firingCount&&(this._events[t]=s=s.slice()),s.splice(u,1);return}}}},fire:function(t,i,o){if(!this.listens(t,o))return this;var s=c({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var u=this._events[t];if(u){this._firingCount=this._firingCount+1||1;for(var b=0,A=u.length;b<A;b++){var Y=u[b];Y.fn.call(Y.ctx||this,s)}this._firingCount--}}return o&&this._propagateEvent(s),this},listens:function(t,i){var o=this._events&&this._events[t];if(o&&o.length)return!0;if(i){for(var s in this._eventParents)if(this._eventParents[s].listens(t,i))return!0}return!1},once:function(t,i,o){if(typeof t=="object"){for(var s in t)this.once(s,t[s],i);return this}var u=_(function(){this.off(t,i,o).off(t,u,o)},this);return this.on(t,i,o).on(t,u,o)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[B(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[B(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,c({layer:t.target,propagatedFrom:t.target},t),!0)}};Bt.addEventListener=Bt.on,Bt.removeEventListener=Bt.clearAllEventListeners=Bt.off,Bt.addOneTimeEventListener=Bt.once,Bt.fireEvent=Bt.fire,Bt.hasEventListeners=Bt.listens;var de=Pt.extend(Bt);function st(t,i,o){this.x=o?Math.round(t):t,this.y=o?Math.round(i):i}var di=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};st.prototype={clone:function(){return new st(this.x,this.y)},add:function(t){return this.clone()._add(wt(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(wt(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new st(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new st(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=di(this.x),this.y=di(this.y),this},distanceTo:function(t){t=wt(t);var i=t.x-this.x,o=t.y-this.y;return Math.sqrt(i*i+o*o)},equals:function(t){return t=wt(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=wt(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+T(this.x)+", "+T(this.y)+")"}};function wt(t,i,o){return t instanceof st?t:D(t)?new st(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new st(t.x,t.y):new st(t,i,o)}function jt(t,i){if(!!t)for(var o=i?[t,i]:t,s=0,u=o.length;s<u;s++)this.extend(o[s])}jt.prototype={extend:function(t){return t=wt(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new st((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new st(this.min.x,this.max.y)},getTopRight:function(){return new st(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,o;return typeof t[0]=="number"||t instanceof st?t=wt(t):t=ae(t),t instanceof jt?(i=t.min,o=t.max):i=o=t,i.x>=this.min.x&&o.x<=this.max.x&&i.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=ae(t);var i=this.min,o=this.max,s=t.min,u=t.max,b=u.x>=i.x&&s.x<=o.x,A=u.y>=i.y&&s.y<=o.y;return b&&A},overlaps:function(t){t=ae(t);var i=this.min,o=this.max,s=t.min,u=t.max,b=u.x>i.x&&s.x<o.x,A=u.y>i.y&&s.y<o.y;return b&&A},isValid:function(){return!!(this.min&&this.max)}};function ae(t,i){return!t||t instanceof jt?t:new jt(t,i)}function Ut(t,i){if(!!t)for(var o=i?[t,i]:t,s=0,u=o.length;s<u;s++)this.extend(o[s])}Ut.prototype={extend:function(t){var i=this._southWest,o=this._northEast,s,u;if(t instanceof Rt)s=t,u=t;else if(t instanceof Ut){if(s=t._southWest,u=t._northEast,!s||!u)return this}else return t?this.extend(Zt(t)||Gt(t)):this;return!i&&!o?(this._southWest=new Rt(s.lat,s.lng),this._northEast=new Rt(u.lat,u.lng)):(i.lat=Math.min(s.lat,i.lat),i.lng=Math.min(s.lng,i.lng),o.lat=Math.max(u.lat,o.lat),o.lng=Math.max(u.lng,o.lng)),this},pad:function(t){var i=this._southWest,o=this._northEast,s=Math.abs(i.lat-o.lat)*t,u=Math.abs(i.lng-o.lng)*t;return new Ut(new Rt(i.lat-s,i.lng-u),new Rt(o.lat+s,o.lng+u))},getCenter:function(){return new Rt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Rt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Rt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Rt||"lat"in t?t=Zt(t):t=Gt(t);var i=this._southWest,o=this._northEast,s,u;return t instanceof Ut?(s=t.getSouthWest(),u=t.getNorthEast()):s=u=t,s.lat>=i.lat&&u.lat<=o.lat&&s.lng>=i.lng&&u.lng<=o.lng},intersects:function(t){t=Gt(t);var i=this._southWest,o=this._northEast,s=t.getSouthWest(),u=t.getNorthEast(),b=u.lat>=i.lat&&s.lat<=o.lat,A=u.lng>=i.lng&&s.lng<=o.lng;return b&&A},overlaps:function(t){t=Gt(t);var i=this._southWest,o=this._northEast,s=t.getSouthWest(),u=t.getNorthEast(),b=u.lat>i.lat&&s.lat<o.lat,A=u.lng>i.lng&&s.lng<o.lng;return b&&A},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=Gt(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Gt(t,i){return t instanceof Ut?t:new Ut(t,i)}function Rt(t,i,o){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,o!==void 0&&(this.alt=+o)}Rt.prototype={equals:function(t,i){if(!t)return!1;t=Zt(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+T(this.lat,t)+", "+T(this.lng,t)+")"},distanceTo:function(t){return ke.distance(this,Zt(t))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,o=i/Math.cos(Math.PI/180*this.lat);return Gt([this.lat-i,this.lng-o],[this.lat+i,this.lng+o])},clone:function(){return new Rt(this.lat,this.lng,this.alt)}};function Zt(t,i,o){return t instanceof Rt?t:D(t)&&typeof t[0]!="object"?t.length===3?new Rt(t[0],t[1],t[2]):t.length===2?new Rt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Rt(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new Rt(t,i,o)}var pe={latLngToPoint:function(t,i){var o=this.projection.project(t),s=this.scale(i);return this.transformation._transform(o,s)},pointToLatLng:function(t,i){var o=this.scale(i),s=this.transformation.untransform(t,o);return this.projection.unproject(s)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,o=this.scale(t),s=this.transformation.transform(i.min,o),u=this.transformation.transform(i.max,o);return new jt(s,u)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?Z(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?Z(t.lat,this.wrapLat,!0):t.lat,s=t.alt;return new Rt(o,i,s)},wrapLatLngBounds:function(t){var i=t.getCenter(),o=this.wrapLatLng(i),s=i.lat-o.lat,u=i.lng-o.lng;if(s===0&&u===0)return t;var b=t.getSouthWest(),A=t.getNorthEast(),Y=new Rt(b.lat-s,b.lng-u),W=new Rt(A.lat-s,A.lng-u);return new Ut(Y,W)}},ke=c({},pe,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var o=Math.PI/180,s=t.lat*o,u=i.lat*o,b=Math.sin((i.lat-t.lat)*o/2),A=Math.sin((i.lng-t.lng)*o/2),Y=b*b+Math.cos(s)*Math.cos(u)*A*A,W=2*Math.atan2(Math.sqrt(Y),Math.sqrt(1-Y));return this.R*W}}),Ci=6378137,te={R:Ci,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,o=this.MAX_LATITUDE,s=Math.max(Math.min(o,t.lat),-o),u=Math.sin(s*i);return new st(this.R*t.lng*i,this.R*Math.log((1+u)/(1-u))/2)},unproject:function(t){var i=180/Math.PI;return new Rt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=Ci*Math.PI;return new jt([-t,-t],[t,t])}()};function H(t,i,o,s){if(D(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=o,this._d=s}H.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new st((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function d(t,i,o,s){return new H(t,i,o,s)}var v=c({},ke,{code:"EPSG:3857",projection:te,transformation:function(){var t=.5/(Math.PI*te.R);return d(t,.5,-t,.5)}()}),O=c({},v,{code:"EPSG:900913"});function j(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t,i){var o="",s,u,b,A,Y,W;for(s=0,b=t.length;s<b;s++){for(Y=t[s],u=0,A=Y.length;u<A;u++)W=Y[u],o+=(u?"L":"M")+W.x+" "+W.y;o+=i?Ei?"z":"x":""}return o||"M0 0"}var Q=document.documentElement.style,et="ActiveXObject"in window,tt=et&&!document.addEventListener,pt="msLaunchUri"in navigator&&!("documentMode"in document),bt=Qt("webkit"),Mt=Qt("android"),Lt=Qt("android 2")||Qt("android 3"),Vt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xt=Mt&&Qt("Google")&&Vt<537&&!("AudioNode"in window),Et=!!window.opera,zt=!pt&&Qt("chrome"),Nt=Qt("gecko")&&!bt&&!Et&&!et,Ft=!zt&&Qt("safari"),Xt=Qt("phantom"),Jt="OTransition"in Q,me=navigator.platform.indexOf("Win")===0,_e=et&&"transition"in Q,re="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Lt,ee="MozPerspective"in Q,Ht=!window.L_DISABLE_3D&&(_e||re||ee)&&!Jt&&!Xt,ie=typeof orientation!="undefined"||Qt("mobile"),Ve=ie&&bt,Se=ie&&re,se=!window.PointerEvent&&window.MSPointerEvent,ue=!!(window.PointerEvent||se),ge=!window.L_NO_TOUCH&&(ue||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),pi=ie&&Et,ei=ie&&Nt,Te=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,oe=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",E,i),window.removeEventListener("testPassiveEventSupport",E,i)}catch{}return t}(),He=function(){return!!document.createElement("canvas").getContext}(),Ei=!!(document.createElementNS&&j("svg").createSVGRect),ii=!Ei&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}();function Qt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var mi={ie:et,ielt9:tt,edge:pt,webkit:bt,android:Mt,android23:Lt,androidStock:xt,opera:Et,chrome:zt,gecko:Nt,safari:Ft,phantom:Xt,opera12:Jt,win:me,ie3d:_e,webkit3d:re,gecko3d:ee,any3d:Ht,mobile:ie,mobileWebkit:Ve,mobileWebkit3d:Se,msPointer:se,pointer:ue,touch:ge,mobileOpera:pi,mobileGecko:ei,retina:Te,passiveEvents:oe,canvas:He,svg:Ei,vml:ii},Si=se?"MSPointerDown":"pointerdown",Ti=se?"MSPointerMove":"pointermove",Oi=se?"MSPointerUp":"pointerup",_i=se?"MSPointerCancel":"pointercancel",we={},xn=!1;function Pn(t,i,o,s){return i==="touchstart"?Wi(t,o,s):i==="touchmove"?Hn(t,o,s):i==="touchend"&&En(t,o,s),this}function Ki(t,i,o){var s=t["_leaflet_"+i+o];return i==="touchstart"?t.removeEventListener(Si,s,!1):i==="touchmove"?t.removeEventListener(Ti,s,!1):i==="touchend"&&(t.removeEventListener(Oi,s,!1),t.removeEventListener(_i,s,!1)),this}function Wi(t,i,o){var s=_(function(u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&he(u),ni(u,i)});t["_leaflet_touchstart"+o]=s,t.addEventListener(Si,s,!1),xn||(document.addEventListener(Si,Ji,!0),document.addEventListener(Ti,Vn,!0),document.addEventListener(Oi,Cn,!0),document.addEventListener(_i,Cn,!0),xn=!0)}function Ji(t){we[t.pointerId]=t}function Vn(t){we[t.pointerId]&&(we[t.pointerId]=t)}function Cn(t){delete we[t.pointerId]}function ni(t,i){t.touches=[];for(var o in we)t.touches.push(we[o]);t.changedTouches=[t],i(t)}function Hn(t,i,o){var s=function(u){u.pointerType===(u.MSPOINTER_TYPE_MOUSE||"mouse")&&u.buttons===0||ni(u,i)};t["_leaflet_touchmove"+o]=s,t.addEventListener(Ti,s,!1)}function En(t,i,o){var s=function(u){ni(u,i)};t["_leaflet_touchend"+o]=s,t.addEventListener(Oi,s,!1),t.addEventListener(_i,s,!1)}var Ce=se?"MSPointerDown":ue?"pointerdown":"touchstart",Bi=se?"MSPointerUp":ue?"pointerup":"touchend",ri="_leaflet_";function qn(t,i,o){var s,u,b=!1,A=250;function Y(it){if(ue){if(!it.isPrimary||it.pointerType==="mouse")return}else if(it.touches.length>1)return;var ht=Date.now(),yt=ht-(s||ht);u=it.touches?it.touches[0]:it,b=yt>0&&yt<=A,s=ht}function W(it){if(b&&!u.cancelBubble){if(ue){if(it.pointerType==="mouse")return;var ht={},yt,Dt;for(Dt in u)yt=u[Dt],ht[Dt]=yt&&yt.bind?yt.bind(u):yt;u=ht}u.type="dblclick",u.button=0,i(u),s=null}}return t[ri+Ce+o]=Y,t[ri+Bi+o]=W,t[ri+"dblclick"+o]=i,t.addEventListener(Ce,Y,oe?{passive:!1}:!1),t.addEventListener(Bi,W,oe?{passive:!1}:!1),t.addEventListener("dblclick",i,!1),this}function Sn(t,i){var o=t[ri+Ce+i],s=t[ri+Bi+i],u=t[ri+"dblclick"+i];return t.removeEventListener(Ce,o,oe?{passive:!1}:!1),t.removeEventListener(Bi,s,oe?{passive:!1}:!1),t.removeEventListener("dblclick",u,!1),this}var $i=gi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qe=gi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Oe=qe==="webkitTransition"||qe==="OTransition"?qe+"End":"transitionend";function Qi(t){return typeof t=="string"?document.getElementById(t):t}function Ye(t,i){var o=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!o||o==="auto")&&document.defaultView){var s=document.defaultView.getComputedStyle(t,null);o=s?s[i]:null}return o==="auto"?null:o}function St(t,i,o){var s=document.createElement(t);return s.className=i||"",o&&o.appendChild(s),s}function qt(t){var i=t.parentNode;i&&i.removeChild(t)}function Ri(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Be(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function oi(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function Ii(t,i){if(t.classList!==void 0)return t.classList.contains(i);var o=Di(t);return o.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(o)}function kt(t,i){if(t.classList!==void 0)for(var o=U(i),s=0,u=o.length;s<u;s++)t.classList.add(o[s]);else if(!Ii(t,i)){var b=Di(t);tn(t,(b?b+" ":"")+i)}}function Kt(t,i){t.classList!==void 0?t.classList.remove(i):tn(t,N((" "+Di(t)+" ").replace(" "+i+" "," ")))}function tn(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function Di(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function ye(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&Yn(t,i)}function Yn(t,i){var o=!1,s="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(s)}catch{if(i===1)return}i=Math.round(i*100),o?(o.Enabled=i!==100,o.Opacity=i):t.style.filter+=" progid:"+s+"(opacity="+i+")"}function gi(t){for(var i=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in i)return t[o];return!1}function Re(t,i,o){var s=i||new st(0,0);t.style[$i]=(_e?"translate("+s.x+"px,"+s.y+"px)":"translate3d("+s.x+"px,"+s.y+"px,0)")+(o?" scale("+o+")":"")}function Wt(t,i){t._leaflet_pos=i,Ht?Re(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function Ie(t){return t._leaflet_pos||new st(0,0)}var yi,vi,Ai;if("onselectstart"in document)yi=function(){Ct(window,"selectstart",he)},vi=function(){Yt(window,"selectstart",he)};else{var De=gi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);yi=function(){if(De){var t=document.documentElement.style;Ai=t[De],t[De]="none"}},vi=function(){De&&(document.documentElement.style[De]=Ai,Ai=void 0)}}function en(){Ct(window,"dragstart",he)}function nn(){Yt(window,"dragstart",he)}var Xe,rn;function Ne(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(je(),Xe=t,rn=t.style.outline,t.style.outline="none",Ct(window,"keydown",je))}function je(){!Xe||(Xe.style.outline=rn,Xe=void 0,rn=void 0,Yt(window,"keydown",je))}function ai(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function zi(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var Tn={TRANSFORM:$i,TRANSITION:qe,TRANSITION_END:Oe,get:Qi,getStyle:Ye,create:St,remove:qt,empty:Ri,toFront:Be,toBack:oi,hasClass:Ii,addClass:kt,removeClass:Kt,setClass:tn,getClass:Di,setOpacity:ye,testProp:gi,setTransform:Re,setPosition:Wt,getPosition:Ie,disableTextSelection:yi,enableTextSelection:vi,disableImageDrag:en,enableImageDrag:nn,preventOutline:Ne,restoreOutline:je,getSizedParentNode:ai,getScale:zi};function Ct(t,i,o,s){if(typeof i=="object")for(var u in i)Li(t,u,i[u],o);else{i=U(i);for(var b=0,A=i.length;b<A;b++)Li(t,i[b],o,s)}return this}var le="_leaflet_events";function Yt(t,i,o,s){if(typeof i=="object")for(var u in i)ve(t,u,i[u],o);else if(i){i=U(i);for(var b=0,A=i.length;b<A;b++)ve(t,i[b],o,s)}else{for(var Y in t[le])ve(t,Y,t[le][Y]);delete t[le]}return this}function bi(){if(ue)return!(pt||Ft)}var Ge={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Li(t,i,o,s){var u=i+B(o)+(s?"_"+B(s):"");if(t[le]&&t[le][u])return this;var b=function(Y){return o.call(s||t,Y||window.event)},A=b;ue&&i.indexOf("touch")===0?Pn(t,i,b,u):ge&&i==="dblclick"&&!bi()?qn(t,b,u):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(Ge[i]||i,b,oe?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(b=function(Y){Y=Y||window.event,ki(t,Y)&&A(Y)},t.addEventListener(Ge[i],b,!1)):t.addEventListener(i,A,!1):"attachEvent"in t&&t.attachEvent("on"+i,b),t[le]=t[le]||{},t[le][u]=b}function ve(t,i,o,s){var u=i+B(o)+(s?"_"+B(s):""),b=t[le]&&t[le][u];if(!b)return this;ue&&i.indexOf("touch")===0?Ki(t,i,u):ge&&i==="dblclick"&&!bi()?Sn(t,u):"removeEventListener"in t?t.removeEventListener(Ge[i]||i,b,!1):"detachEvent"in t&&t.detachEvent("on"+i,b),t[le][u]=null}function be(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,an(t),this}function si(t){return Li(t,"wheel",be),this}function Ke(t){return Ct(t,"mousedown touchstart dblclick",be),Li(t,"click",Mi),this}function he(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function ce(t){return he(t),be(t),this}function Ni(t,i){if(!i)return new st(t.clientX,t.clientY);var o=zi(i),s=o.boundingClientRect;return new st((t.clientX-s.left)/o.x-i.clientLeft,(t.clientY-s.top)/o.y-i.clientTop)}var On=me&&zt?2*window.devicePixelRatio:Nt?window.devicePixelRatio:1;function on(t){return pt?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/On:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}var ji={};function Mi(t){ji[t.type]=!0}function an(t){var i=ji[t.type];return ji[t.type]=!1,i}function ki(t,i){var o=i.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var sn={on:Ct,off:Yt,stopPropagation:be,disableScrollPropagation:si,disableClickPropagation:Ke,preventDefault:he,stop:ce,getMousePosition:Ni,getWheelDelta:on,fakeStop:Mi,skipped:an,isExternalTarget:ki,addListener:Ct,removeListener:Yt},Gi=de.extend({run:function(t,i,o,s){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(s||.5,.2),this._startPos=Ie(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=vt(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,o=this._duration*1e3;i<o?this._runFrame(this._easeOut(i/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var o=this._startPos.add(this._offset.multiplyBy(t));i&&o._round(),Wt(this._el,o),this.fire("step")},_complete:function(){dt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Tt=de.extend({options:{crs:v,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=R(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=_(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(Zt(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qe&&Ht&&!pi&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ct(this._proxy,Oe,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,o){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(Zt(t),i,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=c({animate:o.animate},o.zoom),o.pan=c({animate:o.animate,duration:o.duration},o.pan));var s=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,o.zoom):this._tryAnimatedPan(t,o.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(Ht?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(Ht?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,o){var s=this.getZoomScale(i),u=this.getSize().divideBy(2),b=t instanceof st?t:this.latLngToContainerPoint(t),A=b.subtract(u).multiplyBy(1-1/s),Y=this.containerPointToLatLng(u.add(A));return this.setView(Y,i,{zoom:o})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():Gt(t);var o=wt(i.paddingTopLeft||i.padding||[0,0]),s=wt(i.paddingBottomRight||i.padding||[0,0]),u=this.getBoundsZoom(t,!1,o.add(s));if(u=typeof i.maxZoom=="number"?Math.min(i.maxZoom,u):u,u===1/0)return{center:t.getCenter(),zoom:u};var b=s.subtract(o).divideBy(2),A=this.project(t.getSouthWest(),u),Y=this.project(t.getNorthEast(),u),W=this.unproject(A.add(Y).divideBy(2).add(b),u);return{center:W,zoom:u}},fitBounds:function(t,i){if(t=Gt(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,i);return this.setView(o.center,o.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=wt(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Gi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){kt(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,o){if(o=o||{},o.animate===!1||!Ht)return this.setView(t,i,o);this._stop();var s=this.project(this.getCenter()),u=this.project(t),b=this.getSize(),A=this._zoom;t=Zt(t),i=i===void 0?A:i;var Y=Math.max(b.x,b.y),W=Y*this.getZoomScale(A,i),it=u.distanceTo(s)||1,ht=1.42,yt=ht*ht;function Dt($t){var Zn=$t?-1:1,Kr=$t?W:Y,Wr=W*W-Y*Y+Zn*yt*yt*it*it,Jr=2*Kr*yt*it,ir=Wr/Jr,xr=Math.sqrt(ir*ir+1)-ir,$r=xr<1e-9?-18:Math.log(xr);return $r}function ti($t){return(Math.exp($t)-Math.exp(-$t))/2}function Pi($t){return(Math.exp($t)+Math.exp(-$t))/2}function Gn($t){return ti($t)/Pi($t)}var fi=Dt(0);function er($t){return Y*(Pi(fi)/Pi(fi+ht*$t))}function Hr($t){return Y*(Pi(fi)*Gn(fi+ht*$t)-ti(fi))/yt}function qr($t){return 1-Math.pow(1-$t,1.5)}var Yr=Date.now(),kr=(Dt(1)-fi)/ht,Xr=o.duration?1e3*o.duration:1e3*kr*.8;function wr(){var $t=(Date.now()-Yr)/Xr,Zn=qr($t)*kr;$t<=1?(this._flyToFrame=vt(wr,this),this._move(this.unproject(s.add(u.subtract(s).multiplyBy(Hr(Zn)/it)),A),this.getScaleZoom(Y/er(Zn),A),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),wr.call(this),this},flyToBounds:function(t,i){var o=this._getBoundsCenterZoom(t,i);return this.flyTo(o.center,o.zoom,i)},setMaxBounds:function(t){if(t=Gt(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var o=this.getCenter(),s=this._limitCenter(o,this._zoom,Gt(t));return o.equals(s)||this.panTo(s,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var o=wt(i.paddingTopLeft||i.padding||[0,0]),s=wt(i.paddingBottomRight||i.padding||[0,0]),u=this.getCenter(),b=this.project(u),A=this.project(t),Y=this.getPixelBounds(),W=Y.getSize().divideBy(2),it=ae([Y.min.add(o),Y.max.subtract(s)]);if(!it.contains(A)){this._enforcingBounds=!0;var ht=b.subtract(A),yt=wt(A.x+ht.x,A.y+ht.y);(A.x<it.min.x||A.x>it.max.x)&&(yt.x=b.x-ht.x,ht.x>0?yt.x+=W.x-o.x:yt.x-=W.x-s.x),(A.y<it.min.y||A.y>it.max.y)&&(yt.y=b.y-ht.y,ht.y>0?yt.y+=W.y-o.y:yt.y-=W.y-s.y),this.panTo(this.unproject(yt),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=c({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=i.divideBy(2).round(),u=o.divideBy(2).round(),b=s.subtract(u);return!b.x&&!b.y?this:(t.animate&&t.pan?this.panBy(b):(t.pan&&this._rawPanBy(b),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(_(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=c({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=_(this._handleGeolocationResponse,this),o=_(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,o,t):navigator.geolocation.getCurrentPosition(i,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,o=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+o+"."})},_handleGeolocationResponse:function(t){var i=t.coords.latitude,o=t.coords.longitude,s=new Rt(i,o),u=s.toBounds(t.coords.accuracy*2),b=this._locateOptions;if(b.setView){var A=this.getBoundsZoom(u);this.setView(s,b.maxZoom?Math.min(A,b.maxZoom):A)}var Y={latlng:s,bounds:u,timestamp:t.timestamp};for(var W in t.coords)typeof t.coords[W]=="number"&&(Y[W]=t.coords[W]);this.fire("locationfound",Y)},addHandler:function(t,i){if(!i)return this;var o=this[t]=new i(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),qt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(dt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)qt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),s=St("div",o,i||this._mapPane);return t&&(this._panes[t]=s),s},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new Ut(i,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,o){t=Gt(t),o=wt(o||[0,0]);var s=this.getZoom()||0,u=this.getMinZoom(),b=this.getMaxZoom(),A=t.getNorthWest(),Y=t.getSouthEast(),W=this.getSize().subtract(o),it=ae(this.project(Y,s),this.project(A,s)).getSize(),ht=Ht?this.options.zoomSnap:1,yt=W.x/it.x,Dt=W.y/it.y,ti=i?Math.max(yt,Dt):Math.min(yt,Dt);return s=this.getScaleZoom(ti,s),ht&&(s=Math.round(s/(ht/100))*(ht/100),s=i?Math.ceil(s/ht)*ht:Math.floor(s/ht)*ht),Math.max(u,Math.min(b,s))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new st(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var o=this._getTopLeftPoint(t,i);return new jt(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var o=this.options.crs;return i=i===void 0?this._zoom:i,o.scale(t)/o.scale(i)},getScaleZoom:function(t,i){var o=this.options.crs;i=i===void 0?this._zoom:i;var s=o.zoom(t*o.scale(i));return isNaN(s)?1/0:s},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(Zt(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(wt(t),i)},layerPointToLatLng:function(t){var i=wt(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(Zt(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Zt(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Gt(t))},distance:function(t,i){return this.options.crs.distance(Zt(t),Zt(i))},containerPointToLayerPoint:function(t){return wt(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return wt(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(wt(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Zt(t)))},mouseEventToContainerPoint:function(t){return Ni(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=Qi(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ct(i,"scroll",this._onScroll,this),this._containerId=B(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ht,kt(t,"leaflet-container"+(ge?" leaflet-touch":"")+(Te?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(Ft?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=Ye(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Wt(this._mapPane,new st(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(kt(t.markerPane,"leaflet-zoom-hide"),kt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){Wt(this._mapPane,new st(0,0));var o=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var s=this._zoom!==i;this._moveStart(s,!1)._move(t,i)._moveEnd(s),this.fire("viewreset"),o&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,o){i===void 0&&(i=this._zoom);var s=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(s||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return dt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Wt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[B(this._container)]=this;var i=t?Yt:Ct;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),Ht&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){dt(this._resizeRequest),this._resizeRequest=vt(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var o=[],s,u=i==="mouseout"||i==="mouseover",b=t.target||t.srcElement,A=!1;b;){if(s=this._targets[B(b)],s&&(i==="click"||i==="preclick")&&!t._simulated&&this._draggableMoved(s)){A=!0;break}if(s&&s.listens(i,!0)&&(u&&!ki(b,t)||(o.push(s),u))||b===this._container)break;b=b.parentNode}return!o.length&&!A&&!u&&ki(b,t)&&(o=[this]),o},_handleDOMEvent:function(t){if(!(!this._loaded||an(t))){var i=t.type;(i==="mousedown"||i==="keypress"||i==="keyup"||i==="keydown")&&Ne(t.target||t.srcElement),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,o){if(t.type==="click"){var s=c({},t);s.type="preclick",this._fireDOMEvent(s,s.type,o)}if(!t._stopped&&(o=(o||[]).concat(this._findEventTargets(t,i)),!!o.length)){var u=o[0];i==="contextmenu"&&u.listens(i,!0)&&he(t);var b={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var A=u.getLatLng&&(!u._radius||u._radius<=10);b.containerPoint=A?this.latLngToContainerPoint(u.getLatLng()):this.mouseEventToContainerPoint(t),b.layerPoint=this.containerPointToLayerPoint(b.containerPoint),b.latlng=A?u.getLatLng():this.layerPointToLatLng(b.layerPoint)}for(var Y=0;Y<o.length;Y++)if(o[Y].fire(i,b,!0),b.originalEvent._stopped||o[Y].options.bubblingMouseEvents===!1&&q(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return Ie(this._mapPane)||new st(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var o=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var o=this.getSize()._divideBy(2);return this.project(t,i)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,o){var s=this._getNewPixelOrigin(o,i);return this.project(t,i)._subtract(s)},_latLngBoundsToNewLayerBounds:function(t,i,o){var s=this._getNewPixelOrigin(o,i);return ae([this.project(t.getSouthWest(),i)._subtract(s),this.project(t.getNorthWest(),i)._subtract(s),this.project(t.getSouthEast(),i)._subtract(s),this.project(t.getNorthEast(),i)._subtract(s)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,o){if(!o)return t;var s=this.project(t,i),u=this.getSize().divideBy(2),b=new jt(s.subtract(u),s.add(u)),A=this._getBoundsOffset(b,o,i);return A.round().equals([0,0])?t:this.unproject(s.add(A),i)},_limitOffset:function(t,i){if(!i)return t;var o=this.getPixelBounds(),s=new jt(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(s,i))},_getBoundsOffset:function(t,i,o){var s=ae(this.project(i.getNorthEast(),o),this.project(i.getSouthWest(),o)),u=s.min.subtract(t.min),b=s.max.subtract(t.max),A=this._rebound(u.x,-b.x),Y=this._rebound(u.y,-b.y);return new st(A,Y)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),o=this.getMaxZoom(),s=Ht?this.options.zoomSnap:1;return s&&(t=Math.round(t/s)*s),Math.max(i,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Kt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var o=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,i),!0)},_createAnimProxy:function(){var t=this._proxy=St("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var o=$i,s=this._proxy.style[o];Re(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),s===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){qt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Re(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var s=this.getZoomScale(i),u=this._getCenterOffset(t)._divideBy(1-1/s);return o.animate!==!0&&!this.getSize().contains(u)?!1:(vt(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,o,s){!this._mapPane||(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,kt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:s}),setTimeout(_(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Kt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),vt(function(){this._moveEnd(!0)},this))}});function li(t,i){return new Tt(t,i)}var Le=Pt.extend({options:{position:"topright"},initialize:function(t){R(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),o=this.getPosition(),s=t._controlCorners[o];return kt(i,"leaflet-control"),o.indexOf("bottom")!==-1?s.insertBefore(i,s.firstChild):s.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(qt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),hi=function(t){return new Le(t)};Tt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",o=this._controlContainer=St("div",i+"control-container",this._container);function s(u,b){var A=i+u+" "+i+b;t[u+b]=St("div",A,o)}s("top","left"),s("top","right"),s("bottom","left"),s("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)qt(this._controlCorners[t]);qt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bn=Le.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,o,s){return o<s?-1:s<o?1:0}},initialize:function(t,i,o){R(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var s in t)this._addLayer(t[s],s);for(s in i)this._addLayer(i[s],s,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Le.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(B(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){kt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(kt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Kt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Kt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=St("div",t),o=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Ke(i),si(i);var s=this._section=St("section",t+"-list");o&&(this._map.on("click",this.collapse,this),Mt||Ct(i,{mouseenter:this.expand,mouseleave:this.collapse},this));var u=this._layersLink=St("a",t+"-toggle",i);u.href="#",u.title="Layers",ge?(Ct(u,"click",ce),Ct(u,"click",this.expand,this)):Ct(u,"focus",this.expand,this),o||this.expand(),this._baseLayersList=St("div",t+"-base",s),this._separator=St("div",t+"-separator",s),this._overlaysList=St("div",t+"-overlays",s),i.appendChild(s)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&B(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:o}),this.options.sortLayers&&this._layers.sort(_(function(s,u){return this.options.sortFunction(s.layer,u.layer,s.name,u.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ri(this._baseLayersList),Ri(this._overlaysList),this._layerControlInputs=[];var t,i,o,s,u=0;for(o=0;o<this._layers.length;o++)s=this._layers[o],this._addItem(s),i=i||s.overlay,t=t||!s.overlay,u+=s.overlay?0:1;return this.options.hideSingleBase&&(t=t&&u>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(B(t.target)),o=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,i)},_createRadioElement:function(t,i){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=o,s.firstChild},_addItem:function(t){var i=document.createElement("label"),o=this._map.hasLayer(t.layer),s;t.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=o):s=this._createRadioElement("leaflet-base-layers_"+B(this),o),this._layerControlInputs.push(s),s.layerId=B(t.layer),Ct(s,"click",this._onInputClick,this);var u=document.createElement("span");u.innerHTML=" "+t.name;var b=document.createElement("div");i.appendChild(b),b.appendChild(s),b.appendChild(u);var A=t.overlay?this._overlaysList:this._baseLayersList;return A.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t=this._layerControlInputs,i,o,s=[],u=[];this._handlingClick=!0;for(var b=t.length-1;b>=0;b--)i=t[b],o=this._getLayer(i.layerId).layer,i.checked?s.push(o):i.checked||u.push(o);for(b=0;b<u.length;b++)this._map.hasLayer(u[b])&&this._map.removeLayer(u[b]);for(b=0;b<s.length;b++)this._map.hasLayer(s[b])||this._map.addLayer(s[b]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,o,s=this._map.getZoom(),u=t.length-1;u>=0;u--)i=t[u],o=this._getLayer(i.layerId).layer,i.disabled=o.options.minZoom!==void 0&&s<o.options.minZoom||o.options.maxZoom!==void 0&&s>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Xn=function(t,i,o){return new Bn(t,i,o)},Zi=Le.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",o=St("div",i+" leaflet-bar"),s=this.options;return this._zoomInButton=this._createButton(s.zoomInText,s.zoomInTitle,i+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(s.zoomOutText,s.zoomOutTitle,i+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,o,s,u){var b=St("a",o,s);return b.innerHTML=t,b.href="#",b.title=i,b.setAttribute("role","button"),b.setAttribute("aria-label",i),Ke(b),Ct(b,"click",ce),Ct(b,"click",u,this),Ct(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";Kt(this._zoomInButton,i),Kt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())&&kt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMaxZoom())&&kt(this._zoomInButton,i)}});Tt.mergeOptions({zoomControl:!0}),Tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zi,this.addControl(this.zoomControl))});var ln=function(t){return new Zi(t)},hn=Le.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",o=St("div",i),s=this.options;return this._addScales(s,i+"-line",o),t.on(s.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,o){t.metric&&(this._mScale=St("div",i,o)),t.imperial&&(this._iScale=St("div",i,o))},_update:function(){var t=this._map,i=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),o=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,o,i/t)},_updateImperial:function(t){var i=t*3.2808399,o,s,u;i>5280?(o=i/5280,s=this._getRoundNum(o),this._updateScale(this._iScale,s+" mi",s/o)):(u=this._getRoundNum(i),this._updateScale(this._iScale,u+" ft",u/i))},_updateScale:function(t,i,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),o=t/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}}),un=function(t){return new hn(t)},cn=Le.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){R(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=St("div","leaflet-control-attribution"),Ke(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(" | ")}}});Tt.mergeOptions({attributionControl:!0}),Tt.addInitHook(function(){this.options.attributionControl&&new cn().addTo(this)});var Kn=function(t){return new cn(t)};Le.Layers=Bn,Le.Zoom=Zi,Le.Scale=hn,Le.Attribution=cn,hi.layers=Xn,hi.zoom=ln,hi.scale=un,hi.attribution=Kn;var Ee=Pt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ee.addTo=function(t,i){return t.addHandler(i,this),this};var Wn={Events:Bt},fn=ge?"touchstart mousedown":"mousedown",wi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},ui={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Ze=de.extend({options:{clickTolerance:3},initialize:function(t,i,o,s){R(this,s),this._element=t,this._dragStartTarget=i||t,this._preventOutline=o},enable:function(){this._enabled||(Ct(this._dragStartTarget,fn,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Ze._dragging===this&&this.finishDrag(),Yt(this._dragStartTarget,fn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(t._simulated||!this._enabled)&&(this._moved=!1,!Ii(this._element,"leaflet-zoom-anim")&&!(Ze._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Ze._dragging=this,this._preventOutline&&Ne(this._element),en(),yi(),!this._moving))){this.fire("down");var i=t.touches?t.touches[0]:t,o=ai(this._element);this._startPoint=new st(i.clientX,i.clientY),this._parentScale=zi(o),Ct(document,ui[t.type],this._onMove,this),Ct(document,wi[t.type],this._onUp,this)}},_onMove:function(t){if(!(t._simulated||!this._enabled)){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,o=new st(i.clientX,i.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,he(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Ie(this._element).subtract(o),kt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),kt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,dt(this._animRequest),this._lastEvent=t,this._animRequest=vt(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Wt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){Kt(document.body,"leaflet-dragging"),this._lastTarget&&(Kt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in ui)Yt(document,ui[t],this._onMove,this),Yt(document,wi[t],this._onUp,this);nn(),vi(),this._moved&&this._moving&&(dt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Ze._dragging=!1}});function dn(t,i){if(!i||!t.length)return t.slice();var o=i*i;return t=Rn(t,o),t=$n(t,o),t}function pn(t,i,o){return Math.sqrt(Fe(t,i,o,!0))}function Jn(t,i,o){return Fe(t,i,o)}function $n(t,i){var o=t.length,s=typeof Uint8Array!=void 0+""?Uint8Array:Array,u=new s(o);u[0]=u[o-1]=1,mn(t,u,i,0,o-1);var b,A=[];for(b=0;b<o;b++)u[b]&&A.push(t[b]);return A}function mn(t,i,o,s,u){var b=0,A,Y,W;for(Y=s+1;Y<=u-1;Y++)W=Fe(t[Y],t[s],t[u],!0),W>b&&(A=Y,b=W);b>o&&(i[A]=1,mn(t,i,o,s,A),mn(t,i,o,A,u))}function Rn(t,i){for(var o=[t[0]],s=1,u=0,b=t.length;s<b;s++)ne(t[s],t[u])>i&&(o.push(t[s]),u=s);return u<b-1&&o.push(t[b-1]),o}var In;function We(t,i,o,s,u){var b=s?In:$e(t,o),A=$e(i,o),Y,W,it;for(In=A;;){if(!(b|A))return[t,i];if(b&A)return!1;Y=b||A,W=Je(t,i,Y,o,u),it=$e(W,o),Y===b?(t=W,b=it):(i=W,A=it)}}function Je(t,i,o,s,u){var b=i.x-t.x,A=i.y-t.y,Y=s.min,W=s.max,it,ht;return o&8?(it=t.x+b*(W.y-t.y)/A,ht=W.y):o&4?(it=t.x+b*(Y.y-t.y)/A,ht=Y.y):o&2?(it=W.x,ht=t.y+A*(W.x-t.x)/b):o&1&&(it=Y.x,ht=t.y+A*(Y.x-t.x)/b),new st(it,ht,u)}function $e(t,i){var o=0;return t.x<i.min.x?o|=1:t.x>i.max.x&&(o|=2),t.y<i.min.y?o|=4:t.y>i.max.y&&(o|=8),o}function ne(t,i){var o=i.x-t.x,s=i.y-t.y;return o*o+s*s}function Fe(t,i,o,s){var u=i.x,b=i.y,A=o.x-u,Y=o.y-b,W=A*A+Y*Y,it;return W>0&&(it=((t.x-u)*A+(t.y-b)*Y)/W,it>1?(u=o.x,b=o.y):it>0&&(u+=A*it,b+=Y*it)),A=t.x-u,Y=t.y-b,s?A*A+Y*Y:new st(u,b)}function xe(t){return!D(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]!="undefined"}function Dn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),xe(t)}var Qn={simplify:dn,pointToSegmentDistance:pn,closestPointOnSegment:Jn,clipSegment:We,_getEdgeIntersection:Je,_getBitCode:$e,_sqClosestPointOnSegment:Fe,isFlat:xe,_flat:Dn};function _n(t,i,o){var s,u=[1,4,2,8],b,A,Y,W,it,ht,yt,Dt;for(b=0,ht=t.length;b<ht;b++)t[b]._code=$e(t[b],i);for(Y=0;Y<4;Y++){for(yt=u[Y],s=[],b=0,ht=t.length,A=ht-1;b<ht;A=b++)W=t[b],it=t[A],W._code&yt?it._code&yt||(Dt=Je(it,W,yt,i,o),Dt._code=$e(Dt,i),s.push(Dt)):(it._code&yt&&(Dt=Je(it,W,yt,i,o),Dt._code=$e(Dt,i),s.push(Dt)),s.push(W));t=s}return t}var gn={clipPolygon:_n},yn={project:function(t){return new st(t.lng,t.lat)},unproject:function(t){return new Rt(t.y,t.x)},bounds:new jt([-180,-90],[180,90])},vn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new jt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,o=this.R,s=t.lat*i,u=this.R_MINOR/o,b=Math.sqrt(1-u*u),A=b*Math.sin(s),Y=Math.tan(Math.PI/4-s/2)/Math.pow((1-A)/(1+A),b/2);return s=-o*Math.log(Math.max(Y,1e-10)),new st(t.lng*i*o,s)},unproject:function(t){for(var i=180/Math.PI,o=this.R,s=this.R_MINOR/o,u=Math.sqrt(1-s*s),b=Math.exp(-t.y/o),A=Math.PI/2-2*Math.atan(b),Y=0,W=.1,it;Y<15&&Math.abs(W)>1e-7;Y++)it=u*Math.sin(A),it=Math.pow((1-it)/(1+it),u/2),W=Math.PI/2-2*Math.atan(b*it)-A,A+=W;return new Rt(A*i,t.x*i/o)}},e={LonLat:yn,Mercator:vn,SphericalMercator:te},n=c({},ke,{code:"EPSG:3395",projection:vn,transformation:function(){var t=.5/(Math.PI*vn.R);return d(t,.5,-t,.5)}()}),r=c({},ke,{code:"EPSG:4326",projection:yn,transformation:d(1/180,1,-1/180,.5)}),a=c({},pe,{projection:yn,transformation:d(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var o=i.lng-t.lng,s=i.lat-t.lat;return Math.sqrt(o*o+s*s)},infinite:!0});pe.Earth=ke,pe.EPSG3395=n,pe.EPSG3857=v,pe.EPSG900913=O,pe.EPSG4326=r,pe.Simple=a;var h=de.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[B(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[B(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(!!i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var o=this.getEvents();i.on(o,this),this.once("remove",function(){i.off(o,this)},this)}this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this})}}});Tt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=B(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=B(t);return this._layers[i]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&B(t)in this._layers},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},_addLayers:function(t){t=t?D(t)?t:[t]:[];for(var i=0,o=t.length;i<o;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[B(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=B(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,o=this._getZoomSpan();for(var s in this._zoomBoundLayers){var u=this._zoomBoundLayers[s].options;t=u.minZoom===void 0?t:Math.min(t,u.minZoom),i=u.maxZoom===void 0?i:Math.max(i,u.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var p=h.extend({initialize:function(t,i){R(this,i),this._layers={};var o,s;if(t)for(o=0,s=t.length;o<s;o++)this.addLayer(t[o])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){if(!t)return!1;var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),o,s;for(o in this._layers)s=this._layers[o],s[t]&&s[t].apply(s,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var o in this._layers)t.call(i,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return B(t)}}),g=function(t,i){return new p(t,i)},x=p.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),p.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),p.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Ut;for(var i in this._layers){var o=this._layers[i];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),w=function(t,i){return new x(t,i)},S=Pt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){R(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var s=this._createImg(o,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(s,t),s},_setIconStyles:function(t,i){var o=this.options,s=o[i+"Size"];typeof s=="number"&&(s=[s,s]);var u=wt(s),b=wt(i==="shadow"&&o.shadowAnchor||o.iconAnchor||u&&u.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(o.className||""),b&&(t.style.marginLeft=-b.x+"px",t.style.marginTop=-b.y+"px"),u&&(t.style.width=u.x+"px",t.style.height=u.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return Te&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function V(t){return new S(t)}var X=S.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return X.imagePath||(X.imagePath=this._detectIconPath()),(this.options.imagePath||X.imagePath)+S.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=St("div","leaflet-default-icon-path",document.body),i=Ye(t,"background-image")||Ye(t,"backgroundImage");return document.body.removeChild(t),i===null||i.indexOf("url")!==0?i="":i=i.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),i}}),F=Ee.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ze(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),kt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Kt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,o=i._map,s=this._marker.options.autoPanSpeed,u=this._marker.options.autoPanPadding,b=Ie(i._icon),A=o.getPixelBounds(),Y=o.getPixelOrigin(),W=ae(A.min._subtract(Y).add(u),A.max._subtract(Y).subtract(u));if(!W.contains(b)){var it=wt((Math.max(W.max.x,b.x)-W.max.x)/(A.max.x-W.max.x)-(Math.min(W.min.x,b.x)-W.min.x)/(A.min.x-W.min.x),(Math.max(W.max.y,b.y)-W.max.y)/(A.max.y-W.max.y)-(Math.min(W.min.y,b.y)-W.min.y)/(A.min.y-W.min.y)).multiplyBy(s);o.panBy(it,{animate:!1}),this._draggable._newPos._add(it),this._draggable._startPos._add(it),Wt(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=vt(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(dt(this._panRequest),this._panRequest=vt(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,o=i._shadow,s=Ie(i._icon),u=i._map.layerPointToLatLng(s);o&&Wt(o,s),i._latlng=u,t.latlng=u,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){dt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),$=h.extend({options:{icon:new X,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){R(this,i),this._latlng=Zt(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=Zt(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),s=!1;o!==this._icon&&(this._icon&&this._removeIcon(),s=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),kt(o,i),t.keyboard&&(o.tabIndex="0"),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var u=t.icon.createShadow(this._shadow),b=!1;u!==this._shadow&&(this._removeShadow(),b=!0),u&&(kt(u,i),u.alt=""),this._shadow=u,t.opacity<1&&this._updateOpacity(),s&&this.getPane().appendChild(this._icon),this._initInteraction(),u&&b&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),qt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&qt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Wt(this._icon,t),this._shadow&&Wt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(!!this.options.interactive&&(kt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),F)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new F(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function rt(t,i){return new $(t,i)}var at=h.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return R(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),ft=at.extend({options:{fill:!0,radius:10},initialize:function(t,i){R(this,i),this._latlng=Zt(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=Zt(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return at.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,o=this._clickTolerance(),s=[t+o,i+o];this._pxBounds=new jt(this._point.subtract(s),this._point.add(s))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ut(t,i){return new ft(t,i)}var mt=ft.extend({initialize:function(t,i,o){if(typeof i=="number"&&(i=c({},o,{radius:i})),R(this,i),this._latlng=Zt(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Ut(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:at.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,o=this._map,s=o.options.crs;if(s.distance===ke.distance){var u=Math.PI/180,b=this._mRadius/ke.R/u,A=o.project([i+b,t]),Y=o.project([i-b,t]),W=A.add(Y).divideBy(2),it=o.unproject(W).lat,ht=Math.acos((Math.cos(b*u)-Math.sin(i*u)*Math.sin(it*u))/(Math.cos(i*u)*Math.cos(it*u)))/u;(isNaN(ht)||ht===0)&&(ht=b/Math.cos(Math.PI/180*i)),this._point=W.subtract(o.getPixelOrigin()),this._radius=isNaN(ht)?0:W.x-o.project([it,t-ht]).x,this._radiusY=W.y-A.y}else{var yt=s.unproject(s.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(yt).x}this._updateBounds()}});function _t(t,i,o){return new mt(t,i,o)}var ct=at.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){R(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,o=null,s=Fe,u,b,A=0,Y=this._parts.length;A<Y;A++)for(var W=this._parts[A],it=1,ht=W.length;it<ht;it++){u=W[it-1],b=W[it];var yt=s(t,u,b,!0);yt<i&&(i=yt,o=s(t,u,b))}return o&&(o.distance=Math.sqrt(i)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,o,s,u,b,A,Y=this._rings[0],W=Y.length;if(!W)return null;for(t=0,i=0;t<W-1;t++)i+=Y[t].distanceTo(Y[t+1])/2;if(i===0)return this._map.layerPointToLatLng(Y[0]);for(t=0,s=0;t<W-1;t++)if(u=Y[t],b=Y[t+1],o=u.distanceTo(b),s+=o,s>i)return A=(s-i)/o,this._map.layerPointToLatLng([b.x-A*(b.x-u.x),b.y-A*(b.y-u.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=Zt(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Ut,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return xe(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],o=xe(t),s=0,u=t.length;s<u;s++)o?(i[s]=Zt(t[s]),this._bounds.extend(i[s])):i[s]=this._convertLatLngs(t[s]);return i},_project:function(){var t=new jt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new st(t,t);this._pxBounds=new jt([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)])},_projectLatlngs:function(t,i,o){var s=t[0]instanceof Rt,u=t.length,b,A;if(s){for(A=[],b=0;b<u;b++)A[b]=this._map.latLngToLayerPoint(t[b]),o.extend(A[b]);i.push(A)}else for(b=0;b<u;b++)this._projectLatlngs(t[b],i,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,o,s,u,b,A,Y,W;for(o=0,u=0,b=this._rings.length;o<b;o++)for(W=this._rings[o],s=0,A=W.length;s<A-1;s++)Y=We(W[s],W[s+1],t,s,!0),!!Y&&(i[u]=i[u]||[],i[u].push(Y[0]),(Y[1]!==W[s+1]||s===A-2)&&(i[u].push(Y[1]),u++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,o=0,s=t.length;o<s;o++)t[o]=dn(t[o],i)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var o,s,u,b,A,Y,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,b=this._parts.length;o<b;o++)for(Y=this._parts[o],s=0,A=Y.length,u=A-1;s<A;u=s++)if(!(!i&&s===0)&&pn(t,Y[u],Y[s])<=W)return!0;return!1}});function Ot(t,i){return new ct(t,i)}ct._flat=Dn;var fe=ct.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,o,s,u,b,A,Y,W,it=this._rings[0],ht=it.length;if(!ht)return null;for(b=A=Y=0,t=0,i=ht-1;t<ht;i=t++)o=it[t],s=it[i],u=o.y*s.x-s.y*o.x,A+=(o.x+s.x)*u,Y+=(o.y+s.y)*u,b+=u*3;return b===0?W=it[0]:W=[A/b,Y/b],this._map.layerPointToLatLng(W)},_convertLatLngs:function(t){var i=ct.prototype._convertLatLngs.call(this,t),o=i.length;return o>=2&&i[0]instanceof Rt&&i[0].equals(i[o-1])&&i.pop(),i},_setLatLngs:function(t){ct.prototype._setLatLngs.call(this,t),xe(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return xe(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,o=new st(i,i);if(t=new jt(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var s=0,u=this._rings.length,b;s<u;s++)b=_n(this._rings[s],t,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,o,s,u,b,A,Y,W,it;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(b=0,W=this._parts.length;b<W;b++)for(o=this._parts[b],A=0,it=o.length,Y=it-1;A<it;Y=A++)s=o[A],u=o[Y],s.y>t.y!=u.y>t.y&&t.x<(u.x-s.x)*(t.y-s.y)/(u.y-s.y)+s.x&&(i=!i);return i||ct.prototype._containsPoint.call(this,t,!0)}});function An(t,i){return new fe(t,i)}var Pe=x.extend({initialize:function(t,i){R(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=D(t)?t:t.features,o,s,u;if(i){for(o=0,s=i.length;o<s;o++)u=i[o],(u.geometries||u.geometry||u.features||u.coordinates)&&this.addData(u);return this}var b=this.options;if(b.filter&&!b.filter(t))return this;var A=Ae(t,b);return A?(A.feature=zn(t),A.defaultOptions=A.options,this.resetStyle(A),b.onEachFeature&&b.onEachFeature(t,A),this.addLayer(A)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=c({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function Ae(t,i){var o=t.type==="Feature"?t.geometry:t,s=o?o.coordinates:null,u=[],b=i&&i.pointToLayer,A=i&&i.coordsToLatLng||Fi,Y,W,it,ht;if(!s&&!o)return null;switch(o.type){case"Point":return Y=A(s),bn(b,t,Y,i);case"MultiPoint":for(it=0,ht=s.length;it<ht;it++)Y=A(s[it]),u.push(bn(b,t,Y,i));return new x(u);case"LineString":case"MultiLineString":return W=Ui(s,o.type==="LineString"?0:1,A),new ct(W,i);case"Polygon":case"MultiPolygon":return W=Ui(s,o.type==="Polygon"?1:2,A),new fe(W,i);case"GeometryCollection":for(it=0,ht=o.geometries.length;it<ht;it++){var yt=Ae({geometry:o.geometries[it],type:"Feature",properties:t.properties},i);yt&&u.push(yt)}return new x(u);default:throw new Error("Invalid GeoJSON object.")}}function bn(t,i,o,s){return t?t(i,o):new $(o,s&&s.markersInheritOptions&&s)}function Fi(t){return new Rt(t[1],t[0],t[2])}function Ui(t,i,o){for(var s=[],u=0,b=t.length,A;u<b;u++)A=i?Ui(t[u],i-1,o):(o||Fi)(t[u]),s.push(A);return s}function xi(t,i){return i=typeof i=="number"?i:6,t.alt!==void 0?[T(t.lng,i),T(t.lat,i),T(t.alt,i)]:[T(t.lng,i),T(t.lat,i)]}function Vi(t,i,o,s){for(var u=[],b=0,A=t.length;b<A;b++)u.push(i?Vi(t[b],i-1,o,s):xi(t[b],s));return!i&&o&&u.push(u[0]),u}function ci(t,i){return t.feature?c({},t.feature,{geometry:i}):zn(i)}function zn(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var tr={toGeoJSON:function(t){return ci(this,{type:"Point",coordinates:xi(this.getLatLng(),t)})}};$.include(tr),mt.include(tr),ft.include(tr),ct.include({toGeoJSON:function(t){var i=!xe(this._latlngs),o=Vi(this._latlngs,i?1:0,!1,t);return ci(this,{type:(i?"Multi":"")+"LineString",coordinates:o})}}),fe.include({toGeoJSON:function(t){var i=!xe(this._latlngs),o=i&&!xe(this._latlngs[0]),s=Vi(this._latlngs,o?2:i?1:0,!0,t);return i||(s=[s]),ci(this,{type:(o?"Multi":"")+"Polygon",coordinates:s})}}),p.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(o){i.push(o.toGeoJSON(t).geometry.coordinates)}),ci(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var o=i==="GeometryCollection",s=[];return this.eachLayer(function(u){if(u.toGeoJSON){var b=u.toGeoJSON(t);if(o)s.push(b.geometry);else{var A=zn(b);A.type==="FeatureCollection"?s.push.apply(s,A.features):s.push(A)}}}),o?ci(this,{geometries:s,type:"GeometryCollection"}):{type:"FeatureCollection",features:s}}});function ar(t,i){return new Pe(t,i)}var Rr=ar,Nn=h.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,o){this._url=t,this._bounds=Gt(i),R(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(kt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){qt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Be(this._image),this},bringToBack:function(){return this._map&&oi(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Gt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:St("img");if(kt(i,"leaflet-image-layer"),this._zoomAnimated&&kt(i,"leaflet-zoom-animated"),this.options.className&&kt(i,this.options.className),i.onselectstart=E,i.onmousemove=E,i.onload=_(this.fire,this,"load"),i.onerror=_(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Re(this._image,o,i)},_reset:function(){var t=this._image,i=new jt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=i.getSize();Wt(t,i.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){ye(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ir=function(t,i,o){return new Nn(t,i,o)},sr=Nn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:St("video");if(kt(i,"leaflet-image-layer"),this._zoomAnimated&&kt(i,"leaflet-zoom-animated"),this.options.className&&kt(i,this.options.className),i.onselectstart=E,i.onmousemove=E,i.onloadeddata=_(this.fire,this,"load"),t){for(var o=i.getElementsByTagName("source"),s=[],u=0;u<o.length;u++)s.push(o[u].src);this._url=o.length>0?s:[i.src];return}D(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted;for(var b=0;b<this._url.length;b++){var A=St("source");A.src=this._url[b],i.appendChild(A)}}});function Dr(t,i,o){return new sr(t,i,o)}var lr=Nn.extend({_initImage:function(){var t=this._image=this._url;kt(t,"leaflet-image-layer"),this._zoomAnimated&&kt(t,"leaflet-zoom-animated"),this.options.className&&kt(t,this.options.className),t.onselectstart=E,t.onmousemove=E}});function Ar(t,i,o){return new lr(t,i,o)}var Qe=h.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){R(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ye(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ye(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ye(this._container,0),this._removeTimeout=setTimeout(_(qt,void 0,this._container),200)):qt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Zt(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Be(this._container),this},bringToBack:function(){return this._map&&oi(this._container),this},_prepareOpen:function(t,i,o){if(i instanceof h||(o=i,i=t),i instanceof x)for(var s in t._layers){i=t._layers[s];break}if(!o)if(i.getCenter)o=i.getCenter();else if(i.getLatLng)o=i.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=i,this.update(),o},_updateContent:function(){if(!!this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=wt(this.options.offset),o=this._getAnchor();this._zoomAnimated?Wt(this._container,t.add(o)):i=i.add(t).add(o);var s=this._containerBottom=-i.y,u=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=s+"px",this._container.style.left=u+"px"}},_getAnchor:function(){return[0,0]}}),Hi=Qe.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Qe.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof at||this._source.on("preclick",be))},onRemove:function(t){Qe.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof at||this._source.off("preclick",be))},getEvents:function(){var t=Qe.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=St("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=St("div",t+"-content-wrapper",i);if(this._contentNode=St("div",t+"-content",o),Ke(i),si(this._contentNode),Ct(i,"contextmenu",be),this._tipContainer=St("div",t+"-tip-container",i),this._tip=St("div",t+"-tip",this._tipContainer),this.options.closeButton){var s=this._closeButton=St("a",t+"-close-button",i);s.href="#close",s.innerHTML="&#215;",Ct(s,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),i.width=o+1+"px",i.whiteSpace="",i.height="";var s=t.offsetHeight,u=this.options.maxHeight,b="leaflet-popup-scrolled";u&&s>u?(i.height=u+"px",kt(t,b)):Kt(t,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();Wt(this._container,i.add(o))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,i=parseInt(Ye(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+i,s=this._containerWidth,u=new st(this._containerLeft,-o-this._containerBottom);u._add(Ie(this._container));var b=t.layerPointToContainerPoint(u),A=wt(this.options.autoPanPadding),Y=wt(this.options.autoPanPaddingTopLeft||A),W=wt(this.options.autoPanPaddingBottomRight||A),it=t.getSize(),ht=0,yt=0;b.x+s+W.x>it.x&&(ht=b.x+s-it.x+W.x),b.x-ht-Y.x<0&&(ht=b.x-Y.x),b.y+o+W.y>it.y&&(yt=b.y+o-it.y+W.y),b.y-yt-Y.y<0&&(yt=b.y-Y.y),(ht||yt)&&t.fire("autopanstart").panBy([ht,yt])}},_onCloseButtonClick:function(t){this._close(),ce(t)},_getAnchor:function(){return wt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),zr=function(t,i){return new Hi(t,i)};Tt.mergeOptions({closePopupOnClick:!0}),Tt.include({openPopup:function(t,i,o){return t instanceof Hi||(t=new Hi(o).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return(!t||t===this._popup)&&(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),h.include({bindPopup:function(t,i){return t instanceof Hi?(R(t,i),this._popup=t,t._source=this):((!this._popup||i)&&(this._popup=new Hi(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){return this._popup&&this._map&&(i=this._popup._prepareOpen(this,t,i),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;if(!!this._popup&&!!this._map){if(ce(t),i instanceof at){this.openPopup(t.layer||t.target,t.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var qi=Qe.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Qe.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Qe.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Qe.prototype.getEvents.call(this);return ge&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=St("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,o,s=this._map,u=this._container,b=s.latLngToContainerPoint(s.getCenter()),A=s.layerPointToContainerPoint(t),Y=this.options.direction,W=u.offsetWidth,it=u.offsetHeight,ht=wt(this.options.offset),yt=this._getAnchor();Y==="top"?(i=W/2,o=it):Y==="bottom"?(i=W/2,o=0):Y==="center"?(i=W/2,o=it/2):Y==="right"?(i=0,o=it/2):Y==="left"?(i=W,o=it/2):A.x<b.x?(Y="right",i=0,o=it/2):(Y="left",i=W+(ht.x+yt.x)*2,o=it/2),t=t.subtract(wt(i,o,!0)).add(ht).add(yt),Kt(u,"leaflet-tooltip-right"),Kt(u,"leaflet-tooltip-left"),Kt(u,"leaflet-tooltip-top"),Kt(u,"leaflet-tooltip-bottom"),kt(u,"leaflet-tooltip-"+Y),Wt(u,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ye(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return wt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Nr=function(t,i){return new qi(t,i)};Tt.include({openTooltip:function(t,i,o){return t instanceof qi||(t=new qi(o).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),h.include({bindTooltip:function(t,i){return t instanceof qi?(R(t,i),this._tooltip=t,t._source=this):((!this._tooltip||i)&&(this._tooltip=new qi(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),ge&&(o.click=this._openTooltip)),this[i](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){return this._tooltip&&this._map&&(i=this._tooltip._prepareOpen(this,t,i),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(kt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(Kt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;!this._tooltip||!this._map||this.openTooltip(i,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var i=t.latlng,o,s;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),s=this._map.containerPointToLayerPoint(o),i=this._map.layerPointToLatLng(s)),this._tooltip.setLatLng(i)}});var hr=S.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?(Ri(i),i.appendChild(o.html)):i.innerHTML=o.html!==!1?o.html:"",o.bgPos){var s=wt(o.bgPos);i.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function jr(t){return new hr(t)}S.Default=X;var Ln=h.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ie,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){R(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),qt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Be(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(oi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=I(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof st?t:new st(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,o=-t(-1/0,1/0),s=0,u=i.length,b;s<u;s++)b=i[s].style.zIndex,i[s]!==this._container&&b&&(o=t(o,+b));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!tt){ye(this._container,this.options.opacity);var t=+new Date,i=!1,o=!1;for(var s in this._tiles){var u=this._tiles[s];if(!(!u.current||!u.loaded)){var b=Math.min(1,(t-u.loaded)/200);ye(u.el,b),b<1?i=!0:(u.active?o=!0:this._onOpaqueTile(u),u.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),i&&(dt(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=St("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=i-Math.abs(t-o),this._onUpdateLevel(o)):(qt(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var s=this._levels[t],u=this._map;return s||(s=this._levels[t]={},s.el=St("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=i,s.origin=u.project(u.unproject(u.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,u.getCenter(),u.getZoom()),E(s.el.offsetWidth),this._onCreateLevel(s)),this._level=s,s}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(!!this._map){var t,i,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var s=i.coords;this._retainParent(s.x,s.y,s.z,s.z-5)||this._retainChildren(s.x,s.y,s.z,s.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)qt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,o,s){var u=Math.floor(t/2),b=Math.floor(i/2),A=o-1,Y=new st(+u,+b);Y.z=+A;var W=this._tileCoordsToKey(Y),it=this._tiles[W];return it&&it.active?(it.retain=!0,!0):(it&&it.loaded&&(it.retain=!0),A>s?this._retainParent(u,b,A,s):!1)},_retainChildren:function(t,i,o,s){for(var u=2*t;u<2*t+2;u++)for(var b=2*i;b<2*i+2;b++){var A=new st(u,b);A.z=o+1;var Y=this._tileCoordsToKey(A),W=this._tiles[Y];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);o+1<s&&this._retainChildren(u,b,o+1,s)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,o,s){var u=Math.round(i);this.options.maxZoom!==void 0&&u>this.options.maxZoom||this.options.minZoom!==void 0&&u<this.options.minZoom?u=void 0:u=this._clampZoom(u);var b=this.options.updateWhenZooming&&u!==this._tileZoom;(!s||b)&&(this._tileZoom=u,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),u!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,i)},_setZoomTransform:function(t,i,o){var s=this._map.getZoomScale(o,t.zoom),u=t.origin.multiplyBy(s).subtract(this._map._getNewPixelOrigin(i,o)).round();Ht?Re(t.el,u,s):Wt(t.el,u)},_resetGrid:function(){var t=this._map,i=t.options.crs,o=this._tileSize=this.getTileSize(),s=this._tileZoom,u=this._map.getPixelWorldBounds(this._tileZoom);u&&(this._globalTileRange=this._pxBoundsToTileRange(u)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],s).x/o.x),Math.ceil(t.project([0,i.wrapLng[1]],s).x/o.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],s).y/o.x),Math.ceil(t.project([i.wrapLat[1],0],s).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,o=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),s=i.getZoomScale(o,this._tileZoom),u=i.project(t,this._tileZoom).floor(),b=i.getSize().divideBy(s*2);return new jt(u.subtract(b),u.add(b))},_update:function(t){var i=this._map;if(!!i){var o=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var s=this._getTiledPixelBounds(t),u=this._pxBoundsToTileRange(s),b=u.getCenter(),A=[],Y=this.options.keepBuffer,W=new jt(u.getBottomLeft().subtract([Y,-Y]),u.getTopRight().add([Y,-Y]));if(!(isFinite(u.min.x)&&isFinite(u.min.y)&&isFinite(u.max.x)&&isFinite(u.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var it in this._tiles){var ht=this._tiles[it].coords;(ht.z!==this._tileZoom||!W.contains(new st(ht.x,ht.y)))&&(this._tiles[it].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var yt=u.min.y;yt<=u.max.y;yt++)for(var Dt=u.min.x;Dt<=u.max.x;Dt++){var ti=new st(Dt,yt);if(ti.z=this._tileZoom,!!this._isValidTile(ti)){var Pi=this._tiles[this._tileCoordsToKey(ti)];Pi?Pi.current=!0:A.push(ti)}}if(A.sort(function(fi,er){return fi.distanceTo(b)-er.distanceTo(b)}),A.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Gn=document.createDocumentFragment();for(Dt=0;Dt<A.length;Dt++)this._addTile(A[Dt],Gn);this._level.el.appendChild(Gn)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var o=this._globalTileRange;if(!i.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!i.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var s=this._tileCoordsToBounds(t);return Gt(this.options.bounds).overlaps(s)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,o=this.getTileSize(),s=t.scaleBy(o),u=s.add(o),b=i.unproject(s,t.z),A=i.unproject(u,t.z);return[b,A]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),o=new Ut(i[0],i[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),o=new st(+i[0],+i[1]);return o.z=+i[2],o},_removeTile:function(t){var i=this._tiles[t];!i||(qt(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){kt(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=E,t.onmousemove=E,tt&&this.options.opacity<1&&ye(t,this.options.opacity),Mt&&!Lt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var o=this._getTilePos(t),s=this._tileCoordsToKey(t),u=this.createTile(this._wrapCoords(t),_(this._tileReady,this,t));this._initTile(u),this.createTile.length<2&&vt(_(this._tileReady,this,t,null,u)),Wt(u,o),this._tiles[s]={el:u,coords:t,current:!0},i.appendChild(u),this.fire("tileloadstart",{tile:u,coords:t})},_tileReady:function(t,i,o){i&&this.fire("tileerror",{error:i,tile:o,coords:t});var s=this._tileCoordsToKey(t);o=this._tiles[s],!!o&&(o.loaded=+new Date,this._map._fadeAnimated?(ye(o.el,0),dt(this._fadeFrame),this._fadeFrame=vt(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),i||(kt(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?vt(this._pruneTiles,this):setTimeout(_(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new st(this._wrapX?Z(t.x,this._wrapX):t.x,this._wrapY?Z(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new jt(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Gr(t){return new Ln(t)}var Yi=Ln.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t,i=R(this,i),i.detectRetina&&Te&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),Mt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var o=document.createElement("img");return Ct(o,"load",_(this._tileOnLoad,this,i,o)),Ct(o,"error",_(this._tileOnError,this,i,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),o.alt="",o.setAttribute("role","presentation"),o.src=this.getTileUrl(t),o},getTileUrl:function(t){var i={r:Te?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=o),i["-y"]=o}return C(this._url,c(i,this.options))},_tileOnLoad:function(t,i){tt?setTimeout(_(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,o){var s=this.options.errorTileUrl;s&&i.getAttribute("src")!==s&&(i.src=s),t(o,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,o=this.options.zoomReverse,s=this.options.zoomOffset;return o&&(t=i-t),t+s},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=E,i.onerror=E,i.complete||(i.src=K,qt(i),delete this._tiles[t]))},_removeTile:function(t){var i=this._tiles[t];if(!!i)return xt||i.el.setAttribute("src",K),Ln.prototype._removeTile.call(this,t)},_tileReady:function(t,i,o){if(!(!this._map||o&&o.getAttribute("src")===K))return Ln.prototype._tileReady.call(this,t,i,o)}});function ur(t,i){return new Yi(t,i)}var cr=Yi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var o=c({},this.defaultWmsParams);for(var s in i)s in this.options||(o[s]=i[s]);i=R(this,i);var u=i.detectRetina&&Te?2:1,b=this.getTileSize();o.width=b.x*u,o.height=b.y*u,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Yi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),o=this._crs,s=ae(o.project(i[0]),o.project(i[1])),u=s.min,b=s.max,A=(this._wmsVersion>=1.3&&this._crs===r?[u.y,u.x,b.y,b.x]:[u.x,u.y,b.x,b.y]).join(","),Y=Yi.prototype.getTileUrl.call(this,t);return Y+z(this.wmsParams,Y,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+A},setParams:function(t,i){return c(this.wmsParams,t),i||this.redraw(),this}});function Zr(t,i){return new cr(t,i)}Yi.WMS=cr,ur.wms=Zr;var Ue=h.extend({options:{padding:.1,tolerance:0},initialize:function(t){R(this,t),B(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&kt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var o=this._map.getZoomScale(i,this._zoom),s=Ie(this._container),u=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,i),A=this._map.project(t,i),Y=A.subtract(b),W=u.multiplyBy(-o).add(s).add(u).subtract(Y);Ht?Re(this._container,W,o):Wt(this._container,W)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),o=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new jt(o,o.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fr=Ue.extend({getEvents:function(){var t=Ue.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ue.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ct(t,"mousemove",this._onMouseMove,this),Ct(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ct(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){dt(this._redrawRequest),delete this._ctx,qt(this._container),Yt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ue.prototype._update.call(this);var t=this._bounds,i=this._container,o=t.getSize(),s=Te?2:1;Wt(i,t.min),i.width=s*o.x,i.height=s*o.y,i.style.width=o.x+"px",i.style.height=o.y+"px",Te&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Ue.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[B(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,o=i.next,s=i.prev;o?o.prev=s:this._drawLast=s,s?s.next=o:this._drawFirst=o,delete t._order,delete this._layers[B(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),o=[],s,u;for(u=0;u<i.length;u++){if(s=Number(i[u]),isNaN(s))return;o.push(s)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||vt(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new jt,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var o=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var s=this._drawFirst;s;s=s.next)t=s.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(!!this._drawing){var o,s,u,b,A=t._parts,Y=A.length,W=this._ctx;if(!!Y){for(W.beginPath(),o=0;o<Y;o++){for(s=0,u=A[o].length;s<u;s++)b=A[o][s],W[s?"lineTo":"moveTo"](b.x,b.y);i&&W.closePath()}this._fillStroke(W,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,o=this._ctx,s=Math.max(Math.round(t._radius),1),u=(Math.max(Math.round(t._radiusY),1)||s)/s;u!==1&&(o.save(),o.scale(1,u)),o.beginPath(),o.arc(i.x,i.y/u,s,0,Math.PI*2,!1),u!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,i){var o=i.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),o,s,u=this._drawFirst;u;u=u.next)o=u.layer,o.options.interactive&&o._containsPoint(i)&&(!(t.type==="click"||t.type!=="preclick")||!this._map._draggableMoved(o))&&(s=o);s&&(Mi(t),this._fireEvent([s],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(Kt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var o,s,u=this._drawFirst;u;u=u.next)o=u.layer,o.options.interactive&&o._containsPoint(i)&&(s=o);s!==this._hoveredLayer&&(this._handleMouseOut(t),s&&(kt(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseover"),this._hoveredLayer=s)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(_(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,o){this._map._fireDOMEvent(i,o||i.type,t)},_bringToFront:function(t){var i=t._order;if(!!i){var o=i.next,s=i.prev;if(o)o.prev=s;else return;s?s.next=o:o&&(this._drawFirst=o),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(!!i){var o=i.next,s=i.prev;if(s)s.next=o;else return;o?o.prev=s:s&&(this._drawLast=s),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function dr(t){return He?new fr(t):null}var Mn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Fr={_initContainer:function(){this._container=St("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ue.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Mn("shape");kt(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Mn("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[B(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;qt(i),t.removeInteractiveTarget(i),delete this._layers[B(t)]},_updateStyle:function(t){var i=t._stroke,o=t._fill,s=t.options,u=t._container;u.stroked=!!s.stroke,u.filled=!!s.fill,s.stroke?(i||(i=t._stroke=Mn("stroke")),u.appendChild(i),i.weight=s.weight+"px",i.color=s.color,i.opacity=s.opacity,s.dashArray?i.dashStyle=D(s.dashArray)?s.dashArray.join(" "):s.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=s.lineCap.replace("butt","flat"),i.joinstyle=s.lineJoin):i&&(u.removeChild(i),t._stroke=null),s.fill?(o||(o=t._fill=Mn("fill")),u.appendChild(o),o.color=s.fillColor||s.color,o.opacity=s.fillOpacity):o&&(u.removeChild(o),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),o=Math.round(t._radius),s=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+o+","+s+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){Be(t._container)},_bringToBack:function(t){oi(t._container)}},jn=ii?Mn:j,kn=Ue.extend({getEvents:function(){var t=Ue.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=jn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=jn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){qt(this._container),Yt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ue.prototype._update.call(this);var t=this._bounds,i=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,o.setAttribute("width",i.x),o.setAttribute("height",i.y)),Wt(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=jn("path");t.options.className&&kt(i,t.options.className),t.options.interactive&&kt(i,"leaflet-interactive"),this._updateStyle(t),this._layers[B(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){qt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[B(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,o=t.options;!i||(o.stroke?(i.setAttribute("stroke",o.color),i.setAttribute("stroke-opacity",o.opacity),i.setAttribute("stroke-width",o.weight),i.setAttribute("stroke-linecap",o.lineCap),i.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?i.setAttribute("stroke-dasharray",o.dashArray):i.removeAttribute("stroke-dasharray"),o.dashOffset?i.setAttribute("stroke-dashoffset",o.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),o.fill?(i.setAttribute("fill",o.fillColor||o.color),i.setAttribute("fill-opacity",o.fillOpacity),i.setAttribute("fill-rule",o.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,G(t._parts,i))},_updateCircle:function(t){var i=t._point,o=Math.max(Math.round(t._radius),1),s=Math.max(Math.round(t._radiusY),1)||o,u="a"+o+","+s+" 0 1,0 ",b=t._empty()?"M0 0":"M"+(i.x-o)+","+i.y+u+o*2+",0 "+u+-o*2+",0 ";this._setPath(t,b)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){Be(t._path)},_bringToBack:function(t){oi(t._path)}});ii&&kn.include(Fr);function pr(t){return Ei||ii?new kn(t):null}Tt.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&dr(t)||pr(t)}});var mr=fe.extend({initialize:function(t,i){fe.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Gt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Ur(t,i){return new mr(t,i)}kn.create=jn,kn.pointsToPath=G,Pe.geometryToLayer=Ae,Pe.coordsToLatLng=Fi,Pe.coordsToLatLngs=Ui,Pe.latLngToCoords=xi,Pe.latLngsToCoords=Vi,Pe.getFeature=ci,Pe.asFeature=zn,Tt.mergeOptions({boxZoom:!0});var _r=Ee.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Yt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){qt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),yi(),en(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ct(document,{contextmenu:ce,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=St("div","leaflet-zoom-box",this._container),kt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new jt(this._point,this._startPoint),o=i.getSize();Wt(this._box,i.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(qt(this._box),Kt(this._container,"leaflet-crosshair")),vi(),nn(),Yt(document,{contextmenu:ce,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(_(this._resetState,this),0);var i=new Ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&this._finish()}});Tt.addInitHook("addHandler","boxZoom",_r),Tt.mergeOptions({doubleClickZoom:!0});var gr=Ee.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,o=i.getZoom(),s=i.options.zoomDelta,u=t.originalEvent.shiftKey?o-s:o+s;i.options.doubleClickZoom==="center"?i.setZoom(u):i.setZoomAround(t.containerPoint,u)}});Tt.addInitHook("addHandler","doubleClickZoom",gr),Tt.mergeOptions({dragging:!0,inertia:!Lt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yr=Ee.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Ze(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}kt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Kt(this._map._container,"leaflet-grab"),Kt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=Gt(this._map.options.maxBounds);this._offsetLimit=ae(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),o=this._initialWorldOffset,s=this._draggable._newPos.x,u=(s-i+o)%t+i-o,b=(s+i+o)%t-i-o,A=Math.abs(u+o)<Math.abs(b+o)?u:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=A},_onDragEnd:function(t){var i=this._map,o=i.options,s=!o.inertia||this._times.length<2;if(i.fire("dragend",t),s)i.fire("moveend");else{this._prunePositions(+new Date);var u=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,A=o.easeLinearity,Y=u.multiplyBy(A/b),W=Y.distanceTo([0,0]),it=Math.min(o.inertiaMaxSpeed,W),ht=Y.multiplyBy(it/W),yt=it/(o.inertiaDeceleration*A),Dt=ht.multiplyBy(-yt/2).round();!Dt.x&&!Dt.y?i.fire("moveend"):(Dt=i._limitOffset(Dt,i.options.maxBounds),vt(function(){i.panBy(Dt,{duration:yt,easeLinearity:A,noMoveStart:!0,animate:!0})}))}}});Tt.addInitHook("addHandler","dragging",yr),Tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var vr=Ee.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ct(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Yt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,o=t.scrollTop||i.scrollTop,s=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},o=this.keyCodes,s,u;for(s=0,u=o.left.length;s<u;s++)i[o.left[s]]=[-1*t,0];for(s=0,u=o.right.length;s<u;s++)i[o.right[s]]=[t,0];for(s=0,u=o.down.length;s<u;s++)i[o.down[s]]=[0,t];for(s=0,u=o.up.length;s<u;s++)i[o.up[s]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},o=this.keyCodes,s,u;for(s=0,u=o.zoomIn.length;s<u;s++)i[o.zoomIn[s]]=t;for(s=0,u=o.zoomOut.length;s<u;s++)i[o.zoomOut[s]]=-t},_addHooks:function(){Ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Yt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,o=this._map,s;if(i in this._panKeys)(!o._panAnim||!o._panAnim._inProgress)&&(s=this._panKeys[i],t.shiftKey&&(s=wt(s).multiplyBy(3)),o.panBy(s),o.options.maxBounds&&o.panInsideBounds(o.options.maxBounds));else if(i in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;ce(t)}}});Tt.addInitHook("addHandler","keyboard",vr),Tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var br=Ee.extend({addHooks:function(){Ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Yt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=on(t),o=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var s=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(_(this._performZoom,this),s),ce(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var s=this._delta/(this._map.options.wheelPxPerZoomLevel*4),u=4*Math.log(2/(1+Math.exp(-Math.abs(s))))/Math.LN2,b=o?Math.ceil(u/o)*o:u,A=t._limitZoom(i+(this._delta>0?b:-b))-i;this._delta=0,this._startTime=null,!!A&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+A):t.setZoomAround(this._lastMousePos,i+A))}});Tt.addInitHook("addHandler","scrollWheelZoom",br),Tt.mergeOptions({tap:!0,tapTolerance:15});var Lr=Ee.extend({addHooks:function(){Ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Yt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(!!t.touches){if(he(t),this._fireClick=!0,t.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var i=t.touches[0],o=i.target;this._startPos=this._newPos=new st(i.clientX,i.clientY),o.tagName&&o.tagName.toLowerCase()==="a"&&kt(o,"leaflet-active"),this._holdTimeout=setTimeout(_(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),Ct(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),Yt(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],o=i.target;o&&o.tagName&&o.tagName.toLowerCase()==="a"&&Kt(o,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var i=t.touches[0];this._newPos=new st(i.clientX,i.clientY),this._simulateEvent("mousemove",i)},_simulateEvent:function(t,i){var o=document.createEvent("MouseEvents");o._simulated=!0,i.target._simulatedClick=!0,o.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(o)}});ge&&(!ue||Ft)&&Tt.addInitHook("addHandler","tap",Lr),Tt.mergeOptions({touchZoom:ge&&!Lt,bounceAtZoomLimits:!0});var Mr=Ee.extend({addHooks:function(){kt(this._map._container,"leaflet-touch-zoom"),Ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Kt(this._map._container,"leaflet-touch-zoom"),Yt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var o=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(o.add(s)._divideBy(2))),this._startDist=o.distanceTo(s),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),Ct(document,"touchmove",this._onTouchMove,this),Ct(document,"touchend",this._onTouchEnd,this),he(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,o=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]),u=o.distanceTo(s)/this._startDist;if(this._zoom=i.getScaleZoom(u,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&u<1||this._zoom>i.getMaxZoom()&&u>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,u===1)return}else{var b=o._add(s)._divideBy(2)._subtract(this._centerPoint);if(u===1&&b.x===0&&b.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),dt(this._animRequest);var A=_(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=vt(A,this,!0),he(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,dt(this._animRequest),Yt(document,"touchmove",this._onTouchMove,this),Yt(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tt.addInitHook("addHandler","touchZoom",Mr),Tt.BoxZoom=_r,Tt.DoubleClickZoom=gr,Tt.Drag=yr,Tt.Keyboard=vr,Tt.ScrollWheelZoom=br,Tt.Tap=Lr,Tt.TouchZoom=Mr,l.version=f,l.Control=Le,l.control=hi,l.Browser=mi,l.Evented=de,l.Mixin=Wn,l.Util=It,l.Class=Pt,l.Handler=Ee,l.extend=c,l.bind=_,l.stamp=B,l.setOptions=R,l.DomEvent=sn,l.DomUtil=Tn,l.PosAnimation=Gi,l.Draggable=Ze,l.LineUtil=Qn,l.PolyUtil=gn,l.Point=st,l.point=wt,l.Bounds=jt,l.bounds=ae,l.Transformation=H,l.transformation=d,l.Projection=e,l.LatLng=Rt,l.latLng=Zt,l.LatLngBounds=Ut,l.latLngBounds=Gt,l.CRS=pe,l.GeoJSON=Pe,l.geoJSON=ar,l.geoJson=Rr,l.Layer=h,l.LayerGroup=p,l.layerGroup=g,l.FeatureGroup=x,l.featureGroup=w,l.ImageOverlay=Nn,l.imageOverlay=Ir,l.VideoOverlay=sr,l.videoOverlay=Dr,l.SVGOverlay=lr,l.svgOverlay=Ar,l.DivOverlay=Qe,l.Popup=Hi,l.popup=zr,l.Tooltip=qi,l.tooltip=Nr,l.Icon=S,l.icon=V,l.DivIcon=hr,l.divIcon=jr,l.Marker=$,l.marker=rt,l.TileLayer=Yi,l.tileLayer=ur,l.GridLayer=Ln,l.gridLayer=Gr,l.SVG=kn,l.svg=pr,l.Renderer=Ue,l.Canvas=fr,l.canvas=dr,l.Path=at,l.CircleMarker=ft,l.circleMarker=ut,l.Circle=mt,l.circle=_t,l.Polyline=ct,l.polyline=Ot,l.Polygon=fe,l.polygon=An,l.Rectangle=mr,l.rectangle=Ur,l.Map=Tt,l.map=li;var Vr=window.L;l.noConflict=function(){return window.L=Vr,this},window.L=l})})(nr,nr.exports);var fo=nr.exports;(function(m){var k={};function l(f){if(k[f])return k[f].exports;var c=k[f]={i:f,l:!1,exports:{}};return m[f].call(c.exports,c,c.exports,l),c.l=!0,c.exports}l.m=m,l.c=k,l.d=function(f,c,y){l.o(f,c)||Object.defineProperty(f,c,{enumerable:!0,get:y})},l.r=function(f){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},l.t=function(f,c){if(1&c&&(f=l(f)),8&c||4&c&&typeof f=="object"&&f&&f.__esModule)return f;var y=Object.create(null);if(l.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:f}),2&c&&typeof f!="string")for(var _ in f)l.d(y,_,function(P){return f[P]}.bind(null,_));return y},l.n=function(f){var c=f&&f.__esModule?function(){return f.default}:function(){return f};return l.d(c,"a",c),c},l.o=function(f,c){return Object.prototype.hasOwnProperty.call(f,c)},l.p="",l(l.s=68)})([function(m,k,l){var f=l(136);m.exports=function(c,y,_){var P=c==null?void 0:f(c,y);return P===void 0?_:P}},function(m,k,l){var f=this&&this.__importDefault||function(Z){return Z&&Z.__esModule?Z:{default:Z}};Object.defineProperty(k,"__esModule",{value:!0});var c=l(7),y=l(10),_=f(l(146)),P=l(16),B=f(l(147));function I(Z,E){var T=y.getCoords(Z),N=y.getCoords(E);if(T.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(N.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var U=T[0][0],R=T[0][1],z=T[1][0],M=T[1][1],C=N[0][0],D=N[0][1],q=N[1][0],K=N[1][1],nt=(K-D)*(z-U)-(q-C)*(M-R),J=(q-C)*(R-D)-(K-D)*(U-C),lt=(z-U)*(R-D)-(M-R)*(U-C);if(nt===0)return null;var ot=J/nt,gt=lt/nt;if(ot>=0&&ot<=1&&gt>=0&&gt<=1){var vt=U+ot*(z-U),dt=R+ot*(M-R);return c.point([vt,dt])}return null}k.default=function(Z,E){var T={},N=[];if(Z.type==="LineString"&&(Z=c.feature(Z)),E.type==="LineString"&&(E=c.feature(E)),Z.type==="Feature"&&E.type==="Feature"&&Z.geometry!==null&&E.geometry!==null&&Z.geometry.type==="LineString"&&E.geometry.type==="LineString"&&Z.geometry.coordinates.length===2&&E.geometry.coordinates.length===2){var U=I(Z,E);return U&&N.push(U),c.featureCollection(N)}var R=B.default();return R.load(_.default(E)),P.featureEach(_.default(Z),function(z){P.featureEach(R.search(z),function(M){var C=I(z,M);if(C){var D=y.getCoords(C).join(",");T[D]||(T[D]=!0,N.push(C))}})}),c.featureCollection(N)}},function(m,k){m.exports=function(l){var f=typeof l;return l!=null&&(f=="object"||f=="function")}},function(m,k,l){var f=l(70),c=l(127)(function(y,_,P){f(y,_,P)});m.exports=c},function(m,k,l){var f=l(29),c=typeof self=="object"&&self&&self.Object===Object&&self,y=f||c||Function("return this")();m.exports=y},function(m,k){m.exports=function(l){return l!=null&&typeof l=="object"}},function(m,k){var l=Array.isArray;m.exports=l},function(m,k,l){function f(R,z,M){M===void 0&&(M={});var C={type:"Feature"};return(M.id===0||M.id)&&(C.id=M.id),M.bbox&&(C.bbox=M.bbox),C.properties=z||{},C.geometry=R,C}function c(R,z,M){return M===void 0&&(M={}),f({type:"Point",coordinates:R},z,M)}function y(R,z,M){M===void 0&&(M={});for(var C=0,D=R;C<D.length;C++){var q=D[C];if(q.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var K=0;K<q[q.length-1].length;K++)if(q[q.length-1][K]!==q[0][K])throw new Error("First and last Position are not equivalent.")}return f({type:"Polygon",coordinates:R},z,M)}function _(R,z,M){if(M===void 0&&(M={}),R.length<2)throw new Error("coordinates must be an array of two or more positions");return f({type:"LineString",coordinates:R},z,M)}function P(R,z){z===void 0&&(z={});var M={type:"FeatureCollection"};return z.id&&(M.id=z.id),z.bbox&&(M.bbox=z.bbox),M.features=R,M}function B(R,z,M){return M===void 0&&(M={}),f({type:"MultiLineString",coordinates:R},z,M)}function I(R,z,M){return M===void 0&&(M={}),f({type:"MultiPoint",coordinates:R},z,M)}function Z(R,z,M){return M===void 0&&(M={}),f({type:"MultiPolygon",coordinates:R},z,M)}function E(R,z){z===void 0&&(z="kilometers");var M=k.factors[z];if(!M)throw new Error(z+" units is invalid");return R*M}function T(R,z){z===void 0&&(z="kilometers");var M=k.factors[z];if(!M)throw new Error(z+" units is invalid");return R/M}function N(R){return 180*(R%(2*Math.PI))/Math.PI}function U(R){return!isNaN(R)&&R!==null&&!Array.isArray(R)&&!/^\s*$/.test(R)}Object.defineProperty(k,"__esModule",{value:!0}),k.earthRadius=63710088e-1,k.factors={centimeters:100*k.earthRadius,centimetres:100*k.earthRadius,degrees:k.earthRadius/111325,feet:3.28084*k.earthRadius,inches:39.37*k.earthRadius,kilometers:k.earthRadius/1e3,kilometres:k.earthRadius/1e3,meters:k.earthRadius,metres:k.earthRadius,miles:k.earthRadius/1609.344,millimeters:1e3*k.earthRadius,millimetres:1e3*k.earthRadius,nauticalmiles:k.earthRadius/1852,radians:1,yards:k.earthRadius/1.0936},k.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/k.earthRadius,yards:1/1.0936},k.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},k.feature=f,k.geometry=function(R,z,M){switch(R){case"Point":return c(z).geometry;case"LineString":return _(z).geometry;case"Polygon":return y(z).geometry;case"MultiPoint":return I(z).geometry;case"MultiLineString":return B(z).geometry;case"MultiPolygon":return Z(z).geometry;default:throw new Error(R+" is invalid")}},k.point=c,k.points=function(R,z,M){return M===void 0&&(M={}),P(R.map(function(C){return c(C,z)}),M)},k.polygon=y,k.polygons=function(R,z,M){return M===void 0&&(M={}),P(R.map(function(C){return y(C,z)}),M)},k.lineString=_,k.lineStrings=function(R,z,M){return M===void 0&&(M={}),P(R.map(function(C){return _(C,z)}),M)},k.featureCollection=P,k.multiLineString=B,k.multiPoint=I,k.multiPolygon=Z,k.geometryCollection=function(R,z,M){return M===void 0&&(M={}),f({type:"GeometryCollection",geometries:R},z,M)},k.round=function(R,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var M=Math.pow(10,z||0);return Math.round(R*M)/M},k.radiansToLength=E,k.lengthToRadians=T,k.lengthToDegrees=function(R,z){return N(T(R,z))},k.bearingToAzimuth=function(R){var z=R%360;return z<0&&(z+=360),z},k.radiansToDegrees=N,k.degreesToRadians=function(R){return R%360*Math.PI/180},k.convertLength=function(R,z,M){if(z===void 0&&(z="kilometers"),M===void 0&&(M="kilometers"),!(R>=0))throw new Error("length must be a positive number");return E(T(R,z),M)},k.convertArea=function(R,z,M){if(z===void 0&&(z="meters"),M===void 0&&(M="kilometers"),!(R>=0))throw new Error("area must be a positive number");var C=k.areaFactors[z];if(!C)throw new Error("invalid original units");var D=k.areaFactors[M];if(!D)throw new Error("invalid final units");return R/C*D},k.isNumber=U,k.isObject=function(R){return!!R&&R.constructor===Object},k.validateBBox=function(R){if(!R)throw new Error("bbox is required");if(!Array.isArray(R))throw new Error("bbox must be an Array");if(R.length!==4&&R.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");R.forEach(function(z){if(!U(z))throw new Error("bbox must only contain numbers")})},k.validateId=function(R){if(!R)throw new Error("id is required");if(["string","number"].indexOf(typeof R)===-1)throw new Error("id must be a number or a string")},k.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},k.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},k.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},k.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},k.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},k.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},k.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(7);function c(y,_,P,B,I,Z,E,T){var N,U,R,z,M={x:null,y:null,onLine1:!1,onLine2:!1};return(N=(T-Z)*(P-y)-(E-I)*(B-_))==0?M.x!==null&&M.y!==null&&M:(z=(P-y)*(U=_-Z)-(B-_)*(R=y-I),U=((E-I)*U-(T-Z)*R)/N,R=z/N,M.x=y+U*(P-y),M.y=_+U*(B-_),U>=0&&U<=1&&(M.onLine1=!0),R>=0&&R<=1&&(M.onLine2=!0),!(!M.onLine1||!M.onLine2)&&[M.x,M.y])}k.default=function(y){var _,P,B={type:"FeatureCollection",features:[]};if((P=y.type==="Feature"?y.geometry:y).type==="LineString")_=[P.coordinates];else if(P.type==="MultiLineString")_=P.coordinates;else if(P.type==="MultiPolygon")_=[].concat.apply([],P.coordinates);else{if(P.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");_=P.coordinates}return _.forEach(function(I){_.forEach(function(Z){for(var E=0;E<I.length-1;E++)for(var T=E;T<Z.length-1;T++)if(!(I===Z&&(Math.abs(E-T)===1||E===0&&T===I.length-2&&I[E][0]===I[I.length-1][0]&&I[E][1]===I[I.length-1][1]))){var N=c(I[E][0],I[E][1],I[E+1][0],I[E+1][1],Z[T][0],Z[T][1],Z[T+1][0],Z[T+1][1]);N&&B.features.push(f.point([N[0],N[1]]))}})}),B}},function(m,k,l){var f=l(19),c=l(84),y=l(85),_=f?f.toStringTag:void 0;m.exports=function(P){return P==null?P===void 0?"[object Undefined]":"[object Null]":_&&_ in Object(P)?c(P):y(P)}},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(7);k.getCoord=function(c){if(!c)throw new Error("coord is required");if(!Array.isArray(c)){if(c.type==="Feature"&&c.geometry!==null&&c.geometry.type==="Point")return c.geometry.coordinates;if(c.type==="Point")return c.coordinates}if(Array.isArray(c)&&c.length>=2&&!Array.isArray(c[0])&&!Array.isArray(c[1]))return c;throw new Error("coord must be GeoJSON Point or an Array of numbers")},k.getCoords=function(c){if(Array.isArray(c))return c;if(c.type==="Feature"){if(c.geometry!==null)return c.geometry.coordinates}else if(c.coordinates)return c.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},k.containsNumber=function c(y){if(y.length>1&&f.isNumber(y[0])&&f.isNumber(y[1]))return!0;if(Array.isArray(y[0])&&y[0].length)return c(y[0]);throw new Error("coordinates must only contain numbers")},k.geojsonType=function(c,y,_){if(!y||!_)throw new Error("type and name required");if(!c||c.type!==y)throw new Error("Invalid input to "+_+": must be a "+y+", given "+c.type)},k.featureOf=function(c,y,_){if(!c)throw new Error("No feature passed");if(!_)throw new Error(".featureOf() requires a name");if(!c||c.type!=="Feature"||!c.geometry)throw new Error("Invalid input to "+_+", Feature with geometry required");if(!c.geometry||c.geometry.type!==y)throw new Error("Invalid input to "+_+": must be a "+y+", given "+c.geometry.type)},k.collectionOf=function(c,y,_){if(!c)throw new Error("No featureCollection passed");if(!_)throw new Error(".collectionOf() requires a name");if(!c||c.type!=="FeatureCollection")throw new Error("Invalid input to "+_+", FeatureCollection required");for(var P=0,B=c.features;P<B.length;P++){var I=B[P];if(!I||I.type!=="Feature"||!I.geometry)throw new Error("Invalid input to "+_+", Feature with geometry required");if(!I.geometry||I.geometry.type!==y)throw new Error("Invalid input to "+_+": must be a "+y+", given "+I.geometry.type)}},k.getGeom=function(c){return c.type==="Feature"?c.geometry:c},k.getType=function(c,y){return c.type==="FeatureCollection"?"FeatureCollection":c.type==="GeometryCollection"?"GeometryCollection":c.type==="Feature"&&c.geometry!==null?c.geometry.type:c.type}},function(m,k,l){var f=l(72),c=l(73),y=l(74),_=l(75),P=l(76);function B(I){var Z=-1,E=I==null?0:I.length;for(this.clear();++Z<E;){var T=I[Z];this.set(T[0],T[1])}}B.prototype.clear=f,B.prototype.delete=c,B.prototype.get=y,B.prototype.has=_,B.prototype.set=P,m.exports=B},function(m,k,l){var f=l(13);m.exports=function(c,y){for(var _=c.length;_--;)if(f(c[_][0],y))return _;return-1}},function(m,k){m.exports=function(l,f){return l===f||l!=l&&f!=f}},function(m,k,l){var f=l(17)(Object,"create");m.exports=f},function(m,k,l){var f=l(98);m.exports=function(c,y){var _=c.__data__;return f(y)?_[typeof y=="string"?"string":"hash"]:_.map}},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(7);function c(E,T,N){if(E!==null)for(var U,R,z,M,C,D,q,K,nt=0,J=0,lt=E.type,ot=lt==="FeatureCollection",gt=lt==="Feature",vt=ot?E.features.length:1,dt=0;dt<vt;dt++){C=(K=!!(q=ot?E.features[dt].geometry:gt?E.geometry:E)&&q.type==="GeometryCollection")?q.geometries.length:1;for(var It=0;It<C;It++){var Pt=0,At=0;if((M=K?q.geometries[It]:q)!==null){D=M.coordinates;var Bt=M.type;switch(nt=!N||Bt!=="Polygon"&&Bt!=="MultiPolygon"?0:1,Bt){case null:break;case"Point":if(T(D,J,dt,Pt,At)===!1)return!1;J++,Pt++;break;case"LineString":case"MultiPoint":for(U=0;U<D.length;U++){if(T(D[U],J,dt,Pt,At)===!1)return!1;J++,Bt==="MultiPoint"&&Pt++}Bt==="LineString"&&Pt++;break;case"Polygon":case"MultiLineString":for(U=0;U<D.length;U++){for(R=0;R<D[U].length-nt;R++){if(T(D[U][R],J,dt,Pt,At)===!1)return!1;J++}Bt==="MultiLineString"&&Pt++,Bt==="Polygon"&&At++}Bt==="Polygon"&&Pt++;break;case"MultiPolygon":for(U=0;U<D.length;U++){for(At=0,R=0;R<D[U].length;R++){for(z=0;z<D[U][R].length-nt;z++){if(T(D[U][R][z],J,dt,Pt,At)===!1)return!1;J++}At++}Pt++}break;case"GeometryCollection":for(U=0;U<M.geometries.length;U++)if(c(M.geometries[U],T,N)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function y(E,T){var N;switch(E.type){case"FeatureCollection":for(N=0;N<E.features.length&&T(E.features[N].properties,N)!==!1;N++);break;case"Feature":T(E.properties,0)}}function _(E,T){if(E.type==="Feature")T(E,0);else if(E.type==="FeatureCollection")for(var N=0;N<E.features.length&&T(E.features[N],N)!==!1;N++);}function P(E,T){var N,U,R,z,M,C,D,q,K,nt,J=0,lt=E.type==="FeatureCollection",ot=E.type==="Feature",gt=lt?E.features.length:1;for(N=0;N<gt;N++){for(C=lt?E.features[N].geometry:ot?E.geometry:E,q=lt?E.features[N].properties:ot?E.properties:{},K=lt?E.features[N].bbox:ot?E.bbox:void 0,nt=lt?E.features[N].id:ot?E.id:void 0,M=(D=!!C&&C.type==="GeometryCollection")?C.geometries.length:1,R=0;R<M;R++)if((z=D?C.geometries[R]:C)!==null)switch(z.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(T(z,J,q,K,nt)===!1)return!1;break;case"GeometryCollection":for(U=0;U<z.geometries.length;U++)if(T(z.geometries[U],J,q,K,nt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(T(null,J,q,K,nt)===!1)return!1;J++}}function B(E,T){P(E,function(N,U,R,z,M){var C,D=N===null?null:N.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return T(f.feature(N,R,{bbox:z,id:M}),U,0)!==!1&&void 0}switch(D){case"MultiPoint":C="Point";break;case"MultiLineString":C="LineString";break;case"MultiPolygon":C="Polygon"}for(var q=0;q<N.coordinates.length;q++){var K={type:C,coordinates:N.coordinates[q]};if(T(f.feature(K,R),U,q)===!1)return!1}})}function I(E,T){B(E,function(N,U,R){var z=0;if(N.geometry){var M=N.geometry.type;if(M!=="Point"&&M!=="MultiPoint"){var C,D=0,q=0,K=0;return c(N,function(nt,J,lt,ot,gt){if(C===void 0||U>D||ot>q||gt>K)return C=nt,D=U,q=ot,K=gt,void(z=0);var vt=f.lineString([C,nt],N.properties);if(T(vt,U,R,gt,z)===!1)return!1;z++,C=nt})!==!1&&void 0}}})}function Z(E,T){if(!E)throw new Error("geojson is required");B(E,function(N,U,R){if(N.geometry!==null){var z=N.geometry.type,M=N.geometry.coordinates;switch(z){case"LineString":if(T(N,U,R,0,0)===!1)return!1;break;case"Polygon":for(var C=0;C<M.length;C++)if(T(f.lineString(M[C],N.properties),U,R,C)===!1)return!1}}})}k.coordEach=c,k.coordReduce=function(E,T,N,U){var R=N;return c(E,function(z,M,C,D,q){R=M===0&&N===void 0?z:T(R,z,M,C,D,q)},U),R},k.propEach=y,k.propReduce=function(E,T,N){var U=N;return y(E,function(R,z){U=z===0&&N===void 0?R:T(U,R,z)}),U},k.featureEach=_,k.featureReduce=function(E,T,N){var U=N;return _(E,function(R,z){U=z===0&&N===void 0?R:T(U,R,z)}),U},k.coordAll=function(E){var T=[];return c(E,function(N){T.push(N)}),T},k.geomEach=P,k.geomReduce=function(E,T,N){var U=N;return P(E,function(R,z,M,C,D){U=z===0&&N===void 0?R:T(U,R,z,M,C,D)}),U},k.flattenEach=B,k.flattenReduce=function(E,T,N){var U=N;return B(E,function(R,z,M){U=z===0&&M===0&&N===void 0?R:T(U,R,z,M)}),U},k.segmentEach=I,k.segmentReduce=function(E,T,N){var U=N,R=!1;return I(E,function(z,M,C,D,q){U=R===!1&&N===void 0?z:T(U,z,M,C,D,q),R=!0}),U},k.lineEach=Z,k.lineReduce=function(E,T,N){var U=N;return Z(E,function(R,z,M,C){U=z===0&&N===void 0?R:T(U,R,z,M,C)}),U},k.findSegment=function(E,T){if(T=T||{},!f.isObject(T))throw new Error("options is invalid");var N,U=T.featureIndex||0,R=T.multiFeatureIndex||0,z=T.geometryIndex||0,M=T.segmentIndex||0,C=T.properties;switch(E.type){case"FeatureCollection":U<0&&(U=E.features.length+U),C=C||E.features[U].properties,N=E.features[U].geometry;break;case"Feature":C=C||E.properties,N=E.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":N=E;break;default:throw new Error("geojson is invalid")}if(N===null)return null;var D=N.coordinates;switch(N.type){case"Point":case"MultiPoint":return null;case"LineString":return M<0&&(M=D.length+M-1),f.lineString([D[M],D[M+1]],C,T);case"Polygon":return z<0&&(z=D.length+z),M<0&&(M=D[z].length+M-1),f.lineString([D[z][M],D[z][M+1]],C,T);case"MultiLineString":return R<0&&(R=D.length+R),M<0&&(M=D[R].length+M-1),f.lineString([D[R][M],D[R][M+1]],C,T);case"MultiPolygon":return R<0&&(R=D.length+R),z<0&&(z=D[R].length+z),M<0&&(M=D[R][z].length-M-1),f.lineString([D[R][z][M],D[R][z][M+1]],C,T)}throw new Error("geojson is invalid")},k.findPoint=function(E,T){if(T=T||{},!f.isObject(T))throw new Error("options is invalid");var N,U=T.featureIndex||0,R=T.multiFeatureIndex||0,z=T.geometryIndex||0,M=T.coordIndex||0,C=T.properties;switch(E.type){case"FeatureCollection":U<0&&(U=E.features.length+U),C=C||E.features[U].properties,N=E.features[U].geometry;break;case"Feature":C=C||E.properties,N=E.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":N=E;break;default:throw new Error("geojson is invalid")}if(N===null)return null;var D=N.coordinates;switch(N.type){case"Point":return f.point(D,C,T);case"MultiPoint":return R<0&&(R=D.length+R),f.point(D[R],C,T);case"LineString":return M<0&&(M=D.length+M),f.point(D[M],C,T);case"Polygon":return z<0&&(z=D.length+z),M<0&&(M=D[z].length+M),f.point(D[z][M],C,T);case"MultiLineString":return R<0&&(R=D.length+R),M<0&&(M=D[R].length+M),f.point(D[R][M],C,T);case"MultiPolygon":return R<0&&(R=D.length+R),z<0&&(z=D[R].length+z),M<0&&(M=D[R][z].length-M),f.point(D[R][z][M],C,T)}throw new Error("geojson is invalid")}},function(m,k,l){var f=l(82),c=l(89);m.exports=function(y,_){var P=c(y,_);return f(P)?P:void 0}},function(m,k,l){var f=l(9),c=l(2);m.exports=function(y){if(!c(y))return!1;var _=f(y);return _=="[object Function]"||_=="[object GeneratorFunction]"||_=="[object AsyncFunction]"||_=="[object Proxy]"}},function(m,k,l){var f=l(4).Symbol;m.exports=f},function(m,k,l){var f=l(32);m.exports=function(c,y,_){y=="__proto__"&&f?f(c,y,{configurable:!0,enumerable:!0,value:_,writable:!0}):c[y]=_}},function(m,k){m.exports=function(l){return l.webpackPolyfill||(l.deprecate=function(){},l.paths=[],l.children||(l.children=[]),Object.defineProperty(l,"loaded",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(l,"id",{enumerable:!0,get:function(){return l.i}}),l.webpackPolyfill=1),l}},function(m,k,l){var f=l(113),c=l(5),y=Object.prototype,_=y.hasOwnProperty,P=y.propertyIsEnumerable,B=f(function(){return arguments}())?f:function(I){return c(I)&&_.call(I,"callee")&&!P.call(I,"callee")};m.exports=B},function(m,k,l){var f=l(18),c=l(24);m.exports=function(y){return y!=null&&c(y.length)&&!f(y)}},function(m,k){m.exports=function(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=9007199254740991}},function(m,k){var l=/^(?:0|[1-9]\d*)$/;m.exports=function(f,c){var y=typeof f;return!!(c=c==null?9007199254740991:c)&&(y=="number"||y!="symbol"&&l.test(f))&&f>-1&&f%1==0&&f<c}},function(m,k,l){var f=l(9),c=l(5);m.exports=function(y){return typeof y=="symbol"||c(y)&&f(y)=="[object Symbol]"}},function(m,k,l){(function(f){m.exports=function(){function c(H,d){if(!(H instanceof d))throw new TypeError("Cannot call a class as a function")}function y(H,d){for(var v=0;v<d.length;v++){var O=d[v];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(H,O.key,O)}}function _(H,d,v){return d&&y(H.prototype,d),v&&y(H,v),H}/**
   * splaytree v3.0.1
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var P=function H(d,v){c(this,H),this.next=null,this.key=d,this.data=v,this.left=null,this.right=null};function B(H,d){return H>d?1:H<d?-1:0}function I(H,d,v){for(var O=new P(null,null),j=O,G=O;;){var Q=v(H,d.key);if(Q<0){if(d.left===null)break;if(v(H,d.left.key)<0){var et=d.left;if(d.left=et.right,et.right=d,(d=et).left===null)break}G.left=d,G=d,d=d.left}else{if(!(Q>0)||d.right===null)break;if(v(H,d.right.key)>0){var tt=d.right;if(d.right=tt.left,tt.left=d,(d=tt).right===null)break}j.right=d,j=d,d=d.right}}return j.right=d.left,G.left=d.right,d.left=O.right,d.right=O.left,d}function Z(H,d,v,O){var j=new P(H,d);if(v===null)return j.left=j.right=null,j;var G=O(H,(v=I(H,v,O)).key);return G<0?(j.left=v.left,j.right=v,v.left=null):G>=0&&(j.right=v.right,j.left=v,v.right=null),j}function E(H,d,v){var O=null,j=null;if(d){var G=v((d=I(H,d,v)).key,H);G===0?(O=d.left,j=d.right):G<0?(j=d.right,d.right=null,O=d):(O=d.left,d.left=null,j=d)}return{left:O,right:j}}function T(H,d,v,O,j){if(H){O("".concat(d).concat(v?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ").concat(j(H),`
`));var G=d+(v?"    ":"\u2502   ");H.left&&T(H.left,G,!1,O,j),H.right&&T(H.right,G,!0,O,j)}}var N=function(){function H(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B;c(this,H),this._root=null,this._size=0,this._comparator=d}return _(H,[{key:"insert",value:function(d,v){return this._size++,this._root=Z(d,v,this._root,this._comparator)}},{key:"add",value:function(d,v){var O=new P(d,v);this._root===null&&(O.left=O.right=null,this._size++,this._root=O);var j=this._comparator,G=I(d,this._root,j),Q=j(d,G.key);return Q===0?this._root=G:(Q<0?(O.left=G.left,O.right=G,G.left=null):Q>0&&(O.right=G.right,O.left=G,G.right=null),this._size++,this._root=O),this._root}},{key:"remove",value:function(d){this._root=this._remove(d,this._root,this._comparator)}},{key:"_remove",value:function(d,v,O){var j;return v===null?null:O(d,(v=I(d,v,O)).key)===0?(v.left===null?j=v.right:(j=I(d,v.left,O)).right=v.right,this._size--,j):v}},{key:"pop",value:function(){var d=this._root;if(d){for(;d.left;)d=d.left;return this._root=I(d.key,this._root,this._comparator),this._root=this._remove(d.key,this._root,this._comparator),{key:d.key,data:d.data}}return null}},{key:"findStatic",value:function(d){for(var v=this._root,O=this._comparator;v;){var j=O(d,v.key);if(j===0)return v;v=j<0?v.left:v.right}return null}},{key:"find",value:function(d){return this._root&&(this._root=I(d,this._root,this._comparator),this._comparator(d,this._root.key)!==0)?null:this._root}},{key:"contains",value:function(d){for(var v=this._root,O=this._comparator;v;){var j=O(d,v.key);if(j===0)return!0;v=j<0?v.left:v.right}return!1}},{key:"forEach",value:function(d,v){for(var O=this._root,j=[],G=!1;!G;)O!==null?(j.push(O),O=O.left):j.length!==0?(O=j.pop(),d.call(v,O),O=O.right):G=!0;return this}},{key:"range",value:function(d,v,O,j){for(var G=[],Q=this._comparator,et=this._root;G.length!==0||et;)if(et)G.push(et),et=et.left;else{if(Q((et=G.pop()).key,v)>0)break;if(Q(et.key,d)>=0&&O.call(j,et))return this;et=et.right}return this}},{key:"keys",value:function(){var d=[];return this.forEach(function(v){var O=v.key;return d.push(O)}),d}},{key:"values",value:function(){var d=[];return this.forEach(function(v){var O=v.data;return d.push(O)}),d}},{key:"min",value:function(){return this._root?this.minNode(this._root).key:null}},{key:"max",value:function(){return this._root?this.maxNode(this._root).key:null}},{key:"minNode",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._root;if(d)for(;d.left;)d=d.left;return d}},{key:"maxNode",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._root;if(d)for(;d.right;)d=d.right;return d}},{key:"at",value:function(d){for(var v=this._root,O=!1,j=0,G=[];!O;)if(v)G.push(v),v=v.left;else if(G.length>0){if(v=G.pop(),j===d)return v;j++,v=v.right}else O=!0;return null}},{key:"next",value:function(d){var v=this._root,O=null;if(d.right){for(O=d.right;O.left;)O=O.left;return O}for(var j=this._comparator;v;){var G=j(d.key,v.key);if(G===0)break;G<0?(O=v,v=v.left):v=v.right}return O}},{key:"prev",value:function(d){var v=this._root,O=null;if(d.left!==null){for(O=d.left;O.right;)O=O.right;return O}for(var j=this._comparator;v;){var G=j(d.key,v.key);if(G===0)break;G<0?v=v.left:(O=v,v=v.right)}return O}},{key:"clear",value:function(){return this._root=null,this._size=0,this}},{key:"toList",value:function(){return function(d){for(var v=d,O=[],j=!1,G=new P(null,null),Q=G;!j;)v?(O.push(v),v=v.left):O.length>0?v=(v=Q=Q.next=O.pop()).right:j=!0;return Q.next=null,G.next}(this._root)}},{key:"load",value:function(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],O=arguments.length>2&&arguments[2]!==void 0&&arguments[2],j=d.length,G=this._comparator;if(O&&C(d,v,0,j-1,G),this._root===null)this._root=U(d,v,0,j),this._size=j;else{var Q=M(this.toList(),R(d,v),G);j=this._size+j,this._root=z({head:Q},0,j)}return this}},{key:"isEmpty",value:function(){return this._root===null}},{key:"toString",value:function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(O){return String(O.key)},v=[];return T(this._root,"",!0,function(O){return v.push(O)},d),v.join("")}},{key:"update",value:function(d,v,O){var j=this._comparator,G=E(d,this._root,j),Q=G.left,et=G.right;j(d,v)<0?et=Z(v,O,et,j):Q=Z(v,O,Q,j),this._root=function(tt,pt,bt){return pt===null?tt:(tt===null||((pt=I(tt.key,pt,bt)).left=tt),pt)}(Q,et,j)}},{key:"split",value:function(d){return E(d,this._root,this._comparator)}},{key:"size",get:function(){return this._size}},{key:"root",get:function(){return this._root}}]),H}();function U(H,d,v,O){var j=O-v;if(j>0){var G=v+Math.floor(j/2),Q=H[G],et=d[G],tt=new P(Q,et);return tt.left=U(H,d,v,G),tt.right=U(H,d,G+1,O),tt}return null}function R(H,d){for(var v=new P(null,null),O=v,j=0;j<H.length;j++)O=O.next=new P(H[j],d[j]);return O.next=null,v.next}function z(H,d,v){var O=v-d;if(O>0){var j=d+Math.floor(O/2),G=z(H,d,j),Q=H.head;return Q.left=G,H.head=H.head.next,Q.right=z(H,j+1,v),Q}return null}function M(H,d,v){for(var O=new P(null,null),j=O,G=H,Q=d;G!==null&&Q!==null;)v(G.key,Q.key)<0?(j.next=G,G=G.next):(j.next=Q,Q=Q.next),j=j.next;return G!==null?j.next=G:Q!==null&&(j.next=Q),O.next}function C(H,d,v,O,j){if(!(v>=O)){for(var G=H[v+O>>1],Q=v-1,et=O+1;;){do Q++;while(j(H[Q],G)<0);do et--;while(j(H[et],G)>0);if(Q>=et)break;var tt=H[Q];H[Q]=H[et],H[et]=tt,tt=d[Q],d[Q]=d[et],d[et]=tt}C(H,d,v,et,j),C(H,d,et+1,O,j)}}var D=function(H,d){return H.ll.x<=d.x&&d.x<=H.ur.x&&H.ll.y<=d.y&&d.y<=H.ur.y},q=function(H,d){if(d.ur.x<H.ll.x||H.ur.x<d.ll.x||d.ur.y<H.ll.y||H.ur.y<d.ll.y)return null;var v=H.ll.x<d.ll.x?d.ll.x:H.ll.x,O=H.ur.x<d.ur.x?H.ur.x:d.ur.x;return{ll:{x:v,y:H.ll.y<d.ll.y?d.ll.y:H.ll.y},ur:{x:O,y:H.ur.y<d.ur.y?H.ur.y:d.ur.y}}},K=Number.EPSILON;K===void 0&&(K=Math.pow(2,-52));var nt=K*K,J=function(H,d){if(-K<H&&H<K&&-K<d&&d<K)return 0;var v=H-d;return v*v<nt*H*d?0:H<d?-1:1},lt=function(){function H(){c(this,H),this.reset()}return _(H,[{key:"reset",value:function(){this.xRounder=new ot,this.yRounder=new ot}},{key:"round",value:function(d,v){return{x:this.xRounder.round(d),y:this.yRounder.round(v)}}}]),H}(),ot=function(){function H(){c(this,H),this.tree=new N,this.round(0)}return _(H,[{key:"round",value:function(d){var v=this.tree.add(d),O=this.tree.prev(v);if(O!==null&&J(v.key,O.key)===0)return this.tree.remove(d),O.key;var j=this.tree.next(v);return j!==null&&J(v.key,j.key)===0?(this.tree.remove(d),j.key):d}}]),H}(),gt=new lt,vt=function(H,d){return H.x*d.y-H.y*d.x},dt=function(H,d){return H.x*d.x+H.y*d.y},It=function(H,d,v){var O={x:d.x-H.x,y:d.y-H.y},j={x:v.x-H.x,y:v.y-H.y},G=vt(O,j);return J(G,0)},Pt=function(H){return Math.sqrt(dt(H,H))},At=function(H,d,v){var O={x:d.x-H.x,y:d.y-H.y},j={x:v.x-H.x,y:v.y-H.y};return dt(j,O)/Pt(j)/Pt(O)},Bt=function(H,d,v){return d.y===0?null:{x:H.x+d.x/d.y*(v-H.y),y:v}},de=function(H,d,v){return d.x===0?null:{x:v,y:H.y+d.y/d.x*(v-H.x)}},st=function(){function H(d,v){c(this,H),d.events===void 0?d.events=[this]:d.events.push(this),this.point=d,this.isLeft=v}return _(H,null,[{key:"compare",value:function(d,v){var O=H.comparePoints(d.point,v.point);return O!==0?O:(d.point!==v.point&&d.link(v),d.isLeft!==v.isLeft?d.isLeft?1:-1:wt.compare(d.segment,v.segment))}},{key:"comparePoints",value:function(d,v){return d.x<v.x?-1:d.x>v.x?1:d.y<v.y?-1:d.y>v.y?1:0}}]),_(H,[{key:"link",value:function(d){if(d.point===this.point)throw new Error("Tried to link already linked events");for(var v=d.point.events,O=0,j=v.length;O<j;O++){var G=v[O];this.point.events.push(G),G.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var d=this.point.events.length,v=0;v<d;v++){var O=this.point.events[v];if(O.segment.consumedBy===void 0)for(var j=v+1;j<d;j++){var G=this.point.events[j];G.consumedBy===void 0&&O.otherSE.point.events===G.otherSE.point.events&&O.segment.consume(G.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var d=[],v=0,O=this.point.events.length;v<O;v++){var j=this.point.events[v];j!==this&&!j.segment.ringOut&&j.segment.isInResult()&&d.push(j)}return d}},{key:"getLeftmostComparator",value:function(d){var v=this,O=new Map,j=function(G){var Q,et,tt,pt,bt,Mt=G.otherSE;O.set(G,{sine:(Q=v.point,et=d.point,tt=Mt.point,pt={x:et.x-Q.x,y:et.y-Q.y},bt={x:tt.x-Q.x,y:tt.y-Q.y},vt(bt,pt)/Pt(bt)/Pt(pt)),cosine:At(v.point,d.point,Mt.point)})};return function(G,Q){O.has(G)||j(G),O.has(Q)||j(Q);var et=O.get(G),tt=et.sine,pt=et.cosine,bt=O.get(Q),Mt=bt.sine,Lt=bt.cosine;return tt>=0&&Mt>=0?pt<Lt?1:pt>Lt?-1:0:tt<0&&Mt<0?pt<Lt?-1:pt>Lt?1:0:Mt<tt?-1:Mt>tt?1:0}}}]),H}(),di=0,wt=function(){function H(d,v,O,j){c(this,H),this.id=++di,this.leftSE=d,d.segment=this,d.otherSE=v,this.rightSE=v,v.segment=this,v.otherSE=d,this.rings=O,this.windings=j}return _(H,null,[{key:"compare",value:function(d,v){var O=d.leftSE.point.x,j=v.leftSE.point.x,G=d.rightSE.point.x,Q=v.rightSE.point.x;if(Q<O)return 1;if(G<j)return-1;var et=d.leftSE.point.y,tt=v.leftSE.point.y,pt=d.rightSE.point.y,bt=v.rightSE.point.y;if(O<j){if(tt<et&&tt<pt)return 1;if(tt>et&&tt>pt)return-1;var Mt=d.comparePoint(v.leftSE.point);if(Mt<0)return 1;if(Mt>0)return-1;var Lt=v.comparePoint(d.rightSE.point);return Lt!==0?Lt:-1}if(O>j){if(et<tt&&et<bt)return-1;if(et>tt&&et>bt)return 1;var Vt=v.comparePoint(d.leftSE.point);if(Vt!==0)return Vt;var xt=d.comparePoint(v.rightSE.point);return xt<0?1:xt>0?-1:1}if(et<tt)return-1;if(et>tt)return 1;if(G<Q){var Et=v.comparePoint(d.rightSE.point);if(Et!==0)return Et}if(G>Q){var zt=d.comparePoint(v.rightSE.point);if(zt<0)return 1;if(zt>0)return-1}if(G!==Q){var Nt=pt-et,Ft=G-O,Xt=bt-tt,Jt=Q-j;if(Nt>Ft&&Xt<Jt)return 1;if(Nt<Ft&&Xt>Jt)return-1}return G>Q?1:G<Q||pt<bt?-1:pt>bt?1:d.id<v.id?-1:d.id>v.id?1:0}}]),_(H,[{key:"replaceRightSE",value:function(d){this.rightSE=d,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var d=this.leftSE.point.y,v=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:d<v?d:v},ur:{x:this.rightSE.point.x,y:d>v?d:v}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(d){return d.x===this.leftSE.point.x&&d.y===this.leftSE.point.y||d.x===this.rightSE.point.x&&d.y===this.rightSE.point.y}},{key:"comparePoint",value:function(d){if(this.isAnEndpoint(d))return 0;var v=this.leftSE.point,O=this.rightSE.point,j=this.vector();if(v.x===O.x)return d.x===v.x?0:d.x<v.x?1:-1;var G=(d.y-v.y)/j.y,Q=v.x+G*j.x;if(d.x===Q)return 0;var et=(d.x-v.x)/j.x,tt=v.y+et*j.y;return d.y===tt?0:d.y<tt?-1:1}},{key:"getIntersection",value:function(d){var v=this.bbox(),O=d.bbox(),j=q(v,O);if(j===null)return null;var G=this.leftSE.point,Q=this.rightSE.point,et=d.leftSE.point,tt=d.rightSE.point,pt=D(v,et)&&this.comparePoint(et)===0,bt=D(O,G)&&d.comparePoint(G)===0,Mt=D(v,tt)&&this.comparePoint(tt)===0,Lt=D(O,Q)&&d.comparePoint(Q)===0;if(bt&&pt)return Lt&&!Mt?Q:!Lt&&Mt?tt:null;if(bt)return Mt&&G.x===tt.x&&G.y===tt.y?null:G;if(pt)return Lt&&Q.x===et.x&&Q.y===et.y?null:et;if(Lt&&Mt)return null;if(Lt)return Q;if(Mt)return tt;var Vt=function(xt,Et,zt,Nt){if(Et.x===0)return de(zt,Nt,xt.x);if(Nt.x===0)return de(xt,Et,zt.x);if(Et.y===0)return Bt(zt,Nt,xt.y);if(Nt.y===0)return Bt(xt,Et,zt.y);var Ft=vt(Et,Nt);if(Ft==0)return null;var Xt={x:zt.x-xt.x,y:zt.y-xt.y},Jt=vt(Xt,Et)/Ft,me=vt(Xt,Nt)/Ft;return{x:(xt.x+me*Et.x+(zt.x+Jt*Nt.x))/2,y:(xt.y+me*Et.y+(zt.y+Jt*Nt.y))/2}}(G,this.vector(),et,d.vector());return Vt===null?null:D(j,Vt)?gt.round(Vt.x,Vt.y):null}},{key:"split",value:function(d){var v=[],O=d.events!==void 0,j=new st(d,!0),G=new st(d,!1),Q=this.rightSE;this.replaceRightSE(G),v.push(G),v.push(j);var et=new H(j,Q,this.rings.slice(),this.windings.slice());return st.comparePoints(et.leftSE.point,et.rightSE.point)>0&&et.swapEvents(),st.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),O&&(j.checkForConsuming(),G.checkForConsuming()),v}},{key:"swapEvents",value:function(){var d=this.rightSE;this.rightSE=this.leftSE,this.leftSE=d,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var v=0,O=this.windings.length;v<O;v++)this.windings[v]*=-1}},{key:"consume",value:function(d){for(var v=this,O=d;v.consumedBy;)v=v.consumedBy;for(;O.consumedBy;)O=O.consumedBy;var j=H.compare(v,O);if(j!==0){if(j>0){var G=v;v=O,O=G}if(v.prev===O){var Q=v;v=O,O=Q}for(var et=0,tt=O.rings.length;et<tt;et++){var pt=O.rings[et],bt=O.windings[et],Mt=v.rings.indexOf(pt);Mt===-1?(v.rings.push(pt),v.windings.push(bt)):v.windings[Mt]+=bt}O.rings=null,O.windings=null,O.consumedBy=v,O.leftSE.consumedBy=v.leftSE,O.rightSE.consumedBy=v.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var d=this.prev.consumedBy||this.prev;this._beforeState=d.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var d=this.beforeState();this._afterState={rings:d.rings.slice(0),windings:d.windings.slice(0),multiPolys:[]};for(var v=this._afterState.rings,O=this._afterState.windings,j=this._afterState.multiPolys,G=0,Q=this.rings.length;G<Q;G++){var et=this.rings[G],tt=this.windings[G],pt=v.indexOf(et);pt===-1?(v.push(et),O.push(tt)):O[pt]+=tt}for(var bt=[],Mt=[],Lt=0,Vt=v.length;Lt<Vt;Lt++)if(O[Lt]!==0){var xt=v[Lt],Et=xt.poly;if(Mt.indexOf(Et)===-1)if(xt.isExterior)bt.push(Et);else{Mt.indexOf(Et)===-1&&Mt.push(Et);var zt=bt.indexOf(xt.poly);zt!==-1&&bt.splice(zt,1)}}for(var Nt=0,Ft=bt.length;Nt<Ft;Nt++){var Xt=bt[Nt].multiPoly;j.indexOf(Xt)===-1&&j.push(Xt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var d=this.beforeState().multiPolys,v=this.afterState().multiPolys;switch(te.type){case"union":var O=d.length===0,j=v.length===0;this._isInResult=O!==j;break;case"intersection":var G,Q;d.length<v.length?(G=d.length,Q=v.length):(G=v.length,Q=d.length),this._isInResult=Q===te.numMultiPolys&&G<Q;break;case"xor":var et=Math.abs(d.length-v.length);this._isInResult=et%2==1;break;case"difference":var tt=function(pt){return pt.length===1&&pt[0].isSubject};this._isInResult=tt(d)!==tt(v);break;default:throw new Error("Unrecognized operation type found ".concat(te.type))}return this._isInResult}}],[{key:"fromRing",value:function(d,v,O){var j,G,Q,et=st.comparePoints(d,v);if(et<0)j=d,G=v,Q=1;else{if(!(et>0))throw new Error("Tried to create degenerate segment at [".concat(d.x,", ").concat(d.y,"]"));j=v,G=d,Q=-1}return new H(new st(j,!0),new st(G,!1),[O],[Q])}}]),H}(),jt=function(){function H(d,v,O){if(c(this,H),!Array.isArray(d)||d.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=v,this.isExterior=O,this.segments=[],typeof d[0][0]!="number"||typeof d[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var j=gt.round(d[0][0],d[0][1]);this.bbox={ll:{x:j.x,y:j.y},ur:{x:j.x,y:j.y}};for(var G=j,Q=1,et=d.length;Q<et;Q++){if(typeof d[Q][0]!="number"||typeof d[Q][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var tt=gt.round(d[Q][0],d[Q][1]);tt.x===G.x&&tt.y===G.y||(this.segments.push(wt.fromRing(G,tt,this)),tt.x<this.bbox.ll.x&&(this.bbox.ll.x=tt.x),tt.y<this.bbox.ll.y&&(this.bbox.ll.y=tt.y),tt.x>this.bbox.ur.x&&(this.bbox.ur.x=tt.x),tt.y>this.bbox.ur.y&&(this.bbox.ur.y=tt.y),G=tt)}j.x===G.x&&j.y===G.y||this.segments.push(wt.fromRing(G,j,this))}return _(H,[{key:"getSweepEvents",value:function(){for(var d=[],v=0,O=this.segments.length;v<O;v++){var j=this.segments[v];d.push(j.leftSE),d.push(j.rightSE)}return d}}]),H}(),ae=function(){function H(d,v){if(c(this,H),!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new jt(d[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var O=1,j=d.length;O<j;O++){var G=new jt(d[O],this,!1);G.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=G.bbox.ll.x),G.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=G.bbox.ll.y),G.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=G.bbox.ur.x),G.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=G.bbox.ur.y),this.interiorRings.push(G)}this.multiPoly=v}return _(H,[{key:"getSweepEvents",value:function(){for(var d=this.exteriorRing.getSweepEvents(),v=0,O=this.interiorRings.length;v<O;v++)for(var j=this.interiorRings[v].getSweepEvents(),G=0,Q=j.length;G<Q;G++)d.push(j[G]);return d}}]),H}(),Ut=function(){function H(d,v){if(c(this,H),!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof d[0][0][0]=="number"&&(d=[d])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var O=0,j=d.length;O<j;O++){var G=new ae(d[O],this);G.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=G.bbox.ll.x),G.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=G.bbox.ll.y),G.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=G.bbox.ur.x),G.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=G.bbox.ur.y),this.polys.push(G)}this.isSubject=v}return _(H,[{key:"getSweepEvents",value:function(){for(var d=[],v=0,O=this.polys.length;v<O;v++)for(var j=this.polys[v].getSweepEvents(),G=0,Q=j.length;G<Q;G++)d.push(j[G]);return d}}]),H}(),Gt=function(){function H(d){c(this,H),this.events=d;for(var v=0,O=d.length;v<O;v++)d[v].segment.ringOut=this;this.poly=null}return _(H,null,[{key:"factory",value:function(d){for(var v=[],O=0,j=d.length;O<j;O++){var G=d[O];if(G.isInResult()&&!G.ringOut){for(var Q=null,et=G.leftSE,tt=G.rightSE,pt=[et],bt=et.point,Mt=[];Q=et,et=tt,pt.push(et),et.point!==bt;)for(;;){var Lt=et.getAvailableLinkedEvents();if(Lt.length===0){var Vt=pt[0].point,xt=pt[pt.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(Vt.x,",")+" ".concat(Vt.y,"]. Last matching segment found ends at")+" [".concat(xt.x,", ").concat(xt.y,"]."))}if(Lt.length===1){tt=Lt[0].otherSE;break}for(var Et=null,zt=0,Nt=Mt.length;zt<Nt;zt++)if(Mt[zt].point===et.point){Et=zt;break}if(Et===null){Mt.push({index:pt.length,point:et.point});var Ft=et.getLeftmostComparator(Q);tt=Lt.sort(Ft)[0].otherSE;break}var Xt=Mt.splice(Et)[0],Jt=pt.splice(Xt.index);Jt.unshift(Jt[0].otherSE),v.push(new H(Jt.reverse()))}v.push(new H(pt))}}return v}}]),_(H,[{key:"getGeom",value:function(){for(var d=this.events[0].point,v=[d],O=1,j=this.events.length-1;O<j;O++){var G=this.events[O].point,Q=this.events[O+1].point;It(G,d,Q)!==0&&(v.push(G),d=G)}if(v.length===1)return null;var et=v[0],tt=v[1];It(et,d,tt)===0&&v.shift(),v.push(v[0]);for(var pt=this.isExteriorRing()?1:-1,bt=this.isExteriorRing()?0:v.length-1,Mt=this.isExteriorRing()?v.length:-1,Lt=[],Vt=bt;Vt!=Mt;Vt+=pt)Lt.push([v[Vt].x,v[Vt].y]);return Lt}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var d=this.enclosingRing();this._isExteriorRing=!d||!d.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var d=this.events[0],v=1,O=this.events.length;v<O;v++){var j=this.events[v];st.compare(d,j)>0&&(d=j)}for(var G=d.segment.prevInResult(),Q=G?G.prevInResult():null;;){if(!G)return null;if(!Q)return G.ringOut;if(Q.ringOut!==G.ringOut)return Q.ringOut.enclosingRing()!==G.ringOut?G.ringOut:G.ringOut.enclosingRing();G=Q.prevInResult(),Q=G?G.prevInResult():null}}}]),H}(),Rt=function(){function H(d){c(this,H),this.exteriorRing=d,d.poly=this,this.interiorRings=[]}return _(H,[{key:"addInterior",value:function(d){this.interiorRings.push(d),d.poly=this}},{key:"getGeom",value:function(){var d=[this.exteriorRing.getGeom()];if(d[0]===null)return null;for(var v=0,O=this.interiorRings.length;v<O;v++){var j=this.interiorRings[v].getGeom();j!==null&&d.push(j)}return d}}]),H}(),Zt=function(){function H(d){c(this,H),this.rings=d,this.polys=this._composePolys(d)}return _(H,[{key:"getGeom",value:function(){for(var d=[],v=0,O=this.polys.length;v<O;v++){var j=this.polys[v].getGeom();j!==null&&d.push(j)}return d}},{key:"_composePolys",value:function(d){for(var v=[],O=0,j=d.length;O<j;O++){var G=d[O];if(!G.poly)if(G.isExteriorRing())v.push(new Rt(G));else{var Q=G.enclosingRing();Q.poly||v.push(new Rt(Q)),Q.poly.addInterior(G)}}return v}}]),H}(),pe=function(){function H(d){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wt.compare;c(this,H),this.queue=d,this.tree=new N(v),this.segments=[]}return _(H,[{key:"process",value:function(d){var v=d.segment,O=[];if(d.consumedBy)return d.isLeft?this.queue.remove(d.otherSE):this.tree.remove(v),O;var j=d.isLeft?this.tree.insert(v):this.tree.find(v);if(!j)throw new Error("Unable to find segment #".concat(v.id," ")+"[".concat(v.leftSE.point.x,", ").concat(v.leftSE.point.y,"] -> ")+"[".concat(v.rightSE.point.x,", ").concat(v.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var G=j,Q=j,et=void 0,tt=void 0;et===void 0;)(G=this.tree.prev(G))===null?et=null:G.key.consumedBy===void 0&&(et=G.key);for(;tt===void 0;)(Q=this.tree.next(Q))===null?tt=null:Q.key.consumedBy===void 0&&(tt=Q.key);if(d.isLeft){var pt=null;if(et){var bt=et.getIntersection(v);if(bt!==null&&(v.isAnEndpoint(bt)||(pt=bt),!et.isAnEndpoint(bt)))for(var Mt=this._splitSafely(et,bt),Lt=0,Vt=Mt.length;Lt<Vt;Lt++)O.push(Mt[Lt])}var xt=null;if(tt){var Et=tt.getIntersection(v);if(Et!==null&&(v.isAnEndpoint(Et)||(xt=Et),!tt.isAnEndpoint(Et)))for(var zt=this._splitSafely(tt,Et),Nt=0,Ft=zt.length;Nt<Ft;Nt++)O.push(zt[Nt])}if(pt!==null||xt!==null){var Xt=null;Xt=pt===null?xt:xt===null||st.comparePoints(pt,xt)<=0?pt:xt,this.queue.remove(v.rightSE),O.push(v.rightSE);for(var Jt=v.split(Xt),me=0,_e=Jt.length;me<_e;me++)O.push(Jt[me])}O.length>0?(this.tree.remove(v),O.push(d)):(this.segments.push(v),v.prev=et)}else{if(et&&tt){var re=et.getIntersection(tt);if(re!==null){if(!et.isAnEndpoint(re))for(var ee=this._splitSafely(et,re),Ht=0,ie=ee.length;Ht<ie;Ht++)O.push(ee[Ht]);if(!tt.isAnEndpoint(re))for(var Ve=this._splitSafely(tt,re),Se=0,se=Ve.length;Se<se;Se++)O.push(Ve[Se])}}this.tree.remove(v)}return O}},{key:"_splitSafely",value:function(d,v){this.tree.remove(d);var O=d.rightSE;this.queue.remove(O);var j=d.split(v);return j.push(O),d.consumedBy===void 0&&this.tree.insert(d),j}}]),H}(),ke=f!==void 0&&f.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Ci=f!==void 0&&f.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,te=new(function(){function H(){c(this,H)}return _(H,[{key:"run",value:function(d,v,O){te.type=d,gt.reset();for(var j=[new Ut(v,!0)],G=0,Q=O.length;G<Q;G++)j.push(new Ut(O[G],!1));if(te.numMultiPolys=j.length,te.type==="difference")for(var et=j[0],tt=1;tt<j.length;)q(j[tt].bbox,et.bbox)!==null?tt++:j.splice(tt,1);if(te.type==="intersection"){for(var pt=0,bt=j.length;pt<bt;pt++)for(var Mt=j[pt],Lt=pt+1,Vt=j.length;Lt<Vt;Lt++)if(q(Mt.bbox,j[Lt].bbox)===null)return[]}for(var xt=new N(st.compare),Et=0,zt=j.length;Et<zt;Et++)for(var Nt=j[Et].getSweepEvents(),Ft=0,Xt=Nt.length;Ft<Xt;Ft++)if(xt.insert(Nt[Ft]),xt.size>ke)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Jt=new pe(xt),me=xt.size,_e=xt.pop();_e;){var re=_e.key;if(xt.size===me){var ee=re.segment;throw new Error("Unable to pop() ".concat(re.isLeft?"left":"right"," SweepEvent ")+"[".concat(re.point.x,", ").concat(re.point.y,"] from segment #").concat(ee.id," ")+"[".concat(ee.leftSE.point.x,", ").concat(ee.leftSE.point.y,"] -> ")+"[".concat(ee.rightSE.point.x,", ").concat(ee.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(xt.size>ke)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Jt.segments.length>Ci)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var Ht=Jt.process(re),ie=0,Ve=Ht.length;ie<Ve;ie++){var Se=Ht[ie];Se.consumedBy===void 0&&xt.insert(Se)}me=xt.size,_e=xt.pop()}gt.reset();var se=Gt.factory(Jt.segments);return new Zt(se).getGeom()}}]),H}());return{union:function(H){for(var d=arguments.length,v=new Array(d>1?d-1:0),O=1;O<d;O++)v[O-1]=arguments[O];return te.run("union",H,v)},intersection:function(H){for(var d=arguments.length,v=new Array(d>1?d-1:0),O=1;O<d;O++)v[O-1]=arguments[O];return te.run("intersection",H,v)},xor:function(H){for(var d=arguments.length,v=new Array(d>1?d-1:0),O=1;O<d;O++)v[O-1]=arguments[O];return te.run("xor",H,v)},difference:function(H){for(var d=arguments.length,v=new Array(d>1?d-1:0),O=1;O<d;O++)v[O-1]=arguments[O];return te.run("difference",H,v)}}}()}).call(this,l(152))},function(m,k,l){var f=l(17)(l(4),"Map");m.exports=f},function(m,k,l){(function(f){var c=typeof f=="object"&&f&&f.Object===Object&&f;m.exports=c}).call(this,l(83))},function(m,k,l){var f=l(90),c=l(97),y=l(99),_=l(100),P=l(101);function B(I){var Z=-1,E=I==null?0:I.length;for(this.clear();++Z<E;){var T=I[Z];this.set(T[0],T[1])}}B.prototype.clear=f,B.prototype.delete=c,B.prototype.get=y,B.prototype.has=_,B.prototype.set=P,m.exports=B},function(m,k,l){var f=l(20),c=l(13);m.exports=function(y,_,P){(P!==void 0&&!c(y[_],P)||P===void 0&&!(_ in y))&&f(y,_,P)}},function(m,k,l){var f=l(17),c=function(){try{var y=f(Object,"defineProperty");return y({},"",{}),y}catch{}}();m.exports=c},function(m,k,l){var f=l(112)(Object.getPrototypeOf,Object);m.exports=f},function(m,k){var l=Object.prototype;m.exports=function(f){var c=f&&f.constructor;return f===(typeof c=="function"&&c.prototype||l)}},function(m,k,l){(function(f){var c=l(4),y=l(115),_=k&&!k.nodeType&&k,P=_&&typeof f=="object"&&f&&!f.nodeType&&f,B=P&&P.exports===_?c.Buffer:void 0,I=(B?B.isBuffer:void 0)||y;f.exports=I}).call(this,l(21)(m))},function(m,k,l){var f=l(117),c=l(118),y=l(119),_=y&&y.isTypedArray,P=_?c(_):f;m.exports=P},function(m,k){m.exports=function(l,f){if((f!=="constructor"||typeof l[f]!="function")&&f!="__proto__")return l[f]}},function(m,k,l){var f=l(123),c=l(125),y=l(23);m.exports=function(_){return y(_)?f(_,!0):c(_)}},function(m,k){m.exports=function(l){return l}},function(m,k,l){var f=l(6),c=l(137),y=l(138),_=l(141);m.exports=function(P,B){return f(P)?P:c(P,B)?[P]:y(_(P))}},function(m,k,l){var f=l(26);m.exports=function(c){if(typeof c=="string"||f(c))return c;var y=c+"";return y=="0"&&1/c==-1/0?"-0":y}},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(16);k.default=function(c){var y=[1/0,1/0,-1/0,-1/0];return f.coordEach(c,function(_){y[0]>_[0]&&(y[0]=_[0]),y[1]>_[1]&&(y[1]=_[1]),y[2]<_[0]&&(y[2]=_[0]),y[3]<_[1]&&(y[3]=_[1])}),y}},function(m){m.exports=JSON.parse(`{"name":"@geoman-io/leaflet-geoman-free","version":"2.11.3","description":"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0","keywords":["leaflet","geoman","polygon management","geometry editing","map data","map overlay","polygon","geojson","leaflet-draw","data-field-geojson","ui-leaflet-draw"],"files":["dist"],"main":"dist/leaflet-geoman.min.js","types":"dist/leaflet-geoman.d.ts","dependencies":{"@turf/boolean-contains":"6.3.0","@turf/kinks":"6.3.0","@turf/line-intersect":"6.3.0","@turf/line-split":"6.3.0","lodash":"4.17.21","polygon-clipping":"0.15.3"},"devDependencies":{"@babel/core":"7.14.0","@babel/preset-env":"7.14.1","@types/leaflet":"^1.7.0","babel-loader":"8.2.2","copy-webpack-plugin":"8.1.1","css-loader":"5.2.4","cypress":"6.9.1","cypress-wait-until":"1.7.1","eslint":"7.26.0","eslint-config-airbnb-base":"14.2.1","eslint-config-prettier":"8.3.0","eslint-plugin-cypress":"2.11.3","eslint-plugin-import":"2.22.1","file-loader":"6.2.0","leaflet":"1.7.1","mini-css-extract-plugin":"1.6.0","prettier":"2.2.1","prosthetic-hand":"1.3.1","terser-webpack-plugin":"^5.1.2","url-loader":"4.1.1","webpack":"5.36.2","webpack-cli":"4.7.0"},"peerDependencies":{"leaflet":"^1.2.0"},"scripts":{"start":"npm run dev","dev":"./node_modules/.bin/webpack --config=webpack.dev.js","test":"./node_modules/.bin/cypress run","cypress":"./node_modules/.bin/cypress open","build":"./node_modules/.bin/webpack --config=webpack.build.js","prepare":"npm run build","eslint-check":"eslint --print-config . | eslint-config-prettier-check","eslint":"eslint src/ --fix","prettier":"prettier --write '{src,cypress}/**/*.{js,css}'","lint":"npm run eslint && npm run prettier"},"repository":{"type":"git","url":"git://github.com/geoman-io/leaflet-geoman.git"},"author":{"name":"Sumit Kumar","email":"sumit@geoman.io","url":"http://geoman.io/leaflet-geoman"},"license":"MIT","bugs":{"url":"https://github.com/geoman-io/leaflet-geoman/issues"},"homepage":"https://geoman.io/leaflet-geoman","prettier":{"trailingComma":"es5","tabWidth":2,"semi":true,"singleQuote":true}}`)},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex l\xF6schen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer l\xF6schen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verkn\xFCpfen","rotateButton":"Layer drehen"}}')},function(m){m.exports=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`)},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Adaug\u0103 un punct","firstVertex":"Apas\u0103 aici pentru a ad\u0103uga primul Vertex","continueLine":"Apas\u0103 aici pentru a continua desenul","finishLine":"Apas\u0103 pe orice obiect pentru a finisa desenul","finishPoly":"Apas\u0103 pe primul obiect pentru a finisa","finishRect":"Apas\u0103 pentru a finisa","startCircle":"Apas\u0103 pentru a desena un cerc","finishCircle":"Apas\u0103 pentru a finisa un cerc","placeCircleMarker":"Adaug\u0103 un punct"},"actions":{"finish":"Termin\u0103","cancel":"Anuleaz\u0103","removeLastVertex":"\u0218terge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaug\u0103 o bulin\u0103","drawPolyButton":"Deseneaz\u0103 un poligon","drawLineButton":"Deseneaz\u0103 o linie","drawCircleButton":"Deseneaz\u0103 un cerc","drawRectButton":"Deseneaz\u0103 un dreptunghi","editButton":"Editeaz\u0103 straturile","dragButton":"Mut\u0103 straturile","cutButton":"Taie straturile","deleteButton":"\u0218terge straturile","drawCircleMarkerButton":"Deseneaz\u0103 marcatorul cercului","snappingButton":"Fixa\u021Bi marcatorul glisat pe alte straturi \u0219i v\xE2rfuri","pinningButton":"Fixa\u021Bi v\xE2rfurile partajate \xEEmpreun\u0103"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0432\u044B\u0439 \u043E\u0431\u044A\u0435\u043A\u0442","continueLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u0440\u0438\u0441\u043E\u0432\u0430\u043D\u0438\u0435","finishLine":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0439 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u0438\u044F","finishPoly":"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043F\u0435\u0440\u0432\u0443\u044E \u0442\u043E\u0447\u043A\u0443, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","finishRect":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u043A\u043E\u043D\u0447\u0438\u0442\u044C","startCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0446\u0435\u043D\u0442\u0440 \u043A\u0440\u0443\u0433\u0430","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C","cancel":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C","removeLastVertex":"\u041E\u0442\u043C\u0435\u043D\u0438\u0442\u044C \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435"},"buttonTitles":{"drawMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u043E\u043B\u0438\u0433\u043E\u043D","drawLineButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0438\u0432\u0443\u044E","drawCircleButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043A\u0440\u0443\u0433","drawRectButton":"\u0420\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u044F\u043C\u043E\u0443\u0433\u043E\u043B\u044C\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043B\u043E\u0439","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0441\u043B\u043E\u0439","cutButton":"\u0412\u044B\u0440\u0435\u0437\u0430\u0442\u044C \u0441\u043B\u043E\u0439","deleteButton":"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0441\u043B\u043E\u0439","drawCircleMarkerButton":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u0440\u0443\u0433\u043E\u0432\u043E\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u044F\u0437\u0430\u0442\u044C \u043F\u0435\u0440\u0435\u0442\u0430\u0441\u043A\u0438\u0432\u0430\u0435\u043C\u044B\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u043A \u0434\u0440\u0443\u0433\u0438\u043C \u0441\u043B\u043E\u044F\u043C \u0438 \u0432\u0435\u0440\u0448\u0438\u043D\u0430\u043C","pinningButton":"\u0421\u0432\u044F\u0437\u0430\u0442\u044C \u043E\u0431\u0449\u0438\u0435 \u0442\u043E\u0447\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u0435"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer v\xE9rtice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del circulo","finishCircle":"Presiona para finalizar el circulo","placeCircleMarker":"Presiona para colocar un marcador de circulo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ultimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Pol\xEDgono","drawLineButton":"Dibujar L\xEDnea","drawCircleButton":"Dibujar Circulo","drawRectButton":"Dibujar Rect\xE1ngulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Remover Capas","drawCircleMarkerButton":"Dibujar Marcador de Circulo","snappingButton":"El marcador de Snap arrastrado a otras capas y v\xE9rtices","pinningButton":"Fijar juntos los v\xE9rtices compartidos"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te be\xEBindigen","finishPoly":"Klik op het eerst punt om te be\xEBindigen","finishRect":"Klik om te be\xEBindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te be\xEBindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}')},function(m){m.exports=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer \xE0 dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"\xC9diter des calques","dragButton":"D\xE9placer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"\xC9pingler ensemble les sommets partag\xE9s","rotateButton":"Tourner des calques"}}`)},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"\u5355\u51FB\u653E\u7F6E\u6807\u8BB0","firstVertex":"\u5355\u51FB\u653E\u7F6E\u9996\u4E2A\u9876\u70B9","continueLine":"\u5355\u51FB\u7EE7\u7EED\u7ED8\u5236","finishLine":"\u5355\u51FB\u4EFB\u4F55\u5B58\u5728\u7684\u6807\u8BB0\u4EE5\u5B8C\u6210","finishPoly":"\u5355\u51FB\u7B2C\u4E00\u4E2A\u6807\u8BB0\u4EE5\u5B8C\u6210","finishRect":"\u5355\u51FB\u5B8C\u6210","startCircle":"\u5355\u51FB\u653E\u7F6E\u5706\u5FC3","finishCircle":"\u5355\u51FB\u5B8C\u6210\u5706\u5F62","placeCircleMarker":"\u70B9\u51FB\u653E\u7F6E\u5706\u5F62\u6807\u8BB0"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u540E\u7684\u9876\u70B9"},"buttonTitles":{"drawMarkerButton":"\u7ED8\u5236\u6807\u8BB0","drawPolyButton":"\u7ED8\u5236\u591A\u8FB9\u5F62","drawLineButton":"\u7ED8\u5236\u7EBF\u6BB5","drawCircleButton":"\u7ED8\u5236\u5706\u5F62","drawRectButton":"\u7ED8\u5236\u957F\u65B9\u5F62","editButton":"\u7F16\u8F91\u56FE\u5C42","dragButton":"\u62D6\u62FD\u56FE\u5C42","cutButton":"\u526A\u5207\u56FE\u5C42","deleteButton":"\u5220\u9664\u56FE\u5C42","drawCircleMarkerButton":"\u753B\u5706\u5708\u6807\u8BB0","snappingButton":"\u5C06\u62D6\u52A8\u7684\u6807\u8BB0\u6355\u6349\u5230\u5176\u4ED6\u56FE\u5C42\u548C\u9876\u70B9","pinningButton":"\u5C06\u5171\u4EAB\u9876\u70B9\u56FA\u5B9A\u5728\u4E00\u8D77"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"\u55AE\u64CA\u653E\u7F6E\u6A19\u8A18","firstVertex":"\u55AE\u64CA\u653E\u7F6E\u7B2C\u4E00\u500B\u9802\u9EDE","continueLine":"\u55AE\u64CA\u7E7C\u7E8C\u7E6A\u88FD","finishLine":"\u55AE\u64CA\u4EFB\u4F55\u5B58\u5728\u7684\u6A19\u8A18\u4EE5\u5B8C\u6210","finishPoly":"\u55AE\u64CA\u7B2C\u4E00\u500B\u6A19\u8A18\u4EE5\u5B8C\u6210","finishRect":"\u55AE\u64CA\u5B8C\u6210","startCircle":"\u55AE\u64CA\u653E\u7F6E\u5713\u5FC3","finishCircle":"\u55AE\u64CA\u5B8C\u6210\u5713\u5F62","placeCircleMarker":"\u9EDE\u64CA\u653E\u7F6E\u5713\u5F62\u6A19\u8A18"},"actions":{"finish":"\u5B8C\u6210","cancel":"\u53D6\u6D88","removeLastVertex":"\u79FB\u9664\u6700\u5F8C\u4E00\u500B\u9802\u9EDE"},"buttonTitles":{"drawMarkerButton":"\u653E\u7F6E\u6A19\u8A18","drawPolyButton":"\u7E6A\u88FD\u591A\u908A\u5F62","drawLineButton":"\u7E6A\u88FD\u7DDA\u6BB5","drawCircleButton":"\u7E6A\u88FD\u5713\u5F62","drawRectButton":"\u7E6A\u88FD\u65B9\u5F62","editButton":"\u7DE8\u8F2F\u5716\u5F62","dragButton":"\u79FB\u52D5\u5716\u5F62","cutButton":"\u88C1\u5207\u5716\u5F62","deleteButton":"\u522A\u9664\u5716\u5F62","drawCircleMarkerButton":"\u756B\u5713\u5708\u6A19\u8A18","snappingButton":"\u5C07\u62D6\u52D5\u7684\u6A19\u8A18\u5C0D\u9F4A\u5230\u5176\u4ED6\u5716\u5C64\u548C\u9802\u9EDE","pinningButton":"\u5C07\u5171\u4EAB\u9802\u9EDE\u56FA\u5B9A\u5728\u4E00\u8D77"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro v\xE9rtice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o pol\xEDgono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do c\xEDrculo","finishCircle":"Clique para fechar o c\xEDrculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover \xFAltimo v\xE9rtice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um pol\xEDgono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um c\xEDrculo","drawRectButton":"Desenhar um ret\xE2ngulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de c\xEDrculos de desenho","snappingButton":"Marcador arrastado para outras camadas e v\xE9rtices","pinningButton":"V\xE9rtices compartilhados de pinos juntos"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawi\u0107 znacznik","firstVertex":"Kliknij, aby ustawi\u0107 pierwszy punkt","continueLine":"Kliknij, aby kontynuowa\u0107 rysowanie","finishLine":"Kliknij dowolny punkt, aby zako\u0144czy\u0107","finishPoly":"Kliknij pierwszy punkt, aby zako\u0144czy\u0107","finishRect":"Kliknij, aby zako\u0144czy\u0107","startCircle":"Kliknij, aby ustawi\u0107 \u015Brodek ko\u0142a","finishCircle":"Kliknij, aby zako\u0144czy\u0107 rysowanie ko\u0142a","placeCircleMarker":"Kliknij, aby ustawi\u0107 okr\u0105g\u0142y znacznik"},"actions":{"finish":"Zako\u0144cz","cancel":"Anuluj","removeLastVertex":"Usu\u0144 ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielok\u0105t","drawLineButton":"Narysuj \u015Bcie\u017Ck\u0119","drawCircleButton":"Narysuj ko\u0142o","drawRectButton":"Narysuj prostok\u0105t","editButton":"Edytuj","dragButton":"Przesu\u0144","cutButton":"Wytnij","deleteButton":"Usu\u0144","drawCircleMarkerButton":"Narysuj okr\u0105g\u0142y znacznik","snappingButton":"Snap przeci\u0105gni\u0119ty marker na inne warstwy i wierzcho\u0142ki","pinningButton":"Sworze\u0144 wsp\xF3lne wierzcho\u0142ki razem"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Klicka f\xF6r att placera mark\xF6r","firstVertex":"Klicka f\xF6r att placera f\xF6rsta h\xF6rnet","continueLine":"Klicka f\xF6r att forts\xE4tta rita","finishLine":"Klicka p\xE5 en existerande punkt f\xF6r att slutf\xF6ra","finishPoly":"Klicka p\xE5 den f\xF6rsta punkten f\xF6r att slutf\xF6ra","finishRect":"Klicka f\xF6r att slutf\xF6ra","startCircle":"Klicka f\xF6r att placera cirkelns centrum","finishCircle":"Klicka f\xF6r att slutf\xF6ra cirkeln","placeCircleMarker":"Klicka f\xF6r att placera cirkelmark\xF6r"},"actions":{"finish":"Slutf\xF6r","cancel":"Avbryt","removeLastVertex":"Ta bort sista h\xF6rnet"},"buttonTitles":{"drawMarkerButton":"Rita Mark\xF6r","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmark\xF6r","snappingButton":"Sn\xE4pp dra mark\xF6ren till andra lager och h\xF6rn","pinningButton":"F\xE4st delade h\xF6rn tillsammans"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","firstVertex":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF","continueLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C3\u03C5\u03BD\u03B5\u03C7\u03AF\u03C3\u03B5\u03C4\u03B5 \u03BD\u03B1 \u03C3\u03C7\u03B5\u03B4\u03B9\u03AC\u03B6\u03B5\u03C4\u03B5","finishLine":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03B5 \u03BF\u03C0\u03BF\u03B9\u03BF\u03BD\u03B4\u03AE\u03C0\u03BF\u03C4\u03B5 \u03C5\u03C0\u03AC\u03C1\u03C7\u03BF\u03BD \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03C9\u03B8\u03B5\u03AF","finishPoly":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03C3\u03C4\u03BF \u03C0\u03C1\u03CE\u03C4\u03BF \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","finishRect":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03B5\u03BB\u03B5\u03B9\u03CE\u03C3\u03B5\u03C4\u03B5","startCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u03BA\u03AD\u03BD\u03C4\u03C1\u03BF \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","finishCircle":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03BF\u03BB\u03BF\u03BA\u03BB\u03B7\u03C1\u03CE\u03C3\u03B5\u03C4\u03B5 \u03C4\u03BF\u03BD \u039A\u03CD\u03BA\u03BB\u03BF","placeCircleMarker":"\u039A\u03AC\u03BD\u03C4\u03B5 \u03BA\u03BB\u03B9\u03BA \u03B3\u03B9\u03B1 \u03BD\u03B1 \u03C4\u03BF\u03C0\u03BF\u03B8\u03B5\u03C4\u03AE\u03C3\u03B5\u03C4\u03B5 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03CC \u0394\u03B5\u03AF\u03BA\u03C4\u03B7"},"actions":{"finish":"\u03A4\u03AD\u03BB\u03BF\u03C2","cancel":"\u0391\u03BA\u03CD\u03C1\u03C9\u03C3\u03B7","removeLastVertex":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u03C4\u03B5\u03BB\u03B5\u03C5\u03C4\u03B1\u03AF\u03BF\u03C5 \u03C3\u03B7\u03BC\u03B5\u03AF\u03BF\u03C5"},"buttonTitles":{"drawMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","drawPolyButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u03A0\u03BF\u03BB\u03C5\u03B3\u03CE\u03BD\u03BF\u03C5","drawLineButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u0393\u03C1\u03B1\u03BC\u03BC\u03AE\u03C2","drawCircleButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03CD\u03BA\u03BB\u03BF\u03C5","drawRectButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039F\u03C1\u03B8\u03BF\u03B3\u03C9\u03BD\u03AF\u03BF\u03C5","editButton":"\u0395\u03C0\u03B5\u03BE\u03B5\u03C1\u03B3\u03B1\u03C3\u03AF\u03B1 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","dragButton":"\u039C\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","cutButton":"\u0391\u03C0\u03BF\u03BA\u03BF\u03C0\u03AE \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","deleteButton":"\u039A\u03B1\u03C4\u03AC\u03C1\u03B3\u03B7\u03C3\u03B7 \u0395\u03C0\u03B9\u03C0\u03AD\u03B4\u03C9\u03BD","drawCircleMarkerButton":"\u03A3\u03C7\u03B5\u03B4\u03AF\u03B1\u03C3\u03B7 \u039A\u03C5\u03BA\u03BB\u03B9\u03BA\u03BF\u03CD \u0394\u03B5\u03AF\u03BA\u03C4\u03B7","snappingButton":"\u03A0\u03C1\u03BF\u03C3\u03BA\u03CC\u03BB\u03BB\u03B7\u03C3\u03B7 \u03C4\u03BF\u03C5 \u0394\u03B5\u03AF\u03BA\u03C4\u03B7 \u03BC\u03B5\u03C4\u03B1\u03C6\u03BF\u03C1\u03AC\u03C2 \u03C3\u03B5 \u03AC\u03BB\u03BB\u03B1 \u0395\u03C0\u03AF\u03C0\u03B5\u03B4\u03B1 \u03BA\u03B1\u03B9 \u039A\u03BF\u03C1\u03C5\u03C6\u03AD\u03C2","pinningButton":"\u03A0\u03B5\u03C1\u03B9\u03BA\u03BF\u03C0\u03AE \u03BA\u03BF\u03B9\u03BD\u03CE\u03BD \u03BA\u03BF\u03C1\u03C5\u03C6\u03CE\u03BD \u03BC\u03B1\u03B6\u03AF"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jel\xF6l\u0151 elhelyez\xE9s\xE9hez","firstVertex":"Kattintson az els\u0151 pont elhelyez\xE9s\xE9hez","continueLine":"Kattintson a k\xF6vetkez\u0151 pont elhelyez\xE9s\xE9hez","finishLine":"A befejez\xE9shez kattintson egy megl\xE9v\u0151 pontra","finishPoly":"A befejez\xE9shez kattintson az els\u0151 pontra","finishRect":"Kattintson a befejez\xE9shez","startCircle":"Kattintson a k\xF6r k\xF6z\xE9ppontj\xE1nak elhelyez\xE9s\xE9hez","finishCircle":"Kattintson a k\xF6r befejez\xE9s\xE9hez","placeCircleMarker":"Kattintson a k\xF6rjel\xF6l\u0151 elhelyez\xE9s\xE9hez"},"actions":{"finish":"Befejez\xE9s","cancel":"M\xE9gse","removeLastVertex":"Utols\xF3 pont elt\xE1vol\xEDt\xE1sa"},"buttonTitles":{"drawMarkerButton":"Jel\xF6l\u0151 rajzol\xE1sa","drawPolyButton":"Poligon rajzol\xE1sa","drawLineButton":"Vonal rajzol\xE1sa","drawCircleButton":"K\xF6r rajzol\xE1sa","drawRectButton":"N\xE9gyzet rajzol\xE1sa","editButton":"Elemek szerkeszt\xE9se","dragButton":"Elemek mozgat\xE1sa","cutButton":"Elemek v\xE1g\xE1sa","deleteButton":"Elemek t\xF6rl\xE9se","drawCircleMarkerButton":"K\xF6r jel\xF6l\u0151 rajzol\xE1sa","snappingButton":"Kapcsolja a jel\xF6lt\u0151t m\xE1sik elemhez vagy ponthoz","pinningButton":"K\xF6z\xF6s pontok \xF6sszek\xF6t\xE9se"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en mark\xF8r","firstVertex":"Tryk for at placere det f\xF8rste punkt","continueLine":"Tryk for at forts\xE6tte linjen","finishLine":"Tryk p\xE5 et eksisterende punkt for at afslutte","finishPoly":"Tryk p\xE5 det f\xF8rste punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmark\xF8r"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer mark\xF8r","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Tr\xE6k","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmark\xF8r","snappingButton":"Fastg\xF8r trukket mark\xF8r til andre elementer","pinningButton":"Sammenl\xE6g delte elementer"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Klikk for \xE5 plassere punkt","firstVertex":"Klikk for \xE5 plassere f\xF8rste punkt","continueLine":"Klikk for \xE5 tegne videre","finishLine":"Klikk p\xE5 et eksisterende punkt for \xE5 fullf\xF8re","finishPoly":"Klikk f\xF8rste punkt for \xE5 fullf\xF8re","finishRect":"Klikk for \xE5 fullf\xF8re","startCircle":"Klikk for \xE5 sette sirkel midtpunkt","finishCircle":"Klikk for \xE5 fullf\xF8re sirkel","placeCircleMarker":"Klikk for \xE5 plassere sirkel"},"actions":{"finish":"Fullf\xF8r","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u062C\u0627\u0646\u0645\u0627\u06CC\u06CC \u0646\u0634\u0627\u0646","firstVertex":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0627\u0648\u0644\u06CC\u0646 \u0631\u0623\u0633","continueLine":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647 \u0631\u0633\u0645","finishLine":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0647\u0631 \u0646\u0634\u0627\u0646 \u0645\u0648\u062C\u0648\u062F \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishPoly":"\u06A9\u0644\u06CC\u06A9 \u0631\u0648\u06CC \u0627\u0648\u0644\u06CC\u0646 \u0646\u0634\u0627\u0646 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","finishRect":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646","startCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0645\u0631\u06A9\u0632 \u062F\u0627\u06CC\u0631\u0647","finishCircle":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u067E\u0627\u06CC\u0627\u0646 \u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","placeCircleMarker":"\u06A9\u0644\u06CC\u06A9 \u0628\u0631\u0627\u06CC \u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647"},"actions":{"finish":"\u067E\u0627\u06CC\u0627\u0646","cancel":"\u0644\u0641\u0648","removeLastVertex":"\u062D\u0630\u0641 \u0622\u062E\u0631\u06CC\u0646 \u0631\u0623\u0633"},"buttonTitles":{"drawMarkerButton":"\u062F\u0631\u062C \u0646\u0634\u0627\u0646","drawPolyButton":"\u0631\u0633\u0645 \u0686\u0646\u062F\u0636\u0644\u0639\u06CC","drawLineButton":"\u0631\u0633\u0645 \u062E\u0637","drawCircleButton":"\u0631\u0633\u0645 \u062F\u0627\u06CC\u0631\u0647","drawRectButton":"\u0631\u0633\u0645 \u0686\u0647\u0627\u0631\u0636\u0644\u0639\u06CC","editButton":"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","dragButton":"\u062C\u0627\u0628\u062C\u0627\u06CC\u06CC \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","cutButton":"\u0628\u0631\u0634 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","deleteButton":"\u062D\u0630\u0641 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627","drawCircleMarkerButton":"\u0631\u0633\u0645 \u0646\u0634\u0627\u0646 \u062F\u0627\u06CC\u0631\u0647","snappingButton":"\u0646\u0634\u0627\u0646\u06AF\u0631 \u0631\u0627 \u0628\u0647 \u0644\u0627\u06CC\u0647\u200C\u0647\u0627 \u0648 \u0631\u0626\u0648\u0633 \u062F\u06CC\u06AF\u0631 \u0628\u06A9\u0634\u06CC\u062F","pinningButton":"\u0631\u0626\u0648\u0633 \u0645\u0634\u062A\u0631\u06A9 \u0631\u0627 \u0628\u0627 \u0647\u0645 \u067E\u06CC\u0646 \u06A9\u0646\u06CC\u062F","rotateButton":"\u0686\u0631\u062E\u0634 \u0644\u0627\u06CC\u0647"}}')},function(m){m.exports=JSON.parse(`{"tooltips":{"placeMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","firstVertex":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043F\u0435\u0440\u0448\u0443 \u0432\u0435\u0440\u0448\u0438\u043D\u0443","continueLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 \u043C\u0430\u043B\u044E\u0432\u0430\u0442\u0438","finishLine":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C \u0431\u0443\u0434\u044C-\u044F\u043A\u0438\u0439 \u0456\u0441\u043D\u0443\u044E\u0447\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043B\u044F \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043D\u044F","finishPoly":"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u043F\u0435\u0440\u0448\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","finishRect":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","startCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0434\u043E\u0434\u0430\u0442\u0438 \u0446\u0435\u043D\u0442\u0440 \u043A\u043E\u043B\u0430","finishCircle":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438 \u043A\u043E\u043B\u043E","placeCircleMarker":"\u041D\u0430\u0442\u0438\u0441\u043D\u0456\u0442\u044C, \u0449\u043E\u0431 \u043D\u0430\u043D\u0435\u0441\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440"},"actions":{"finish":"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0438","cancel":"\u0412\u0456\u0434\u043C\u0456\u043D\u0438\u0442\u0438","removeLastVertex":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u043F\u043E\u043F\u0435\u0440\u0435\u0434\u043D\u044E \u0432\u0435\u0440\u0448\u0438\u043D\u0443"},"buttonTitles":{"drawMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043C\u0430\u0440\u043A\u0435\u0440","drawPolyButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u043E\u043B\u0456\u0433\u043E\u043D","drawLineButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0438\u0432\u0443","drawCircleButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u043E\u043B\u043E","drawRectButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043F\u0440\u044F\u043C\u043E\u043A\u0443\u0442\u043D\u0438\u043A","editButton":"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","dragButton":"\u041F\u0435\u0440\u0435\u043D\u0435\u0441\u0442\u0438 \u0448\u0430\u0440\u0438","cutButton":"\u0412\u0438\u0440\u0456\u0437\u0430\u0442\u0438 \u0448\u0430\u0440\u0438","deleteButton":"\u0412\u0438\u0434\u0430\u043B\u0438\u0442\u0438 \u0448\u0430\u0440\u0438","drawCircleMarkerButton":"\u041C\u0430\u043B\u044E\u0432\u0430\u0442\u0438 \u043A\u0440\u0443\u0433\u043E\u0432\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440","snappingButton":"\u041F\u0440\u0438\u0432\u2019\u044F\u0437\u0430\u0442\u0438 \u043F\u0435\u0440\u0435\u0442\u044F\u0433\u043D\u0443\u0442\u0438\u0439 \u043C\u0430\u0440\u043A\u0435\u0440 \u0434\u043E \u0456\u043D\u0448\u0438\u0445 \u0448\u0430\u0440\u0456\u0432 \u0442\u0430 \u0432\u0435\u0440\u0448\u0438\u043D","pinningButton":"\u0417\u0432'\u044F\u0437\u0430\u0442\u0438 \u0441\u043F\u0456\u043B\u044C\u043D\u0456 \u0432\u0435\u0440\u0448\u0438\u043D\u0438 \u0440\u0430\u0437\u043E\u043C"}}`)},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"\u0130\u015Faret\xE7i yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","firstVertex":"\u0130lk tepe noktas\u0131n\u0131 yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","continueLine":"\xC7izime devam etmek i\xE7in t\u0131klay\u0131n","finishLine":"Bitirmek i\xE7in mevcut herhangi bir i\u015Faret\xE7iyi t\u0131klay\u0131n","finishPoly":"Bitirmek i\xE7in ilk i\u015Faret\xE7iyi t\u0131klay\u0131n","finishRect":"Bitirmek i\xE7in t\u0131klay\u0131n","startCircle":"Daire merkezine yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n","finishCircle":"Daireyi bitirmek i\xE7in t\u0131klay\u0131n","placeCircleMarker":"Daire i\u015Faret\xE7isi yerle\u015Ftirmek i\xE7in t\u0131klay\u0131n"},"actions":{"finish":"Bitir","cancel":"\u0130ptal","removeLastVertex":"Son k\xF6\u015Feyi kald\u0131r"},"buttonTitles":{"drawMarkerButton":"\xC7izim \u0130\u015Faret\xE7isi","drawPolyButton":"\xC7okgenler \xE7iz","drawLineButton":"\xC7oklu \xE7izgi \xE7iz","drawCircleButton":"\xC7ember \xE7iz","drawRectButton":"Dikd\xF6rtgen \xE7iz","editButton":"Katmanlar\u0131 d\xFCzenle","dragButton":"Katmanlar\u0131 s\xFCr\xFCkle","cutButton":"Katmanlar\u0131 kes","deleteButton":"Katmanlar\u0131 kald\u0131r","drawCircleMarkerButton":"Daire i\u015Faret\xE7isi \xE7iz","snappingButton":"S\xFCr\xFCklenen i\u015Faret\xE7iyi di\u011Fer katmanlara ve k\xF6\u015Felere yap\u0131\u015Ft\u0131r","pinningButton":"Payla\u015F\u0131lan k\xF6\u015Feleri birbirine sabitle"}}')},function(m){m.exports=JSON.parse('{"tooltips":{"placeMarker":"Kliknut\xEDm vytvo\u0159\xEDte zna\u010Dku","firstVertex":"Kliknut\xEDm vytvo\u0159\xEDte prvn\xED objekt","continueLine":"Kliknut\xEDm pokra\u010Dujte v kreslen\xED","finishLine":"Kliknut\xED na libovolnou existuj\xEDc\xED zna\u010Dku pro dokon\u010Den\xED","finishPoly":"Vyberte prvn\xED bod pro dokon\u010Den\xED","finishRect":"Klikn\u011Bte pro dokon\u010Den\xED","startCircle":"Kliknut\xEDm p\u0159idejte st\u0159ed kruhu","finishCircle":"\u041D\u0430\u0436\u043C\u0438\u0442\u0435, \u0447\u0442\u043E\u0431\u044B \u0437\u0430\u0434\u0430\u0442\u044C \u0440\u0430\u0434\u0438\u0443\u0441","placeCircleMarker":"Kliknut\xEDm nastavte polom\u011Br"},"actions":{"finish":"Dokon\u010Dit","cancel":"Zru\u0161it","removeLastVertex":"Zru\u0161it posledn\xED akci"},"buttonTitles":{"drawMarkerButton":"P\u0159idat zna\u010Dku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit k\u0159ivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obd\xE9ln\xEDk","editButton":"Upravit vrstvu","dragButton":"P\u0159eneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"P\u0159idat kruhovou zna\u010Dku","snappingButton":"Nav\xE1zat ta\u017Enou zna\u010Dku k dal\u0161\xEDm vrstv\xE1m a vrchol\u016Fm","pinningButton":"Spojit spole\u010Dn\xE9 body dohromady"}}')},function(m,k,l){var f=l(144),c=l(145);m.exports=function(y,_){return y!=null&&c(y,_,f)}},function(m,k,l){var f=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(k,"__esModule",{value:!0});var c=f(l(42)),y=f(l(150)),_=f(l(151)),P=l(10);function B(C,D){var q,K=!1;for(q=0;q<C.coordinates.length;q++)if(z(C.coordinates[q],D.coordinates)){K=!0;break}return K}function I(C,D){for(var q=0,K=D.coordinates;q<K.length;q++){for(var nt=K[q],J=!1,lt=0,ot=C.coordinates;lt<ot.length;lt++)if(z(nt,ot[lt])){J=!0;break}if(!J)return!1}return!0}function Z(C,D){for(var q=!1,K=0,nt=D.coordinates;K<nt.length;K++){var J=nt[K];if(_.default(J,C,{ignoreEndVertices:!0})&&(q=!0),!_.default(J,C))return!1}return!!q}function E(C,D){for(var q=0,K=D.coordinates;q<K.length;q++){var nt=K[q];if(!y.default(nt,C,{ignoreBoundary:!0}))return!1}return!0}function T(C,D){for(var q=!1,K=0,nt=D.coordinates;K<nt.length;K++){var J=nt[K];if(_.default({type:"Point",coordinates:J},C,{ignoreEndVertices:!0})&&(q=!0),!_.default({type:"Point",coordinates:J},C,{ignoreEndVertices:!1}))return!1}return q}function N(C,D){var q=!1,K=0;if(!R(c.default(C),c.default(D)))return!1;for(;K<D.coordinates.length-1;K++){var nt=M(D.coordinates[K],D.coordinates[K+1]);if(y.default({type:"Point",coordinates:nt},C,{ignoreBoundary:!0})){q=!0;break}}return q}function U(C,D){if(C.type==="Feature"&&C.geometry===null||D.type==="Feature"&&D.geometry===null||!R(c.default(C),c.default(D)))return!1;for(var q=0,K=P.getGeom(D).coordinates;q<K.length;q++)for(var nt=0,J=K[q];nt<J.length;nt++){var lt=J[nt];if(!y.default(lt,C))return!1}return!0}function R(C,D){return!(C[0]>D[0])&&!(C[2]<D[2])&&!(C[1]>D[1])&&!(C[3]<D[3])}function z(C,D){return C[0]===D[0]&&C[1]===D[1]}function M(C,D){return[(C[0]+D[0])/2,(C[1]+D[1])/2]}k.default=function(C,D){var q=P.getGeom(C),K=P.getGeom(D),nt=P.getType(C),J=P.getType(D),lt=P.getCoords(C),ot=P.getCoords(D);switch(nt){case"Point":switch(J){case"Point":return z(lt,ot);default:throw new Error("feature2 "+J+" geometry not supported")}case"MultiPoint":switch(J){case"Point":return B(q,K);case"MultiPoint":return I(q,K);default:throw new Error("feature2 "+J+" geometry not supported")}case"LineString":switch(J){case"Point":return _.default(K,q,{ignoreEndVertices:!0});case"LineString":return T(q,K);case"MultiPoint":return Z(q,K);default:throw new Error("feature2 "+J+" geometry not supported")}case"Polygon":switch(J){case"Point":return y.default(K,q,{ignoreBoundary:!0});case"LineString":return N(q,K);case"Polygon":return U(q,K);case"MultiPoint":return E(q,K);default:throw new Error("feature2 "+J+" geometry not supported")}default:throw new Error("feature1 "+nt+" geometry not supported")}},k.isPointInMultiPoint=B,k.isMultiPointInMultiPoint=I,k.isMultiPointOnLine=Z,k.isMultiPointInPoly=E,k.isLineOnLine=T,k.isLineInPoly=N,k.isPolyInPoly=U,k.doBBoxOverlap=R,k.compareCoords=z,k.getMidpoint=M},function(m,k,l){m.exports=l(155)},function(m,k){Array.prototype.findIndex=Array.prototype.findIndex||function(l){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var f=Object(this),c=f.length>>>0,y=arguments[1],_=0;_<c;_++)if(l.call(y,f[_],_,f))return _;return-1},Array.prototype.find=Array.prototype.find||function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("callback must be a function");for(var f=Object(this),c=f.length>>>0,y=arguments[1],_=0;_<c;_++){var P=f[_];if(l.call(y,P,_,f))return P}},typeof Object.assign!="function"&&(Object.assign=function(l){if(l==null)throw new TypeError("Cannot convert undefined or null to object");l=Object(l);for(var f=1;f<arguments.length;f++){var c=arguments[f];if(c!=null)for(var y in c)Object.prototype.hasOwnProperty.call(c,y)&&(l[y]=c[y])}return l}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(l){l.hasOwnProperty("remove")||Object.defineProperty(l,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(l,f){if(this==null)throw new TypeError('"this" is null or not defined');var c=Object(this),y=c.length>>>0;if(y===0)return!1;for(var _,P,B=0|f,I=Math.max(B>=0?B:y-Math.abs(B),0);I<y;){if((_=c[I])===(P=l)||typeof _=="number"&&typeof P=="number"&&isNaN(_)&&isNaN(P))return!0;I++}return!1}})},function(m,k,l){var f=l(71),c=l(31),y=l(102),_=l(104),P=l(2),B=l(38),I=l(37);m.exports=function Z(E,T,N,U,R){E!==T&&y(T,function(z,M){if(R||(R=new f),P(z))_(E,T,M,N,Z,U,R);else{var C=U?U(I(E,M),z,M+"",E,T,R):void 0;C===void 0&&(C=z),c(E,M,C)}},B)}},function(m,k,l){var f=l(11),c=l(77),y=l(78),_=l(79),P=l(80),B=l(81);function I(Z){var E=this.__data__=new f(Z);this.size=E.size}I.prototype.clear=c,I.prototype.delete=y,I.prototype.get=_,I.prototype.has=P,I.prototype.set=B,m.exports=I},function(m,k){m.exports=function(){this.__data__=[],this.size=0}},function(m,k,l){var f=l(12),c=Array.prototype.splice;m.exports=function(y){var _=this.__data__,P=f(_,y);return!(P<0)&&(P==_.length-1?_.pop():c.call(_,P,1),--this.size,!0)}},function(m,k,l){var f=l(12);m.exports=function(c){var y=this.__data__,_=f(y,c);return _<0?void 0:y[_][1]}},function(m,k,l){var f=l(12);m.exports=function(c){return f(this.__data__,c)>-1}},function(m,k,l){var f=l(12);m.exports=function(c,y){var _=this.__data__,P=f(_,c);return P<0?(++this.size,_.push([c,y])):_[P][1]=y,this}},function(m,k,l){var f=l(11);m.exports=function(){this.__data__=new f,this.size=0}},function(m,k){m.exports=function(l){var f=this.__data__,c=f.delete(l);return this.size=f.size,c}},function(m,k){m.exports=function(l){return this.__data__.get(l)}},function(m,k){m.exports=function(l){return this.__data__.has(l)}},function(m,k,l){var f=l(11),c=l(28),y=l(30);m.exports=function(_,P){var B=this.__data__;if(B instanceof f){var I=B.__data__;if(!c||I.length<199)return I.push([_,P]),this.size=++B.size,this;B=this.__data__=new y(I)}return B.set(_,P),this.size=B.size,this}},function(m,k,l){var f=l(18),c=l(86),y=l(2),_=l(88),P=/^\[object .+?Constructor\]$/,B=Function.prototype,I=Object.prototype,Z=B.toString,E=I.hasOwnProperty,T=RegExp("^"+Z.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");m.exports=function(N){return!(!y(N)||c(N))&&(f(N)?T:P).test(_(N))}},function(m,k){var l;l=function(){return this}();try{l=l||new Function("return this")()}catch{typeof window=="object"&&(l=window)}m.exports=l},function(m,k,l){var f=l(19),c=Object.prototype,y=c.hasOwnProperty,_=c.toString,P=f?f.toStringTag:void 0;m.exports=function(B){var I=y.call(B,P),Z=B[P];try{B[P]=void 0;var E=!0}catch{}var T=_.call(B);return E&&(I?B[P]=Z:delete B[P]),T}},function(m,k){var l=Object.prototype.toString;m.exports=function(f){return l.call(f)}},function(m,k,l){var f,c=l(87),y=(f=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||""))?"Symbol(src)_1."+f:"";m.exports=function(_){return!!y&&y in _}},function(m,k,l){var f=l(4)["__core-js_shared__"];m.exports=f},function(m,k){var l=Function.prototype.toString;m.exports=function(f){if(f!=null){try{return l.call(f)}catch{}try{return f+""}catch{}}return""}},function(m,k){m.exports=function(l,f){return l==null?void 0:l[f]}},function(m,k,l){var f=l(91),c=l(11),y=l(28);m.exports=function(){this.size=0,this.__data__={hash:new f,map:new(y||c),string:new f}}},function(m,k,l){var f=l(92),c=l(93),y=l(94),_=l(95),P=l(96);function B(I){var Z=-1,E=I==null?0:I.length;for(this.clear();++Z<E;){var T=I[Z];this.set(T[0],T[1])}}B.prototype.clear=f,B.prototype.delete=c,B.prototype.get=y,B.prototype.has=_,B.prototype.set=P,m.exports=B},function(m,k,l){var f=l(14);m.exports=function(){this.__data__=f?f(null):{},this.size=0}},function(m,k){m.exports=function(l){var f=this.has(l)&&delete this.__data__[l];return this.size-=f?1:0,f}},function(m,k,l){var f=l(14),c=Object.prototype.hasOwnProperty;m.exports=function(y){var _=this.__data__;if(f){var P=_[y];return P==="__lodash_hash_undefined__"?void 0:P}return c.call(_,y)?_[y]:void 0}},function(m,k,l){var f=l(14),c=Object.prototype.hasOwnProperty;m.exports=function(y){var _=this.__data__;return f?_[y]!==void 0:c.call(_,y)}},function(m,k,l){var f=l(14);m.exports=function(c,y){var _=this.__data__;return this.size+=this.has(c)?0:1,_[c]=f&&y===void 0?"__lodash_hash_undefined__":y,this}},function(m,k,l){var f=l(15);m.exports=function(c){var y=f(this,c).delete(c);return this.size-=y?1:0,y}},function(m,k){m.exports=function(l){var f=typeof l;return f=="string"||f=="number"||f=="symbol"||f=="boolean"?l!=="__proto__":l===null}},function(m,k,l){var f=l(15);m.exports=function(c){return f(this,c).get(c)}},function(m,k,l){var f=l(15);m.exports=function(c){return f(this,c).has(c)}},function(m,k,l){var f=l(15);m.exports=function(c,y){var _=f(this,c),P=_.size;return _.set(c,y),this.size+=_.size==P?0:1,this}},function(m,k,l){var f=l(103)();m.exports=f},function(m,k){m.exports=function(l){return function(f,c,y){for(var _=-1,P=Object(f),B=y(f),I=B.length;I--;){var Z=B[l?I:++_];if(c(P[Z],Z,P)===!1)break}return f}}},function(m,k,l){var f=l(31),c=l(105),y=l(106),_=l(109),P=l(110),B=l(22),I=l(6),Z=l(114),E=l(35),T=l(18),N=l(2),U=l(116),R=l(36),z=l(37),M=l(120);m.exports=function(C,D,q,K,nt,J,lt){var ot=z(C,q),gt=z(D,q),vt=lt.get(gt);if(vt)f(C,q,vt);else{var dt=J?J(ot,gt,q+"",C,D,lt):void 0,It=dt===void 0;if(It){var Pt=I(gt),At=!Pt&&E(gt),Bt=!Pt&&!At&&R(gt);dt=gt,Pt||At||Bt?I(ot)?dt=ot:Z(ot)?dt=_(ot):At?(It=!1,dt=c(gt,!0)):Bt?(It=!1,dt=y(gt,!0)):dt=[]:U(gt)||B(gt)?(dt=ot,B(ot)?dt=M(ot):N(ot)&&!T(ot)||(dt=P(gt))):It=!1}It&&(lt.set(gt,dt),nt(dt,gt,K,J,lt),lt.delete(gt)),f(C,q,dt)}}},function(m,k,l){(function(f){var c=l(4),y=k&&!k.nodeType&&k,_=y&&typeof f=="object"&&f&&!f.nodeType&&f,P=_&&_.exports===y?c.Buffer:void 0,B=P?P.allocUnsafe:void 0;f.exports=function(I,Z){if(Z)return I.slice();var E=I.length,T=B?B(E):new I.constructor(E);return I.copy(T),T}}).call(this,l(21)(m))},function(m,k,l){var f=l(107);m.exports=function(c,y){var _=y?f(c.buffer):c.buffer;return new c.constructor(_,c.byteOffset,c.length)}},function(m,k,l){var f=l(108);m.exports=function(c){var y=new c.constructor(c.byteLength);return new f(y).set(new f(c)),y}},function(m,k,l){var f=l(4).Uint8Array;m.exports=f},function(m,k){m.exports=function(l,f){var c=-1,y=l.length;for(f||(f=Array(y));++c<y;)f[c]=l[c];return f}},function(m,k,l){var f=l(111),c=l(33),y=l(34);m.exports=function(_){return typeof _.constructor!="function"||y(_)?{}:f(c(_))}},function(m,k,l){var f=l(2),c=Object.create,y=function(){function _(){}return function(P){if(!f(P))return{};if(c)return c(P);_.prototype=P;var B=new _;return _.prototype=void 0,B}}();m.exports=y},function(m,k){m.exports=function(l,f){return function(c){return l(f(c))}}},function(m,k,l){var f=l(9),c=l(5);m.exports=function(y){return c(y)&&f(y)=="[object Arguments]"}},function(m,k,l){var f=l(23),c=l(5);m.exports=function(y){return c(y)&&f(y)}},function(m,k){m.exports=function(){return!1}},function(m,k,l){var f=l(9),c=l(33),y=l(5),_=Function.prototype,P=Object.prototype,B=_.toString,I=P.hasOwnProperty,Z=B.call(Object);m.exports=function(E){if(!y(E)||f(E)!="[object Object]")return!1;var T=c(E);if(T===null)return!0;var N=I.call(T,"constructor")&&T.constructor;return typeof N=="function"&&N instanceof N&&B.call(N)==Z}},function(m,k,l){var f=l(9),c=l(24),y=l(5),_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_["[object Function]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1,m.exports=function(P){return y(P)&&c(P.length)&&!!_[f(P)]}},function(m,k){m.exports=function(l){return function(f){return l(f)}}},function(m,k,l){(function(f){var c=l(29),y=k&&!k.nodeType&&k,_=y&&typeof f=="object"&&f&&!f.nodeType&&f,P=_&&_.exports===y&&c.process,B=function(){try{var I=_&&_.require&&_.require("util").types;return I||P&&P.binding&&P.binding("util")}catch{}}();f.exports=B}).call(this,l(21)(m))},function(m,k,l){var f=l(121),c=l(38);m.exports=function(y){return f(y,c(y))}},function(m,k,l){var f=l(122),c=l(20);m.exports=function(y,_,P,B){var I=!P;P||(P={});for(var Z=-1,E=_.length;++Z<E;){var T=_[Z],N=B?B(P[T],y[T],T,P,y):void 0;N===void 0&&(N=y[T]),I?c(P,T,N):f(P,T,N)}return P}},function(m,k,l){var f=l(20),c=l(13),y=Object.prototype.hasOwnProperty;m.exports=function(_,P,B){var I=_[P];y.call(_,P)&&c(I,B)&&(B!==void 0||P in _)||f(_,P,B)}},function(m,k,l){var f=l(124),c=l(22),y=l(6),_=l(35),P=l(25),B=l(36),I=Object.prototype.hasOwnProperty;m.exports=function(Z,E){var T=y(Z),N=!T&&c(Z),U=!T&&!N&&_(Z),R=!T&&!N&&!U&&B(Z),z=T||N||U||R,M=z?f(Z.length,String):[],C=M.length;for(var D in Z)!E&&!I.call(Z,D)||z&&(D=="length"||U&&(D=="offset"||D=="parent")||R&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||P(D,C))||M.push(D);return M}},function(m,k){m.exports=function(l,f){for(var c=-1,y=Array(l);++c<l;)y[c]=f(c);return y}},function(m,k,l){var f=l(2),c=l(34),y=l(126),_=Object.prototype.hasOwnProperty;m.exports=function(P){if(!f(P))return y(P);var B=c(P),I=[];for(var Z in P)(Z!="constructor"||!B&&_.call(P,Z))&&I.push(Z);return I}},function(m,k){m.exports=function(l){var f=[];if(l!=null)for(var c in Object(l))f.push(c);return f}},function(m,k,l){var f=l(128),c=l(135);m.exports=function(y){return f(function(_,P){var B=-1,I=P.length,Z=I>1?P[I-1]:void 0,E=I>2?P[2]:void 0;for(Z=y.length>3&&typeof Z=="function"?(I--,Z):void 0,E&&c(P[0],P[1],E)&&(Z=I<3?void 0:Z,I=1),_=Object(_);++B<I;){var T=P[B];T&&y(_,T,B,Z)}return _})}},function(m,k,l){var f=l(39),c=l(129),y=l(131);m.exports=function(_,P){return y(c(_,P,f),_+"")}},function(m,k,l){var f=l(130),c=Math.max;m.exports=function(y,_,P){return _=c(_===void 0?y.length-1:_,0),function(){for(var B=arguments,I=-1,Z=c(B.length-_,0),E=Array(Z);++I<Z;)E[I]=B[_+I];I=-1;for(var T=Array(_+1);++I<_;)T[I]=B[I];return T[_]=P(E),f(y,this,T)}}},function(m,k){m.exports=function(l,f,c){switch(c.length){case 0:return l.call(f);case 1:return l.call(f,c[0]);case 2:return l.call(f,c[0],c[1]);case 3:return l.call(f,c[0],c[1],c[2])}return l.apply(f,c)}},function(m,k,l){var f=l(132),c=l(134)(f);m.exports=c},function(m,k,l){var f=l(133),c=l(32),y=l(39),_=c?function(P,B){return c(P,"toString",{configurable:!0,enumerable:!1,value:f(B),writable:!0})}:y;m.exports=_},function(m,k){m.exports=function(l){return function(){return l}}},function(m,k){var l=Date.now;m.exports=function(f){var c=0,y=0;return function(){var _=l(),P=16-(_-y);if(y=_,P>0){if(++c>=800)return arguments[0]}else c=0;return f.apply(void 0,arguments)}}},function(m,k,l){var f=l(13),c=l(23),y=l(25),_=l(2);m.exports=function(P,B,I){if(!_(I))return!1;var Z=typeof B;return!!(Z=="number"?c(I)&&y(B,I.length):Z=="string"&&B in I)&&f(I[B],P)}},function(m,k,l){var f=l(40),c=l(41);m.exports=function(y,_){for(var P=0,B=(_=f(_,y)).length;y!=null&&P<B;)y=y[c(_[P++])];return P&&P==B?y:void 0}},function(m,k,l){var f=l(6),c=l(26),y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_=/^\w*$/;m.exports=function(P,B){if(f(P))return!1;var I=typeof P;return!(I!="number"&&I!="symbol"&&I!="boolean"&&P!=null&&!c(P))||_.test(P)||!y.test(P)||B!=null&&P in Object(B)}},function(m,k,l){var f=l(139),c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,y=/\\(\\)?/g,_=f(function(P){var B=[];return P.charCodeAt(0)===46&&B.push(""),P.replace(c,function(I,Z,E,T){B.push(E?T.replace(y,"$1"):Z||I)}),B});m.exports=_},function(m,k,l){var f=l(140);m.exports=function(c){var y=f(c,function(P){return _.size===500&&_.clear(),P}),_=y.cache;return y}},function(m,k,l){var f=l(30);function c(y,_){if(typeof y!="function"||_!=null&&typeof _!="function")throw new TypeError("Expected a function");var P=function(){var B=arguments,I=_?_.apply(this,B):B[0],Z=P.cache;if(Z.has(I))return Z.get(I);var E=y.apply(this,B);return P.cache=Z.set(I,E)||Z,E};return P.cache=new(c.Cache||f),P}c.Cache=f,m.exports=c},function(m,k,l){var f=l(142);m.exports=function(c){return c==null?"":f(c)}},function(m,k,l){var f=l(19),c=l(143),y=l(6),_=l(26),P=f?f.prototype:void 0,B=P?P.toString:void 0;m.exports=function I(Z){if(typeof Z=="string")return Z;if(y(Z))return c(Z,I)+"";if(_(Z))return B?B.call(Z):"";var E=Z+"";return E=="0"&&1/Z==-1/0?"-0":E}},function(m,k){m.exports=function(l,f){for(var c=-1,y=l==null?0:l.length,_=Array(y);++c<y;)_[c]=f(l[c],c,l);return _}},function(m,k){var l=Object.prototype.hasOwnProperty;m.exports=function(f,c){return f!=null&&l.call(f,c)}},function(m,k,l){var f=l(40),c=l(22),y=l(6),_=l(25),P=l(24),B=l(41);m.exports=function(I,Z,E){for(var T=-1,N=(Z=f(Z,I)).length,U=!1;++T<N;){var R=B(Z[T]);if(!(U=I!=null&&E(I,R)))break;I=I[R]}return U||++T!=N?U:!!(N=I==null?0:I.length)&&P(N)&&_(R,N)&&(y(I)||c(I))}},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(7),c=l(10),y=l(16);k.default=function(_){if(!_)throw new Error("geojson is required");var P=[];return y.flattenEach(_,function(B){(function(I,Z){var E=[],T=I.geometry;if(T!==null){switch(T.type){case"Polygon":E=c.getCoords(T);break;case"LineString":E=[c.getCoords(T)]}E.forEach(function(N){(function(U,R){var z=[];return U.reduce(function(M,C){var D,q,K,nt,J,lt,ot=f.lineString([M,C],R);return ot.bbox=(q=C,K=(D=M)[0],nt=D[1],J=q[0],lt=q[1],[K<J?K:J,nt<lt?nt:lt,K>J?K:J,nt>lt?nt:lt]),z.push(ot),C}),z})(N,I.properties).forEach(function(U){U.id=Z.length,Z.push(U)})})}})(B,P)}),f.featureCollection(P)}},function(m,k,l){var f=l(148),c=l(7),y=l(16),_=l(42).default,P=y.featureEach,B=(y.coordEach,c.polygon,c.featureCollection);function I(Z){var E=f(Z);return E.insert=function(T){if(T.type!=="Feature")throw new Error("invalid feature");return T.bbox=T.bbox?T.bbox:_(T),f.prototype.insert.call(this,T)},E.load=function(T){var N=[];return Array.isArray(T)?T.forEach(function(U){if(U.type!=="Feature")throw new Error("invalid features");U.bbox=U.bbox?U.bbox:_(U),N.push(U)}):P(T,function(U){if(U.type!=="Feature")throw new Error("invalid features");U.bbox=U.bbox?U.bbox:_(U),N.push(U)}),f.prototype.load.call(this,N)},E.remove=function(T,N){if(T.type!=="Feature")throw new Error("invalid feature");return T.bbox=T.bbox?T.bbox:_(T),f.prototype.remove.call(this,T,N)},E.clear=function(){return f.prototype.clear.call(this)},E.search=function(T){var N=f.prototype.search.call(this,this.toBBox(T));return B(N)},E.collides=function(T){return f.prototype.collides.call(this,this.toBBox(T))},E.all=function(){var T=f.prototype.all.call(this);return B(T)},E.toJSON=function(){return f.prototype.toJSON.call(this)},E.fromJSON=function(T){return f.prototype.fromJSON.call(this,T)},E.toBBox=function(T){var N;if(T.bbox)N=T.bbox;else if(Array.isArray(T)&&T.length===4)N=T;else if(Array.isArray(T)&&T.length===6)N=[T[0],T[1],T[3],T[4]];else if(T.type==="Feature")N=_(T);else{if(T.type!=="FeatureCollection")throw new Error("invalid geojson");N=_(T)}return{minX:N[0],minY:N[1],maxX:N[2],maxY:N[3]}},E}m.exports=I,m.exports.default=I},function(m,k,l){m.exports=c,m.exports.default=c;var f=l(149);function c(M,C){if(!(this instanceof c))return new c(M,C);this._maxEntries=Math.max(4,M||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),C&&this._initFormat(C),this.clear()}function y(M,C,D){if(!D)return C.indexOf(M);for(var q=0;q<C.length;q++)if(D(M,C[q]))return q;return-1}function _(M,C){P(M,0,M.children.length,C,M)}function P(M,C,D,q,K){K||(K=R(null)),K.minX=1/0,K.minY=1/0,K.maxX=-1/0,K.maxY=-1/0;for(var nt,J=C;J<D;J++)nt=M.children[J],B(K,M.leaf?q(nt):nt);return K}function B(M,C){return M.minX=Math.min(M.minX,C.minX),M.minY=Math.min(M.minY,C.minY),M.maxX=Math.max(M.maxX,C.maxX),M.maxY=Math.max(M.maxY,C.maxY),M}function I(M,C){return M.minX-C.minX}function Z(M,C){return M.minY-C.minY}function E(M){return(M.maxX-M.minX)*(M.maxY-M.minY)}function T(M){return M.maxX-M.minX+(M.maxY-M.minY)}function N(M,C){return M.minX<=C.minX&&M.minY<=C.minY&&C.maxX<=M.maxX&&C.maxY<=M.maxY}function U(M,C){return C.minX<=M.maxX&&C.minY<=M.maxY&&C.maxX>=M.minX&&C.maxY>=M.minY}function R(M){return{children:M,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function z(M,C,D,q,K){for(var nt,J=[C,D];J.length;)(D=J.pop())-(C=J.pop())<=q||(nt=C+Math.ceil((D-C)/q/2)*q,f(M,nt,C,D,K),J.push(C,nt,nt,D))}c.prototype={all:function(){return this._all(this.data,[])},search:function(M){var C=this.data,D=[],q=this.toBBox;if(!U(M,C))return D;for(var K,nt,J,lt,ot=[];C;){for(K=0,nt=C.children.length;K<nt;K++)J=C.children[K],U(M,lt=C.leaf?q(J):J)&&(C.leaf?D.push(J):N(M,lt)?this._all(J,D):ot.push(J));C=ot.pop()}return D},collides:function(M){var C=this.data,D=this.toBBox;if(!U(M,C))return!1;for(var q,K,nt,J,lt=[];C;){for(q=0,K=C.children.length;q<K;q++)if(nt=C.children[q],U(M,J=C.leaf?D(nt):nt)){if(C.leaf||N(M,J))return!0;lt.push(nt)}C=lt.pop()}return!1},load:function(M){if(!M||!M.length)return this;if(M.length<this._minEntries){for(var C=0,D=M.length;C<D;C++)this.insert(M[C]);return this}var q=this._build(M.slice(),0,M.length-1,0);if(this.data.children.length)if(this.data.height===q.height)this._splitRoot(this.data,q);else{if(this.data.height<q.height){var K=this.data;this.data=q,q=K}this._insert(q,this.data.height-q.height-1,!0)}else this.data=q;return this},insert:function(M){return M&&this._insert(M,this.data.height-1),this},clear:function(){return this.data=R([]),this},remove:function(M,C){if(!M)return this;for(var D,q,K,nt,J=this.data,lt=this.toBBox(M),ot=[],gt=[];J||ot.length;){if(J||(J=ot.pop(),q=ot[ot.length-1],D=gt.pop(),nt=!0),J.leaf&&(K=y(M,J.children,C))!==-1)return J.children.splice(K,1),ot.push(J),this._condense(ot),this;nt||J.leaf||!N(J,lt)?q?(D++,J=q.children[D],nt=!1):J=null:(ot.push(J),gt.push(D),D=0,q=J,J=J.children[0])}return this},toBBox:function(M){return M},compareMinX:I,compareMinY:Z,toJSON:function(){return this.data},fromJSON:function(M){return this.data=M,this},_all:function(M,C){for(var D=[];M;)M.leaf?C.push.apply(C,M.children):D.push.apply(D,M.children),M=D.pop();return C},_build:function(M,C,D,q){var K,nt=D-C+1,J=this._maxEntries;if(nt<=J)return _(K=R(M.slice(C,D+1)),this.toBBox),K;q||(q=Math.ceil(Math.log(nt)/Math.log(J)),J=Math.ceil(nt/Math.pow(J,q-1))),(K=R([])).leaf=!1,K.height=q;var lt,ot,gt,vt,dt=Math.ceil(nt/J),It=dt*Math.ceil(Math.sqrt(J));for(z(M,C,D,It,this.compareMinX),lt=C;lt<=D;lt+=It)for(z(M,lt,gt=Math.min(lt+It-1,D),dt,this.compareMinY),ot=lt;ot<=gt;ot+=dt)vt=Math.min(ot+dt-1,gt),K.children.push(this._build(M,ot,vt,q-1));return _(K,this.toBBox),K},_chooseSubtree:function(M,C,D,q){for(var K,nt,J,lt,ot,gt,vt,dt,It,Pt;q.push(C),!C.leaf&&q.length-1!==D;){for(vt=dt=1/0,K=0,nt=C.children.length;K<nt;K++)ot=E(J=C.children[K]),It=M,Pt=J,(gt=(Math.max(Pt.maxX,It.maxX)-Math.min(Pt.minX,It.minX))*(Math.max(Pt.maxY,It.maxY)-Math.min(Pt.minY,It.minY))-ot)<dt?(dt=gt,vt=ot<vt?ot:vt,lt=J):gt===dt&&ot<vt&&(vt=ot,lt=J);C=lt||C.children[0]}return C},_insert:function(M,C,D){var q=this.toBBox,K=D?M:q(M),nt=[],J=this._chooseSubtree(K,this.data,C,nt);for(J.children.push(M),B(J,K);C>=0&&nt[C].children.length>this._maxEntries;)this._split(nt,C),C--;this._adjustParentBBoxes(K,nt,C)},_split:function(M,C){var D=M[C],q=D.children.length,K=this._minEntries;this._chooseSplitAxis(D,K,q);var nt=this._chooseSplitIndex(D,K,q),J=R(D.children.splice(nt,D.children.length-nt));J.height=D.height,J.leaf=D.leaf,_(D,this.toBBox),_(J,this.toBBox),C?M[C-1].children.push(J):this._splitRoot(D,J)},_splitRoot:function(M,C){this.data=R([M,C]),this.data.height=M.height+1,this.data.leaf=!1,_(this.data,this.toBBox)},_chooseSplitIndex:function(M,C,D){var q,K,nt,J,lt,ot,gt,vt,dt,It,Pt,At,Bt,de;for(ot=gt=1/0,q=C;q<=D-C;q++)K=P(M,0,q,this.toBBox),nt=P(M,q,D,this.toBBox),dt=K,It=nt,Pt=void 0,At=void 0,Bt=void 0,de=void 0,Pt=Math.max(dt.minX,It.minX),At=Math.max(dt.minY,It.minY),Bt=Math.min(dt.maxX,It.maxX),de=Math.min(dt.maxY,It.maxY),J=Math.max(0,Bt-Pt)*Math.max(0,de-At),lt=E(K)+E(nt),J<ot?(ot=J,vt=q,gt=lt<gt?lt:gt):J===ot&&lt<gt&&(gt=lt,vt=q);return vt},_chooseSplitAxis:function(M,C,D){var q=M.leaf?this.compareMinX:I,K=M.leaf?this.compareMinY:Z;this._allDistMargin(M,C,D,q)<this._allDistMargin(M,C,D,K)&&M.children.sort(q)},_allDistMargin:function(M,C,D,q){M.children.sort(q);var K,nt,J=this.toBBox,lt=P(M,0,C,J),ot=P(M,D-C,D,J),gt=T(lt)+T(ot);for(K=C;K<D-C;K++)nt=M.children[K],B(lt,M.leaf?J(nt):nt),gt+=T(lt);for(K=D-C-1;K>=C;K--)nt=M.children[K],B(ot,M.leaf?J(nt):nt),gt+=T(ot);return gt},_adjustParentBBoxes:function(M,C,D){for(var q=D;q>=0;q--)B(C[q],M)},_condense:function(M){for(var C,D=M.length-1;D>=0;D--)M[D].children.length===0?D>0?(C=M[D-1].children).splice(C.indexOf(M[D]),1):this.clear():_(M[D],this.toBBox)},_initFormat:function(M){var C=["return a"," - b",";"];this.compareMinX=new Function("a","b",C.join(M[0])),this.compareMinY=new Function("a","b",C.join(M[1])),this.toBBox=new Function("a","return {minX: a"+M[0]+", minY: a"+M[1]+", maxX: a"+M[2]+", maxY: a"+M[3]+"};")}}},function(m,k,l){m.exports=function(){function f(y,_,P){var B=y[_];y[_]=y[P],y[P]=B}function c(y,_){return y<_?-1:y>_?1:0}return function(y,_,P,B,I){(function Z(E,T,N,U,R){for(;U>N;){if(U-N>600){var z=U-N+1,M=T-N+1,C=Math.log(z),D=.5*Math.exp(2*C/3),q=.5*Math.sqrt(C*D*(z-D)/z)*(M-z/2<0?-1:1),K=Math.max(N,Math.floor(T-M*D/z+q)),nt=Math.min(U,Math.floor(T+(z-M)*D/z+q));Z(E,T,K,nt,R)}var J=E[T],lt=N,ot=U;for(f(E,N,T),R(E[U],J)>0&&f(E,N,U);lt<ot;){for(f(E,lt,ot),lt++,ot--;R(E[lt],J)<0;)lt++;for(;R(E[ot],J)>0;)ot--}R(E[N],J)===0?f(E,N,ot):(ot++,f(E,ot,U)),ot<=T&&(N=ot+1),T<=ot&&(U=ot-1)}})(y,_,P||0,B||y.length-1,I||c)}}()},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(10);function c(y,_,P){var B=!1;_[0][0]===_[_.length-1][0]&&_[0][1]===_[_.length-1][1]&&(_=_.slice(0,_.length-1));for(var I=0,Z=_.length-1;I<_.length;Z=I++){var E=_[I][0],T=_[I][1],N=_[Z][0],U=_[Z][1];if(y[1]*(E-N)+T*(N-y[0])+U*(y[0]-E)==0&&(E-y[0])*(N-y[0])<=0&&(T-y[1])*(U-y[1])<=0)return!P;T>y[1]!=U>y[1]&&y[0]<(N-E)*(y[1]-T)/(U-T)+E&&(B=!B)}return B}k.default=function(y,_,P){if(P===void 0&&(P={}),!y)throw new Error("point is required");if(!_)throw new Error("polygon is required");var B=f.getCoord(y),I=f.getGeom(_),Z=I.type,E=_.bbox,T=I.coordinates;if(E&&function(M,C){return C[0]<=M[0]&&C[1]<=M[1]&&C[2]>=M[0]&&C[3]>=M[1]}(B,E)===!1)return!1;Z==="Polygon"&&(T=[T]);for(var N=!1,U=0;U<T.length&&!N;U++)if(c(B,T[U][0],P.ignoreBoundary)){for(var R=!1,z=1;z<T[U].length&&!R;)c(B,T[U][z],!P.ignoreBoundary)&&(R=!0),z++;R||(N=!0)}return N}},function(m,k,l){Object.defineProperty(k,"__esModule",{value:!0});var f=l(10);function c(y,_,P,B){var I=P[0],Z=P[1],E=y[0],T=y[1],N=_[0],U=_[1],R=N-E,z=U-T;return(P[0]-E)*z-(P[1]-T)*R==0&&(B?B==="start"?Math.abs(R)>=Math.abs(z)?R>0?E<I&&I<=N:N<=I&&I<E:z>0?T<Z&&Z<=U:U<=Z&&Z<T:B==="end"?Math.abs(R)>=Math.abs(z)?R>0?E<=I&&I<N:N<I&&I<=E:z>0?T<=Z&&Z<U:U<Z&&Z<=T:B==="both"&&(Math.abs(R)>=Math.abs(z)?R>0?E<I&&I<N:N<I&&I<E:z>0?T<Z&&Z<U:U<Z&&Z<T):Math.abs(R)>=Math.abs(z)?R>0?E<=I&&I<=N:N<=I&&I<=E:z>0?T<=Z&&Z<=U:U<=Z&&Z<=T)}k.default=function(y,_,P){P===void 0&&(P={});for(var B=f.getCoord(y),I=f.getCoords(_),Z=0;Z<I.length-1;Z++){var E=!1;if(P.ignoreEndVertices&&(Z===0&&(E="start"),Z===I.length-2&&(E="end"),Z===0&&Z+1===I.length-1&&(E="both")),c(I[Z],I[Z+1],B,E))return!0}return!1}},function(m,k){var l,f,c=m.exports={};function y(){throw new Error("setTimeout has not been defined")}function _(){throw new Error("clearTimeout has not been defined")}function P(z){if(l===setTimeout)return setTimeout(z,0);if((l===y||!l)&&setTimeout)return l=setTimeout,setTimeout(z,0);try{return l(z,0)}catch{try{return l.call(null,z,0)}catch{return l.call(this,z,0)}}}(function(){try{l=typeof setTimeout=="function"?setTimeout:y}catch{l=y}try{f=typeof clearTimeout=="function"?clearTimeout:_}catch{f=_}})();var B,I=[],Z=!1,E=-1;function T(){Z&&B&&(Z=!1,B.length?I=B.concat(I):E=-1,I.length&&N())}function N(){if(!Z){var z=P(T);Z=!0;for(var M=I.length;M;){for(B=I,I=[];++E<M;)B&&B[E].run();E=-1,M=I.length}B=null,Z=!1,function(C){if(f===clearTimeout)return clearTimeout(C);if((f===_||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(C);try{f(C)}catch{try{return f.call(null,C)}catch{return f.call(this,C)}}}(z)}}function U(z,M){this.fun=z,this.array=M}function R(){}c.nextTick=function(z){var M=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)M[C-1]=arguments[C];I.push(new U(z,M)),I.length!==1||Z||P(N)},U.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=R,c.addListener=R,c.once=R,c.off=R,c.removeListener=R,c.removeAllListeners=R,c.emit=R,c.prependListener=R,c.prependOnceListener=R,c.listeners=function(z){return[]},c.binding=function(z){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(z){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(m,k,l){},function(m,k,l){},function(m,k,l){l.r(k),l(69);var f=l(43),c=l(3),y=l.n(c),_=l(44),P=l(45),B=l(46),I=l(47),Z=l(48),E=l(49),T=l(50),N=l(51),U=l(52),R=l(53),z=l(54),M={en:_,de:P,it:B,id:I,ro:Z,ru:E,es:T,nl:N,fr:U,pt_br:l(55),zh:R,zh_tw:z,pl:l(56),sv:l(57),el:l(58),hu:l(59),da:l(60),no:l(61),fa:l(62),ua:l(63),tr:l(64),cz:l(65)};function C(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function D(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var q={_globalEditModeEnabled:!1,enableGlobalEditMode:function(e){this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(n){n.pm.enable(e)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers=[],this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(e){e.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(e)},handleLayerAdditionInGlobalEditMode:function(){var e=this,n=this._addedLayers;this._addedLayers=[],n.forEach(function(r){!!r.pm&&!r._pmTempLayer&&e.globalEditModeEnabled()&&r.pm.enable(function(a){for(var h=1;h<arguments.length;h++){var p=arguments[h]!=null?arguments[h]:{};h%2?C(Object(p),!0).forEach(function(g){D(a,g,p[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(p)):C(Object(p)).forEach(function(g){Object.defineProperty(a,g,Object.getOwnPropertyDescriptor(p,g))})}return a}({},e.globalOptions))})},_layerAdded:function(e){var n=e.layer;this._addedLayers.push(n)}},K={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var e=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,e.forEach(function(n){n.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var e=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,e.forEach(function(n){n.pm.disableLayerDrag()}),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(e){var n=e.layer;!!n.pm&&!n._pmTempLayer&&this.globalDragModeEnabled()&&(this.disableGlobalDragMode(),this.enableGlobalDragMode())}},nt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var e=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(n){e._isRelevantForRemoval(n)&&(n.pm.disable(),n.on("click",e.removeLayer,e))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var e=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(n){n.off("click",e.removeLayer,e)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(e){var n=e.layer;this._isRelevantForRemoval(n)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(e){var n=e.target;this._isRelevantForRemoval(n)&&!n.pm.dragging()&&(n.removeFrom(this.map.pm._getContainingLayer()),n.remove(),n instanceof L.LayerGroup?(this._fireRemoveLayerGroup(n),this._fireRemoveLayerGroup(this.map,n)):(n.pm._fireRemove(n),n.pm._fireRemove(this.map,n)))},_isRelevantForRemoval:function(e){return e.pm&&!(e instanceof L.LayerGroup)&&(!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)&&!e._pmTempLayer&&e.pm.options.allowRemoval}},J={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var e=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(n){return n instanceof L.Polyline}).forEach(function(n){e._isRelevantForRotate(n)&&n.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(e){return e instanceof L.Polyline}).forEach(function(e){e.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(e){var n=e.layer;this._isRelevantForRotate(n)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(e){return e.pm&&!(e instanceof L.LayerGroup)&&(!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)&&!e._pmTempLayer&&e.pm.options.allowRotation}};function lt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function ot(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lt(Object(r),!0).forEach(function(a){gt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function gt(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var vt={_fireDrawStart:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},e,n)},_fireDrawEnd:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},e,n)},_fireCreate:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:e,layer:e},n,r)},_fireCenterPlaced:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e==="Draw"?this._layer:void 0,a=e!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:r,layer:a,latlng:this._layer.getLatLng()},e,n)},_fireCut:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(e,"pm:cut",{shape:this._shape,layer:n,originalLayer:r},a,h)},_fireEdit:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(e,"pm:edit",{layer:this._layer,shape:this.getShape()},n,r)},_fireEnable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},e,n)},_fireDisable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},e,n)},_fireUpdate:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},e,n)},_fireMarkerDragStart:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:e,shape:this.getShape(),indexPath:n},r,a)},_fireMarkerDrag:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:e,shape:this.getShape(),indexPath:n},r,a)},_fireMarkerDragEnd:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:e,shape:this.getShape(),indexPath:n,intersectionReset:r},a,h)},_fireDragStart:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},e,n)},_fireDrag:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",ot(ot({},e),{},{shape:this.getShape()}),n,r)},_fireDragEnd:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},e,n)},_fireRemove:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:remove",{layer:n,shape:this.getShape()},r,a)},_fireVertexAdded:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:e,indexPath:n,latlng:r,shape:this.getShape()},a,h)},_fireVertexRemoved:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:e,indexPath:n,shape:this.getShape()},r,a)},_fireVertexClick:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:e,indexPath:n,shape:this.getShape()},r,a)},_fireIntersect:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:e,shape:this.getShape()},n,r)},_fireLayerReset:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:e,indexPath:n,shape:this.getShape()},r,a)},_fireSnapDrag:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:snapdrag",n,r,a)},_fireSnap:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:snap",n,r,a)},_fireUnsnap:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:unsnap",n,r,a)},_fireRotationEnable:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly},r,a)},_fireRotationDisable:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(e,"pm:rotatedisable",{layer:this._layer},n,r)},_fireRotationStart:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:n},r,a)},_fireRotation:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(e,"pm:rotate",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,angle:this._rotationLayer.pm.getAngle(),angleDiff:n,oldLatLngs:r,newLatLngs:this._rotationLayer.getLatLngs()},a,h)},_fireRotationEnd:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(e,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:n,angle:this._rotationLayer.pm.getAngle(),originLatLngs:r,newLatLngs:this._rotationLayer.getLatLngs()},a,h)},_fireActionClick:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:e.text,action:e,btnName:n,button:r},a,h)},_fireButtonClick:function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:e,button:n},r,a)},_fireLangChange:function(e,n,r,a){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:e,activeLang:n,fallback:r,translations:a},h,p)},_fireGlobalDragModeToggled:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:e,map:this.map},n,r)},_fireGlobalEditModeToggled:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:e,map:this.map},n,r)},_fireGlobalRemovalModeToggled:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:e,map:this.map},n,r)},_fireGlobalCutModeToggled:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},e,n)},_fireGlobalDrawModeToggled:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},e,n)},_fireGlobalRotateModeToggled:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},e,n)},_fireRemoveLayerGroup:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(e,"pm:remove",{layer:n,shape:void 0},r,a)},_fireKeyeventEvent:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:e,eventType:n,focusOn:r},a,h)},__fire:function(e,n,r,a){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};r=y()(r,h,{source:a}),L.PM.Utils._fireEvent(e,n,r)}},dt={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(e){this.map=e,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(document,"blur",this._onKeyListener,this)},_onKeyListener:function(e){var n="document";this.map.getContainer().contains(e.target)&&(n="map");var r={event:e,eventType:e.type,focusOn:n};this._lastEvents[e.type]=r,this._lastEvents.current=r,this.map.pm._fireKeyeventEvent(e,e.type,n)},getLastKeyEvent:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[e]},isShiftKeyPressed:function(){var e;return(e=this._lastEvents.current)===null||e===void 0?void 0:e.event.shiftKey},isAltKeyPressed:function(){var e;return(e=this._lastEvents.current)===null||e===void 0?void 0:e.event.altKey},isCtrlKeyPressed:function(){var e;return(e=this._lastEvents.current)===null||e===void 0?void 0:e.event.ctrlKey},isMetaKeyPressed:function(){var e;return(e=this._lastEvents.current)===null||e===void 0?void 0:e.event.metaKey},getPressedKey:function(){var e;return(e=this._lastEvents.current)===null||e===void 0?void 0:e.event.key}},It=L.Class.extend({includes:[q,K,nt,J,vt],initialize:function(e){this.map=e,this.Draw=new L.PM.Draw(e),this.Toolbar=new L.PM.Toolbar(e),this.Keyboard=dt,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"}},this.Keyboard._initKeyListener(e)},setLang:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",a=L.PM.activeLang;n&&(M[e]=y()(M[r],n)),L.PM.activeLang=e,this.map.pm.Toolbar.reinit(),this._fireLangChange(a,e,r,M[e])},addControls:function(e){this.Toolbar.addControls(e)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",n=arguments.length>1?arguments[1]:void 0;e==="Poly"&&(e="Polygon"),this.Draw.enable(e,n)},disableDraw:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";e==="Poly"&&(e="Polygon"),this.Draw.disable(e)},setPathOptions:function(e){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.ignoreShapes||[],h=r.merge||!1;this.map.pm.Draw.shapes.forEach(function(p){a.indexOf(p)===-1&&n.map.pm.Draw[p].setPathOptions(e,h)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(e){var n=this,r=y()(this.globalOptions,e),a=!1;this.map.pm.Draw.CircleMarker.enabled()&&this.map.pm.Draw.CircleMarker.options.editable!==r.editable&&(this.map.pm.Draw.CircleMarker.disable(),a=!0),this.map.pm.Draw.shapes.forEach(function(h){n.map.pm.Draw[h].setOptions(r)}),a&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(h){h.pm.setOptions(r)}),this.applyGlobalOptions(),this.globalOptions=r},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(e){e.pm.enabled()&&e.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(e){return this.Draw.Cut.enable(e)},toggleGlobalCutMode:function(e){return this.Draw.Cut.toggle(e)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=L.PM.Utils.findLayers(this.map);if(!e)return n;var r=L.featureGroup();return r._pmTempLayer=!0,n.forEach(function(a){r.addLayer(a)}),r},getGeomanDrawLayers:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=L.PM.Utils.findLayers(this.map).filter(function(a){return a._drawnByGeoman===!0});if(!e)return n;var r=L.featureGroup();return r._pmTempLayer=!0,n.forEach(function(a){r.addLayer(a)}),r},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple}}),Pt=l(0),At=l.n(Pt),Bt=l(66),de=l.n(Bt);function st(e){var n=L.PM.activeLang;return de()(M,n)||(n="en"),At()(M[n],e)}function di(e){return!function n(r){return r.filter(function(a){return![null,"",void 0].includes(a)}).reduce(function(a,h){return a.concat(Array.isArray(h)?n(h):h)},[])}(e).length}function wt(e){return e.reduce(function(n,r){return r.length!==0&&n.push(Array.isArray(r)?wt(r):r),n},[])}function jt(e,n,r){for(var a,h,p,g=6378137,x=63567523142e-4,w=1/298.257223563,S=e.lng,V=e.lat,X=r,F=Math.PI,$=n*F/180,rt=Math.sin($),at=Math.cos($),ft=(1-w)*Math.tan(V*F/180),ut=1/Math.sqrt(1+ft*ft),mt=ft*ut,_t=Math.atan2(ft,at),ct=ut*rt,Ot=1-ct*ct,fe=Ot*(g*g-x*x)/(x*x),An=1+fe/16384*(4096+fe*(fe*(320-175*fe)-768)),Pe=fe/1024*(256+fe*(fe*(74-47*fe)-128)),Ae=X/(x*An),bn=2*Math.PI;Math.abs(Ae-bn)>1e-12;)a=Math.cos(2*_t+Ae),bn=Ae,Ae=X/(x*An)+Pe*(h=Math.sin(Ae))*(a+Pe/4*((p=Math.cos(Ae))*(2*a*a-1)-Pe/6*a*(4*h*h-3)*(4*a*a-3)));var Fi=mt*h-ut*p*at,Ui=Math.atan2(mt*p+ut*h*at,(1-w)*Math.sqrt(ct*ct+Fi*Fi)),xi=w/16*Ot*(4+w*(4-3*Ot)),Vi=S+180*(Math.atan2(h*rt,ut*p-mt*h*at)-(1-xi)*w*ct*(Ae+xi*h*(a+xi*p*(2*a*a-1))))/F,ci=180*Ui/F;return L.latLng(Vi,ci)}function ae(e,n,r,a){for(var h,p,g=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],x=[],w=0;w<r;w+=1){if(g)h=jt(e,360*w/r+a,n),p=L.latLng(h.lng,h.lat);else{var S=e.lat+Math.cos(2*w*Math.PI/r)*n,V=e.lng+Math.sin(2*w*Math.PI/r)*n;p=L.latLng(S,V)}x.push(p)}return x}function Ut(e,n,r,a){return function(h,p,g){p=(p+360)%360;var x=Math.PI/180,w=180/Math.PI,S=6378137,V=h.lng*x,X=h.lat*x,F=p*x,$=Math.sin(X),rt=Math.cos(X),at=Math.cos(g/S),ft=Math.sin(g/S),ut=Math.asin($*at+rt*ft*Math.cos(F)),mt=V+Math.atan2(Math.sin(F)*ft*rt,at-$*Math.sin(ut));return mt=(mt*=w)>180?mt-360:mt<-180?mt+360:mt,L.latLng([ut*w,mt])}(n,function(h,p,g){var x=h.latLngToContainerPoint(p),w=h.latLngToContainerPoint(g),S=180*Math.atan2(w.y-x.y,w.x-x.x)/Math.PI+90;return S+=S<0?360:0}(e,n,r),a)}function Gt(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.getLatLngs();return e instanceof L.Polygon?L.polygon(n).getLatLngs():L.polyline(n).getLatLngs()}function Rt(e,n){var r,a;if((r=n.options.crs)===null||r===void 0||(a=r.projection)===null||a===void 0?void 0:a.MAX_LATITUDE){var h,p,g=(h=n.options.crs)===null||h===void 0||(p=h.projection)===null||p===void 0?void 0:p.MAX_LATITUDE;e.lat=Math.max(Math.min(g,e.lat),-g)}return e}function Zt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function pe(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Zt(Object(r),!0).forEach(function(a){ke(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ke(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var Ci=L.Control.extend({includes:[vt],options:{position:"topleft"},initialize:function(e){this._button=pe(pe({},this.options),e)},onAdd:function(e){return this._map=e,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(e){return this._button.toggleStatus=typeof e=="boolean"?e:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},_triggerClick:function(e){e&&e.preventDefault(),this._button.onClick(e,{button:this,event:e}),this._clicked(e),this._button.afterClick(e,{button:this,event:e})},_makeButton:function(e){var n=this,r=this.options.position.indexOf("right")>-1?"pos-right":"",a=L.DomUtil.create("div","button-container  ".concat(r),this._container),h=L.DomUtil.create("a","leaflet-buttons-control-button",a);h.setAttribute("role","button"),h.setAttribute("tabindex","0"),h.href="#";var p=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(r),a),g=e.actions,x={cancel:{text:st("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:st("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:st("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[e.jsClass]._removeLastVertex()}},finish:{text:st("actions.finish"),onClick:function(S){this._map.pm.Draw[e.jsClass]._finishShape(S)}}};g.forEach(function(S){var V,X=typeof S=="string"?S:S.name;if(x[X])V=x[X];else{if(!S.text)return;V=S}var F=L.DomUtil.create("a","leaflet-pm-action ".concat(r," action-").concat(X),p);F.setAttribute("role","button"),F.setAttribute("tabindex","0"),F.href="#",F.innerHTML=V.text,!e.disabled&&V.onClick&&(L.DomEvent.addListener(F,"click",function($){$.preventDefault();var rt="",at=n._map.pm.Toolbar.buttons;for(var ft in at)if(at[ft]._button===e){rt=ft;break}n._fireActionClick(V,rt,e)},n),L.DomEvent.addListener(F,"click",V.onClick,n)),L.DomEvent.disableClickPropagation(F)}),e.toggleStatus&&L.DomUtil.addClass(a,"active");var w=L.DomUtil.create("div","control-icon",h);return e.title&&w.setAttribute("title",e.title),e.iconUrl&&w.setAttribute("src",e.iconUrl),e.className&&L.DomUtil.addClass(w,e.className),e.disabled||(L.DomEvent.addListener(h,"click",function(){n._button.disableOtherButtons&&n._map.pm.Toolbar.triggerClickOnToggledButtons(n);var S="",V=n._map.pm.Toolbar.buttons;for(var X in V)if(V[X]._button===e){S=X;break}n._fireButtonClick(S,e)}),L.DomEvent.addListener(h,"click",this._triggerClick,this)),e.disabled&&(L.DomUtil.addClass(h,"pm-disabled"),L.DomUtil.addClass(w,"pm-disabled")),L.DomEvent.disableClickPropagation(h),a},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_clicked:function(){this._button.doToggle&&this.toggle()}});function te(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function H(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?te(Object(r),!0).forEach(function(a){d(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function d(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function v(e){return(v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(e)}L.Control.PMButton=Ci;var O=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(e){this.init(e)},reinit:function(){var e=this.isVisible;this.removeControls(),this._defineButtons(),e&&this.addControls()},init:function(e){this.map=e,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(e){var n="".concat(e,"Container");return this[n]||(this[n]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(e," leaflet-bar leaflet-control"))),this[n]},getButtons:function(){return this.buttons},addControls:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof e.editPolygon!="undefined"&&(e.editMode=e.editPolygon),typeof e.deleteLayer!="undefined"&&(e.removalMode=e.deleteLayer),L.Util.setOptions(this,e),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var e=this.getButtons(),n={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete"}};for(var r in e){var a=e[r];L.Util.setOptions(a,{className:n.geomanIcons[r]})}},removeControls:function(){var e=this.getButtons();for(var n in e)e[n].remove();this.isVisible=!1},toggleControls:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(e)},_addButton:function(e,n){return this.buttons[e]=n,this.options[e]=this.options[e]||!1,this.buttons[e]},triggerClickOnToggledButtons:function(e){var n=["snappingOption"];for(var r in this.buttons)!n.includes(r)&&this.buttons[r]!==e&&this.buttons[r].toggled()&&this.buttons[r]._triggerClick()},toggleButton:function(e,n){var r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return e==="editPolygon"&&(e="editMode"),e==="deleteLayer"&&(e="removalMode"),r&&this.triggerClickOnToggledButtons(this.buttons[e]),!!this.buttons[e]&&this.buttons[e].toggle(n)},_defineButtons:function(){var e=this,n={className:"control-icon leaflet-pm-icon-marker",title:st("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:st("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},a={className:"control-icon leaflet-pm-icon-polyline",title:st("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},h={title:st("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},p={title:st("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:st("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},x={title:st("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){e.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},w={title:st("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){e.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},S={title:st("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(F,$){e.map.pm.Draw[$.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},V={title:st("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){e.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},X={title:st("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){e.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]};this._addButton("drawMarker",new L.Control.PMButton(n)),this._addButton("drawPolyline",new L.Control.PMButton(a)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(r)),this._addButton("drawCircle",new L.Control.PMButton(h)),this._addButton("drawCircleMarker",new L.Control.PMButton(p)),this._addButton("editMode",new L.Control.PMButton(x)),this._addButton("dragMode",new L.Control.PMButton(w)),this._addButton("cutPolygon",new L.Control.PMButton(S)),this._addButton("removalMode",new L.Control.PMButton(V)),this._addButton("rotateMode",new L.Control.PMButton(X))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var e=this.getButtons(),n=[];for(var r in this.options.drawControls===!1&&(n=n.concat(Object.keys(e).filter(function(h){return!e[h]._button.tool}))),this.options.editControls===!1&&(n=n.concat(Object.keys(e).filter(function(h){return e[h]._button.tool==="edit"}))),this.options.optionsControls===!1&&(n=n.concat(Object.keys(e).filter(function(h){return e[h]._button.tool==="options"}))),this.options.customControls===!1&&(n=n.concat(Object.keys(e).filter(function(h){return e[h]._button.tool==="custom"}))),e)if(this.options[r]&&n.indexOf(r)===-1){var a=e[r]._button.tool;a||(a="draw"),e[r].setPosition(this._getBtnPosition(a)),e[r].addTo(this.map)}}},_getBtnPosition:function(e){return this.options.positions&&this.options.positions[e]?this.options.positions[e]:this.options.position},setBlockPosition:function(e,n){this.options.positions[e]=n,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(e,n){if(!n)throw new TypeError("Button has no name");v(n)!=="object"&&(n={name:n});var r=this._btnNameMapping(e);if(!n.name)throw new TypeError("Button has no name");if(this.buttons[n.name])throw new TypeError("Button with this name already exists");var a=this.map.pm.Draw.createNewDrawInstance(n.name,r);return n=H(H({},this.buttons[r]._button),n),{drawInstance:a,control:this.createCustomControl(n)}},createCustomControl:function(e){if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");e.onClick||(e.onClick=function(){}),e.afterClick||(e.afterClick=function(){}),e.toggle!==!1&&(e.toggle=!0),e.block&&(e.block=e.block.toLowerCase()),e.block&&e.block!=="draw"||(e.block=""),e.className?e.className.indexOf("control-icon")===-1&&(e.className="control-icon ".concat(e.className)):e.className="control-icon";var n={tool:e.block,className:e.className,title:e.title||"",jsClass:e.name,onClick:e.onClick,afterClick:e.afterClick,doToggle:e.toggle,toggleStatus:!1,disableOtherButtons:!0,cssToggle:e.toggle,position:this.options.position,actions:e.actions||[],disabled:!!e.disabled};this.options[e.name]!==!1&&(this.options[e.name]=!0);var r=this._addButton(e.name,new L.Control.PMButton(n));return this.changeControlOrder(),r},changeControlOrder:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=this._shapeMapping(),r=[];e.forEach(function(S){n[S]?r.push(n[S]):r.push(S)});var a=this.getButtons(),h={};r.forEach(function(S){a[S]&&(h[S]=a[S])});var p=Object.keys(a).filter(function(S){return!a[S]._button.tool});p.forEach(function(S){r.indexOf(S)===-1&&(h[S]=a[S])});var g=Object.keys(a).filter(function(S){return a[S]._button.tool==="edit"});g.forEach(function(S){r.indexOf(S)===-1&&(h[S]=a[S])});var x=Object.keys(a).filter(function(S){return a[S]._button.tool==="options"});x.forEach(function(S){r.indexOf(S)===-1&&(h[S]=a[S])});var w=Object.keys(a).filter(function(S){return a[S]._button.tool==="custom"});w.forEach(function(S){r.indexOf(S)===-1&&(h[S]=a[S])}),Object.keys(a).forEach(function(S){r.indexOf(S)===-1&&(h[S]=a[S])}),this.map.pm.Toolbar.buttons=h,this._showHideButtons()},getControlOrder:function(){var e=this.getButtons(),n=[];for(var r in e)n.push(r);return n},changeActionsOfControl:function(e,n){var r=this._btnNameMapping(e);if(!r)throw new TypeError("No name passed");if(!n)throw new TypeError("No actions passed");if(!this.buttons[r])throw new TypeError("Button with this name not exists");this.buttons[r]._button.actions=n,this.changeControlOrder()},setButtonDisabled:function(e,n){var r=this._btnNameMapping(e);this.buttons[r]._button.disabled=!!n,this._showHideButtons()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode"}},_btnNameMapping:function(e){var n=this._shapeMapping();return n[e]?n[e]:e}});function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function G(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?j(Object(r),!0).forEach(function(a){Q(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Q(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var et={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(e){var n=this;e.forEach(function(r){Array.isArray(r)?n._assignEvents(r):(r.off("drag",n._handleSnapping,n),r.on("drag",n._handleSnapping,n),r.off("dragend",n._cleanupSnapping,n),r.on("dragend",n._cleanupSnapping,n))})},_cleanupSnapping:function(){delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(e){e.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(e){var n=this,r=e.target;if(r._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var a=this._calcClosestLayer(r.getLatLng(),this._snapList);if(Object.keys(a).length===0)return!1;var h,p=a.layer instanceof L.Marker||a.layer instanceof L.CircleMarker||!this.options.snapSegment;h=p?a.latlng:this._checkPrioritiySnapping(a);var g=this.options.snapDistance,x={marker:r,shape:this._shape,snapLatLng:h,segment:a.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:a.layer,distance:a.distance};if(this._fireSnapDrag(x.marker,x),this._fireSnapDrag(this._layer,x),a.distance<g){r._orgLatLng=r.getLatLng(),r.setLatLng(h),r._snapped=!0,r._snapInfo=x;var w=this._snapLatLng||{},S=h||{};w.lat===S.lat&&w.lng===S.lng||(n._snapLatLng=h,n._fireSnap(r,x),n._fireSnap(n._layer,x))}else this._snapLatLng&&(this._unsnap(x),r._snapped=!1,this._fireUnsnap(x.marker,x),this._fireUnsnap(this._layer,x));return!0},_createSnapList:function(){var e=this,n=[],r=[],a=this._map;a.off("pm:remove",this._handleSnapLayerRemoval,this),a.on("pm:remove",this._handleSnapLayerRemoval,this),a.eachLayer(function(h){if((h instanceof L.Polyline||h instanceof L.Marker||h instanceof L.CircleMarker||h instanceof L.ImageOverlay)&&h.options.snapIgnore!==!0){if(h.options.snapIgnore===void 0&&(!L.PM.optIn&&h.options.pmIgnore===!0||L.PM.optIn&&h.options.pmIgnore!==!1))return;(h instanceof L.Circle||h instanceof L.CircleMarker)&&h.pm&&h.pm._hiddenPolyCircle?n.push(h.pm._hiddenPolyCircle):h instanceof L.ImageOverlay&&(h=L.rectangle(h.getBounds())),n.push(h);var p=L.polyline([],{color:"red",pmIgnore:!0});p._pmTempLayer=!0,r.push(p),(h instanceof L.Circle||h instanceof L.CircleMarker)&&r.push(p)}}),n=(n=(n=n.filter(function(h){return e._layer!==h})).filter(function(h){return h._latlng||h._latlngs&&!di(h._latlngs)})).filter(function(h){return!h._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var h=L.polyline([],{color:"red",pmIgnore:!0});h._pmTempLayer=!0,r.push(h)}),this._snapList=n.concat(this._otherSnapLayers)):this._snapList=n,this.debugIndicatorLines=r},_handleSnapLayerRemoval:function(e){var n=e.layer,r=this._snapList.findIndex(function(a){return a._leaflet_id===n._leaflet_id});this._snapList.splice(r,1)},_calcClosestLayer:function(e,n){var r=this,a=[],h={};return n.forEach(function(p,g){if(!p._parentCopy||p._parentCopy!==r._layer){var x=r._calcLayerDistances(e,p);r.debugIndicatorLines[g]&&r.debugIndicatorLines[g].setLatLngs([e,x.latlng]),(h.distance===void 0||x.distance<=h.distance)&&(x.distance<h.distance&&(a=[]),(h=x).layer=p,a.push(h))}}),this._getClosestLayerByPriority(a)},_calcLayerDistances:function(e,n){var r,a,h,p=this,g=this._map,x=n instanceof L.Marker||n instanceof L.CircleMarker,w=n instanceof L.Polygon,S=e,V=x?n.getLatLng():n.getLatLngs();return x?{latlng:G({},V),distance:this._getDistance(g,V,S)}:(function X(F){F.forEach(function($,rt){if(Array.isArray($))X($);else if(p.options.snapSegment){var at,ft=$;at=w?rt+1===F.length?0:rt+1:rt+1===F.length?void 0:rt+1;var ut=F[at];if(ut){var mt=p._getDistanceToSegment(g,S,ft,ut);(a===void 0||mt<a)&&(a=mt,h=[ft,ut])}}else{var _t=p._getDistance(g,S,$);(a===void 0||_t<a)&&(a=_t,r=$)}})}(V),this.options.snapSegment?{latlng:G({},this._getClosestPointOnSegment(g,e,h[0],h[1])),segment:h,distance:a}:{latlng:r,distance:a})},_getClosestLayerByPriority:function(e){e=e.sort(function(h,p){return h._leaflet_id-p._leaflet_id});var n=this._map.pm.globalOptions.snappingOrder||[],r=0,a={};return n.concat(["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"]).forEach(function(h){a[h]||(r+=1,a[h]=r)}),e.sort(function(h,p){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!p||Object.keys(p).length===0)return function(F,$){return F-$};for(var x,w=Object.keys(p),S=w.length,V={};S--;)x=w[S],V[x.toLowerCase()]=p[x];function X(F){return F instanceof L.Marker?"Marker":F instanceof L.Circle?"Circle":F instanceof L.CircleMarker?"CircleMarker":F instanceof L.Rectangle?"Rectangle":F instanceof L.Polygon?"Polygon":F instanceof L.Polyline?"Line":void 0}return function(F,$){var rt,at;if(h==="instanceofShape"){if(rt=X(F.layer).toLowerCase(),at=X($.layer).toLowerCase(),!rt||!at)return 0}else{if(!F.hasOwnProperty(h)||!$.hasOwnProperty(h))return 0;rt=F[h].toLowerCase(),at=$[h].toLowerCase()}var ft=rt in V?V[rt]:Number.MAX_SAFE_INTEGER,ut=at in V?V[at]:Number.MAX_SAFE_INTEGER,mt=0;return ft<ut?mt=-1:ft>ut&&(mt=1),g==="desc"?-1*mt:mt}}("instanceofShape",a)),e[0]||{}},_checkPrioritiySnapping:function(e){var n=this._map,r=e.segment[0],a=e.segment[1],h=e.latlng,p=this._getDistance(n,r,h),g=this._getDistance(n,a,h),x=p<g?r:a,w=p<g?p:g;if(this.options.snapMiddle){var S=L.PM.Utils.calcMiddleLatLng(n,r,a),V=this._getDistance(n,S,h);V<p&&V<g&&(x=S,w=V)}return G({},w<this.options.snapDistance?x:h)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(e,n,r,a){var h=e.getMaxZoom();h===1/0&&(h=e.getZoom());var p=e.project(n,h),g=e.project(r,h),x=e.project(a,h),w=L.LineUtil.closestPointOnSegment(p,g,x);return e.unproject(w,h)},_getDistanceToSegment:function(e,n,r,a){var h=e.latLngToLayerPoint(n),p=e.latLngToLayerPoint(r),g=e.latLngToLayerPoint(a);return L.LineUtil.pointToSegmentDistance(h,p,g)},_getDistance:function(e,n,r){return e.latLngToLayerPoint(n).distanceTo(e.latLngToLayerPoint(r))}},tt=L.Class.extend({includes:[et,vt],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(e){L.Util.setOptions(this,e)},getOptions:function(){return this.options},initialize:function(e){var n=this,r=new L.Icon.Default;r.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=r,this._map=e,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut"],this.shapes.forEach(function(a){n[a]=new L.PM.Draw[a](n._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=n?y()(this.options.pathOptions,e):e},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(e,n){if(!e)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[e].enable(n)},disable:function(){var e=this;this.shapes.forEach(function(n){e[n].disable()})},addControls:function(){var e=this;this.shapes.forEach(function(n){e[n].addButton()})},getActiveShape:function(){var e,n=this;return this.shapes.forEach(function(r){n[r]._enabled&&(e=r)}),e},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var e=L.PM.Utils.findLayers(this._map);this._enabled?e.forEach(function(n){L.PM.Utils.disablePopup(n)}):e.forEach(function(n){L.PM.Utils.enablePopup(n)})},createNewDrawInstance:function(e,n){var r=this._getShapeFromBtnName(n);if(this[e])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[r])throw new TypeError("There is no class L.PM.Draw.".concat(r));return this[e]=new L.PM.Draw[r](this._map),this[e].toolbarButtonName=e,this[e]._shape=e,this.shapes.push(e),this[n]&&this[e].setOptions(this[n].options),this[e].setOptions(this[e].options),this[e]},_getShapeFromBtnName:function(e){var n={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate"};return n[e]?n[e]:this[e]?this[e]._shape:e},_finishLayer:function(e){e.pm&&(e.pm.setOptions(this.options),e.pm._shape=this._shape,e.pm._map=this._map),this._addDrawnLayerProp(e)},_addDrawnLayerProp:function(e){e._drawnByGeoman=!0},_setPane:function(e,n){n==="layerPane"?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":n==="vertexPane"?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":n==="markerPane"&&(e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});tt.Marker=tt.extend({initialize:function(e){this._map=e,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(e){var n=this;L.Util.setOptions(this,e),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(r){n.isRelevantMarker(r)&&r.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var e=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(n){e.isRelevantMarker(n)&&n.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(e){this.enabled()?this.disable():this.enable(e)},isRelevantMarker:function(e){return e instanceof L.Marker&&e.pm&&!e._pmTempLayer},_syncHintMarker:function(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){var n=e;n.target=this._hintMarker,this._handleSnapping(n)}},_createMarker:function(e){if(e.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng(),r=new L.Marker(n,this.options.markerStyle);this._setPane(r,"markerPane"),this._finishLayer(r),r.pm||(r.options.draggable=!1),r.addTo(this._map.pm._getContainingLayer()),r.pm&&this.options.markerEditable?r.pm.enable():r.dragging&&r.dragging.disable(),this._fireCreate(r),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}}});var pt=l(8),bt=l.n(pt);function Mt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function Lt(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Mt(Object(r),!0).forEach(function(a){Vt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vt(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function xt(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(h){return Object.getOwnPropertyDescriptor(e,h).enumerable})),r.push.apply(r,a)}return r}function Et(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?xt(Object(r),!0).forEach(function(a){zt(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zt(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}tt.Line=tt.extend({initialize:function(e){this._map=e,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(e){L.Util.setOptions(this,e),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(e){this.enabled()?this.disable():this.enable(e)},_syncHintLine:function(){var e=this._layer.getLatLngs();if(e.length>0){var n=e[e.length-1];this._hintline.setLatLngs([n,this._hintMarker.getLatLng()])}},_syncHintMarker:function(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){var n=e;n.target=this._hintMarker,this._handleSnapping(n)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,e.latlng)},hasSelfIntersection:function(){return bt()(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(e,n){var r=L.polyline(this._layer.getLatLngs());e&&(n||(n=this._hintMarker.getLatLng()),r.addLatLng(n));var a=bt()(r.toGeoJSON(15));this._doesSelfIntersect=a.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(e){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,e.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng();if(n.equals(this._layer.getLatLngs()[0]))this._finishShape(e);else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:n,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(n);var r=this._createMarker(n);this._setTooltipText(),this._hintline.setLatLngs([n,n]),this._fireVertexAdded(r,void 0,n,"Draw"),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(e)}}},_removeLastVertex:function(){var e=this._layer.getLatLngs(),n=e.pop();if(e.length<1)this.disable();else{var r=this._layerGroup.getLayers().filter(function(a){return a instanceof L.Marker}).filter(function(a){return!L.DomUtil.hasClass(a._icon,"cursor-marker")}).find(function(a){return a.getLatLng()===n});this._layerGroup.removeLayer(r),this._layer.setLatLngs(e),this._syncHintLine(),this._setTooltipText()}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var e=this._layer.getLatLngs();if(!(e.length<=1)){var n=L.polyline(e,this.options.pathOptions);this._setPane(n,"layerPane"),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),this._fireCreate(n),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(e){var n=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._pmTempLayer=!0,this._layerGroup.addLayer(n),n.on("click",this._finishShape,this),n},_setTooltipText:function(){var e="";e=st(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(e)}}),tt.Polygon=tt.Line.extend({initialize:function(e){this._map=e,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},_createMarker:function(e){var n=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._pmTempLayer=!0,this._layerGroup.addLayer(n),this._layer.getLatLngs().flat().length===1?(n.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(n)-1,this.options.snappable&&this._cleanupSnapping()):n.on("click",function(){return 1}),n},_setTooltipText:function(){var e="";e=st(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(e)},_finishShape:function(e){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var n=this._layer.getLatLngs();if(!(n.length<=2)){var r=L.polygon(n,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),tt.Rectangle=tt.extend({initialize:function(e){this._map=e,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(e){if(L.Util.setOptions(this,e),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var n=0;n<2;n+=1){var r=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(r,"vertexPane"),r._pmTempLayer=!0,this._layerGroup.addLayer(r),this._styleMarkers.push(r)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(e){this.enabled()?this.disable():this.enable(e)},_placeStartingMarkers:function(e){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(n),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(r){L.DomUtil.addClass(r._icon,"visible"),r.setLatLng(n)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(st("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var e=this._startMarker.getLatLng();e&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([e,e]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){var n=e;n.target=this._hintMarker,this._handleSnapping(n)}},_syncRectangleSize:function(){var e=this,n=Rt(this._startMarker.getLatLng(),this._map),r=Rt(this._hintMarker.getLatLng(),this._map),a=L.PM.Utils._getRotatedRectangle(n,r,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(a),this.options.cursorMarker&&this._styleMarkers){var h=[];a.forEach(function(p){p.equals(n,1e-8)||p.equals(r,1e-8)||h.push(p)}),h.forEach(function(p,g){try{e._styleMarkers[g].setLatLng(p)}catch{}})}},_findCorners:function(){var e=this._layer.getBounds();return[e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]},_finishShape:function(e){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng(),r=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var a=L.rectangle([r,n],this.options.pathOptions);if(this.options.rectangleAngle){var h=L.PM.Utils._getRotatedRectangle(r,n,this.options.rectangleAngle||0,this._map);a.setLatLngs(h),a.pm&&a.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(a,"layerPane"),this._finishLayer(a),a.addTo(this._map.pm._getContainingLayer()),this._fireCreate(a),this.disable(),this.options.continueDrawing&&this.enable()}}}),tt.Circle=tt.extend({initialize:function(e){this._map=e,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(e){L.Util.setOptions(this,e),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],Lt(Lt({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(e){this.enabled()?this.disable():this.enable(e)},_syncHintLine:function(){var e=this._centerMarker.getLatLng(),n=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([e,n])},_syncCircleRadius:function(){var e,n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(n,r):n.distanceTo(r),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(e)},_syncHintMarker:function(e){if(this._hintMarker.setLatLng(e.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var n=e;n.target=this._hintMarker,this._handleSnapping(n)}this._handleHintMarkerSnapping()},_placeCenterMarker:function(e){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(n),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var e=this._centerMarker.getLatLng();e&&(this._layer.setLatLng(e),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(st("tooltips.finishCircle")),this._fireCenterPlaced())},_finishShape:function(e){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n,r=this._centerMarker.getLatLng(),a=this._hintMarker.getLatLng();n=this._map.options.crs===L.CRS.Simple?this._map.distance(r,a):r.distanceTo(a),this.options.minRadiusCircle&&n<this.options.minRadiusCircle?n=this.options.minRadiusCircle:this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(n=this.options.maxRadiusCircle);var h=Lt(Lt({},this.options.pathOptions),{},{radius:n}),p=L.circle(r,h);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),p.pm&&p.pm._updateHiddenPolyCircle(),this._fireCreate(p),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=e.distanceTo(n);return e.equals(L.latLng([0,0]))||(this.options.minRadiusCircle&&r<this.options.minRadiusCircle?n=Ut(this._map,e,n,this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle&&(n=Ut(this._map,e,n,this.options.maxRadiusCircle))),n},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=e.distanceTo(n);(this.options.minRadiusCircle&&r<this.options.minRadiusCircle||this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}}),tt.CircleMarker=tt.Marker.extend({initialize:function(e){this._map=e,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(e){var n=this;L.Util.setOptions(this,e),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable?(this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"):(this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(st("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip()),this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(r){n.isRelevantMarker(r)&&r.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var e=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(n){e.isRelevantMarker(n)&&n.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(e){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(n),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var e=this._centerMarker.getLatLng();e&&(this._layer.setLatLng(e),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(st("tooltips.finishCircle")),this._fireCenterPlaced())},_syncHintLine:function(){var e=this._centerMarker.getLatLng(),n=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([e,n])},_syncCircleRadius:function(){var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(r)},_syncHintMarker:function(e){if(this._hintMarker.setLatLng(e.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var n=e;n.target=this._hintMarker,this._handleSnapping(n)}this._handleHintMarkerSnapping()},isRelevantMarker:function(e){return e instanceof L.CircleMarker&&!(e instanceof L.Circle)&&e.pm&&!e._pmTempLayer},_createMarker:function(e){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&e.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._hintMarker.getLatLng(),r=L.circleMarker(n,this.options.pathOptions);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),r.pm&&this.options.markerEditable&&r.pm.enable(),this._fireCreate(r),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(e){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);var n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng(),a=this._map.project(n).distanceTo(this._map.project(r));this.options.editable&&(this.options.minRadiusCircleMarker&&a<this.options.minRadiusCircleMarker?a=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&a>this.options.maxRadiusCircleMarker&&(a=this.options.maxRadiusCircleMarker));var h=Et(Et({},this.options.pathOptions),{},{radius:a}),p=L.circleMarker(n,h);this._setPane(p,"layerPane"),this._finishLayer(p),p.addTo(this._map.pm._getContainingLayer()),p.pm&&p.pm._updateHiddenPolyCircle(),this._fireCreate(p),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var e=this._hintMarker.getLatLng();if(this.options.editable){var n=this._centerMarker.getLatLng();if(n.equals(L.latLng([0,0])))return e;var r=this._map.project(n).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?e=Ut(this._map,n,e,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(e=Ut(this._map,n,e,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return e},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(e){var n=this._centerMarker.getLatLng(),r=this._map.project(n),a=L.point(r.x+e,r.y);return this._map.unproject(a).distanceTo(n)}});var Nt=l(1),Ft=l.n(Nt);function Xt(e,n,r){var a=e[n];e[n]=e[r],e[r]=a}function Jt(e,n){return e<n?-1:e>n?1:0}var me=function(e,n,r,a,h){(function p(g,x,w,S,V){for(;S>w;){if(S-w>600){var X=S-w+1,F=x-w+1,$=Math.log(X),rt=.5*Math.exp(2*$/3),at=.5*Math.sqrt($*rt*(X-rt)/X)*(F-X/2<0?-1:1),ft=Math.max(w,Math.floor(x-F*rt/X+at)),ut=Math.min(S,Math.floor(x+(X-F)*rt/X+at));p(g,x,ft,ut,V)}var mt=g[x],_t=w,ct=S;for(Xt(g,w,x),V(g[S],mt)>0&&Xt(g,w,S);_t<ct;){for(Xt(g,_t,ct),_t++,ct--;V(g[_t],mt)<0;)_t++;for(;V(g[ct],mt)>0;)ct--}V(g[w],mt)===0?Xt(g,w,ct):(ct++,Xt(g,ct,S)),ct<=x&&(w=ct+1),x<=ct&&(S=ct-1)}})(e,n,r||0,a||e.length-1,h||Jt)};function _e(e,n){if(!(this instanceof _e))return new _e(e,n);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function re(e,n,r){if(!r)return n.indexOf(e);for(var a=0;a<n.length;a++)if(r(e,n[a]))return a;return-1}function ee(e,n){Ht(e,0,e.children.length,n,e)}function Ht(e,n,r,a,h){h||(h=ei(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var p,g=n;g<r;g++)p=e.children[g],ie(h,e.leaf?a(p):p);return h}function ie(e,n){return e.minX=Math.min(e.minX,n.minX),e.minY=Math.min(e.minY,n.minY),e.maxX=Math.max(e.maxX,n.maxX),e.maxY=Math.max(e.maxY,n.maxY),e}function Ve(e,n){return e.minX-n.minX}function Se(e,n){return e.minY-n.minY}function se(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function ue(e){return e.maxX-e.minX+(e.maxY-e.minY)}function ge(e,n){return e.minX<=n.minX&&e.minY<=n.minY&&n.maxX<=e.maxX&&n.maxY<=e.maxY}function pi(e,n){return n.minX<=e.maxX&&n.minY<=e.maxY&&n.maxX>=e.minX&&n.maxY>=e.minY}function ei(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Te(e,n,r,a,h){for(var p,g=[n,r];g.length;)(r=g.pop())-(n=g.pop())<=a||(p=n+Math.ceil((r-n)/a/2)*a,me(e,p,n,r,h),g.push(n,p,p,r))}_e.prototype={all:function(){return this._all(this.data,[])},search:function(e){var n=this.data,r=[],a=this.toBBox;if(!pi(e,n))return r;for(var h,p,g,x,w=[];n;){for(h=0,p=n.children.length;h<p;h++)g=n.children[h],pi(e,x=n.leaf?a(g):g)&&(n.leaf?r.push(g):ge(e,x)?this._all(g,r):w.push(g));n=w.pop()}return r},collides:function(e){var n=this.data,r=this.toBBox;if(!pi(e,n))return!1;for(var a,h,p,g,x=[];n;){for(a=0,h=n.children.length;a<h;a++)if(p=n.children[a],pi(e,g=n.leaf?r(p):p)){if(n.leaf||ge(e,g))return!0;x.push(p)}n=x.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var n=0,r=e.length;n<r;n++)this.insert(e[n]);return this}var a=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var h=this.data;this.data=a,a=h}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=ei([]),this},remove:function(e,n){if(!e)return this;for(var r,a,h,p,g=this.data,x=this.toBBox(e),w=[],S=[];g||w.length;){if(g||(g=w.pop(),a=w[w.length-1],r=S.pop(),p=!0),g.leaf&&(h=re(e,g.children,n))!==-1)return g.children.splice(h,1),w.push(g),this._condense(w),this;p||g.leaf||!ge(g,x)?a?(r++,g=a.children[r],p=!1):g=null:(w.push(g),S.push(r),r=0,a=g,g=g.children[0])}return this},toBBox:function(e){return e},compareMinX:Ve,compareMinY:Se,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,n){for(var r=[];e;)e.leaf?n.push.apply(n,e.children):r.push.apply(r,e.children),e=r.pop();return n},_build:function(e,n,r,a){var h,p=r-n+1,g=this._maxEntries;if(p<=g)return ee(h=ei(e.slice(n,r+1)),this.toBBox),h;a||(a=Math.ceil(Math.log(p)/Math.log(g)),g=Math.ceil(p/Math.pow(g,a-1))),(h=ei([])).leaf=!1,h.height=a;var x,w,S,V,X=Math.ceil(p/g),F=X*Math.ceil(Math.sqrt(g));for(Te(e,n,r,F,this.compareMinX),x=n;x<=r;x+=F)for(Te(e,x,S=Math.min(x+F-1,r),X,this.compareMinY),w=x;w<=S;w+=X)V=Math.min(w+X-1,S),h.children.push(this._build(e,w,V,a-1));return ee(h,this.toBBox),h},_chooseSubtree:function(e,n,r,a){for(var h,p,g,x,w,S,V,X,F,$;a.push(n),!n.leaf&&a.length-1!==r;){for(V=X=1/0,h=0,p=n.children.length;h<p;h++)w=se(g=n.children[h]),F=e,$=g,(S=(Math.max($.maxX,F.maxX)-Math.min($.minX,F.minX))*(Math.max($.maxY,F.maxY)-Math.min($.minY,F.minY))-w)<X?(X=S,V=w<V?w:V,x=g):S===X&&w<V&&(V=w,x=g);n=x||n.children[0]}return n},_insert:function(e,n,r){var a=this.toBBox,h=r?e:a(e),p=[],g=this._chooseSubtree(h,this.data,n,p);for(g.children.push(e),ie(g,h);n>=0&&p[n].children.length>this._maxEntries;)this._split(p,n),n--;this._adjustParentBBoxes(h,p,n)},_split:function(e,n){var r=e[n],a=r.children.length,h=this._minEntries;this._chooseSplitAxis(r,h,a);var p=this._chooseSplitIndex(r,h,a),g=ei(r.children.splice(p,r.children.length-p));g.height=r.height,g.leaf=r.leaf,ee(r,this.toBBox),ee(g,this.toBBox),n?e[n-1].children.push(g):this._splitRoot(r,g)},_splitRoot:function(e,n){this.data=ei([e,n]),this.data.height=e.height+1,this.data.leaf=!1,ee(this.data,this.toBBox)},_chooseSplitIndex:function(e,n,r){var a,h,p,g,x,w,S,V,X,F,$,rt,at,ft;for(w=S=1/0,a=n;a<=r-n;a++)h=Ht(e,0,a,this.toBBox),p=Ht(e,a,r,this.toBBox),X=h,F=p,$=void 0,rt=void 0,at=void 0,ft=void 0,$=Math.max(X.minX,F.minX),rt=Math.max(X.minY,F.minY),at=Math.min(X.maxX,F.maxX),ft=Math.min(X.maxY,F.maxY),g=Math.max(0,at-$)*Math.max(0,ft-rt),x=se(h)+se(p),g<w?(w=g,V=a,S=x<S?x:S):g===w&&x<S&&(S=x,V=a);return V},_chooseSplitAxis:function(e,n,r){var a=e.leaf?this.compareMinX:Ve,h=e.leaf?this.compareMinY:Se;this._allDistMargin(e,n,r,a)<this._allDistMargin(e,n,r,h)&&e.children.sort(a)},_allDistMargin:function(e,n,r,a){e.children.sort(a);var h,p,g=this.toBBox,x=Ht(e,0,n,g),w=Ht(e,r-n,r,g),S=ue(x)+ue(w);for(h=n;h<r-n;h++)p=e.children[h],ie(x,e.leaf?g(p):p),S+=ue(x);for(h=r-n-1;h>=n;h--)p=e.children[h],ie(w,e.leaf?g(p):p),S+=ue(w);return S},_adjustParentBBoxes:function(e,n,r){for(var a=r;a>=0;a--)ie(n[a],e)},_condense:function(e){for(var n,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(n=e[r-1].children).splice(n.indexOf(e[r]),1):this.clear():ee(e[r],this.toBBox)},_initFormat:function(e){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(e[0])),this.compareMinY=new Function("a","b",n.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var oe=_e;function He(e,n,r){if(!Si(r=r||{}))throw new Error("options is invalid");var a=r.bbox,h=r.id;if(e===void 0)throw new Error("geometry is required");if(n&&n.constructor!==Object)throw new Error("properties must be an Object");a&&Ti(a),h&&Oi(h);var p={type:"Feature"};return h&&(p.id=h),a&&(p.bbox=a),p.properties=n||{},p.geometry=e,p}function Ei(e,n,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!mi(e[0])||!mi(e[1]))throw new Error("coordinates must contain numbers");return He({type:"Point",coordinates:e},n,r)}function ii(e,n,r){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!mi(e[0][1])||!mi(e[0][1]))throw new Error("coordinates must contain numbers");return He({type:"LineString",coordinates:e},n,r)}function Qt(e,n){if(!Si(n=n||{}))throw new Error("options is invalid");var r=n.bbox,a=n.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");r&&Ti(r),a&&Oi(a);var h={type:"FeatureCollection"};return a&&(h.id=a),r&&(h.bbox=r),h.features=e,h}function mi(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Si(e){return!!e&&e.constructor===Object}function Ti(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(n){if(!mi(n))throw new Error("bbox must only contain numbers")})}function Oi(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function _i(e,n,r){if(e!==null)for(var a,h,p,g,x,w,S,V,X=0,F=0,$=e.type,rt=$==="FeatureCollection",at=$==="Feature",ft=rt?e.features.length:1,ut=0;ut<ft;ut++){x=(V=!!(S=rt?e.features[ut].geometry:at?e.geometry:e)&&S.type==="GeometryCollection")?S.geometries.length:1;for(var mt=0;mt<x;mt++){var _t=0,ct=0;if((g=V?S.geometries[mt]:S)!==null){w=g.coordinates;var Ot=g.type;switch(X=!r||Ot!=="Polygon"&&Ot!=="MultiPolygon"?0:1,Ot){case null:break;case"Point":if(n(w,F,ut,_t,ct)===!1)return!1;F++,_t++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(n(w[a],F,ut,_t,ct)===!1)return!1;F++,Ot==="MultiPoint"&&_t++}Ot==="LineString"&&_t++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(h=0;h<w[a].length-X;h++){if(n(w[a][h],F,ut,_t,ct)===!1)return!1;F++}Ot==="MultiLineString"&&_t++,Ot==="Polygon"&&ct++}Ot==="Polygon"&&_t++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(Ot==="MultiPolygon"&&(ct=0),h=0;h<w[a].length;h++){for(p=0;p<w[a][h].length-X;p++){if(n(w[a][h][p],F,ut,_t,ct)===!1)return!1;F++}ct++}_t++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(_i(g.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function we(e,n){if(e.type==="Feature")n(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&n(e.features[r],r)!==!1;r++);}function xn(e,n){var r,a,h,p,g,x,w,S,V,X,F=0,$=e.type==="FeatureCollection",rt=e.type==="Feature",at=$?e.features.length:1;for(r=0;r<at;r++){for(x=$?e.features[r].geometry:rt?e.geometry:e,S=$?e.features[r].properties:rt?e.properties:{},V=$?e.features[r].bbox:rt?e.bbox:void 0,X=$?e.features[r].id:rt?e.id:void 0,g=(w=!!x&&x.type==="GeometryCollection")?x.geometries.length:1,h=0;h<g;h++)if((p=w?x.geometries[h]:x)!==null)switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(p,F,S,V,X)===!1)return!1;break;case"GeometryCollection":for(a=0;a<p.geometries.length;a++)if(n(p.geometries[a],F,S,V,X)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,F,S,V,X)===!1)return!1;F++}}function Pn(e,n){xn(e,function(r,a,h,p,g){var x,w=r===null?null:r.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return n(He(r,h,{bbox:p,id:g}),a,0)!==!1&&void 0}switch(w){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon"}for(var S=0;S<r.coordinates.length;S++){var V=r.coordinates[S];if(n(He({type:x,coordinates:V},h),a,S)===!1)return!1}})}function Ki(e){var n=[e[0],e[1]],r=[e[0],e[3]],a=[e[2],e[3]];return{type:"Feature",bbox:e,properties:{},geometry:{type:"Polygon",coordinates:[[n,[e[2],e[1]],a,r,n]]}}}function Wi(e){var n=[1/0,1/0,-1/0,-1/0];return _i(e,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}var Ji=function(e){var n=oe(e);return n.insert=function(r){if(Array.isArray(r)){var a=r;(r=Ki(a)).bbox=a}else r.bbox=r.bbox?r.bbox:Wi(r);return oe.prototype.insert.call(this,r)},n.load=function(r){var a=[];return Array.isArray(r)?r.forEach(function(h){var p=Ki(h);p.bbox=h,a.push(p)}):we(r,function(h){h.bbox=h.bbox?h.bbox:Wi(h),a.push(h)}),oe.prototype.load.call(this,a)},n.remove=function(r){if(Array.isArray(r)){var a=r;(r=Ki(a)).bbox=a}return oe.prototype.remove.call(this,r)},n.clear=function(){return oe.prototype.clear.call(this)},n.search=function(r){return{type:"FeatureCollection",features:oe.prototype.search.call(this,this.toBBox(r))}},n.collides=function(r){return oe.prototype.collides.call(this,this.toBBox(r))},n.all=function(){return{type:"FeatureCollection",features:oe.prototype.all.call(this)}},n.toJSON=function(){return oe.prototype.toJSON.call(this)},n.fromJSON=function(r){return oe.prototype.fromJSON.call(this,r)},n.toBBox=function(r){var a;return{minX:(a=r.bbox?r.bbox:Array.isArray(r)&&r.length===4?r:Wi(r))[0],minY:a[1],maxX:a[2],maxY:a[3]}},n},Vn={meters:63710088e-1,metres:63710088e-1,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:63710088e-1/1852,inches:63710088e-1*39.37,yards:63710088e-1/1.0936,feet:20902260511392e-6,radians:1,degrees:63710088e-1/111325};function Cn(e,n){if(e==null)throw new Error("radians is required");if(n&&typeof n!="string")throw new Error("units must be a string");var r=Vn[n||"kilometers"];if(!r)throw new Error(n+" units is invalid");return e*r}function ni(e){if(e==null)throw new Error("degrees is required");return e%360*Math.PI/180}function Hn(e){return!!e&&e.constructor===Object}function En(e){if(!e)throw new Error("coord is required");if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates;if(Array.isArray(e)&&e.length>=2&&e[0].length===void 0&&e[1].length===void 0)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var Ce=function(e,n,r){if(!Hn(r=r||{}))throw new Error("options is invalid");var a=r.units,h=En(e),p=En(n),g=ni(p[1]-h[1]),x=ni(p[0]-h[0]),w=ni(h[1]),S=ni(p[1]),V=Math.pow(Math.sin(g/2),2)+Math.pow(Math.sin(x/2),2)*Math.cos(w)*Math.cos(S);return Cn(2*Math.atan2(Math.sqrt(V),Math.sqrt(1-V)),a)},Bi=function(e){var n=e[0],r=e[1],a=e[2],h=e[3];if(Ce(e.slice(0,2),[a,r])>=Ce(e.slice(0,2),[n,h])){var p=(r+h)/2;return[n,p-(a-n)/2,a,p+(a-n)/2]}var g=(n+a)/2;return[g-(h-r)/2,r,g+(h-r)/2,h]},ri=function(e){var n=[1/0,1/0,-1/0,-1/0];return _i(e,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n};function qn(e){return!!e&&e.constructor===Object}function Sn(e,n,r){if(e!==null)for(var a,h,p,g,x,w,S,V,X=0,F=0,$=e.type,rt=$==="FeatureCollection",at=$==="Feature",ft=rt?e.features.length:1,ut=0;ut<ft;ut++){x=(V=!!(S=rt?e.features[ut].geometry:at?e.geometry:e)&&S.type==="GeometryCollection")?S.geometries.length:1;for(var mt=0;mt<x;mt++){var _t=0,ct=0;if((g=V?S.geometries[mt]:S)!==null){w=g.coordinates;var Ot=g.type;switch(X=!r||Ot!=="Polygon"&&Ot!=="MultiPolygon"?0:1,Ot){case null:break;case"Point":if(n(w,F,ut,_t,ct)===!1)return!1;F++,_t++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(n(w[a],F,ut,_t,ct)===!1)return!1;F++,Ot==="MultiPoint"&&_t++}Ot==="LineString"&&_t++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(h=0;h<w[a].length-X;h++){if(n(w[a][h],F,ut,_t,ct)===!1)return!1;F++}Ot==="MultiLineString"&&_t++,Ot==="Polygon"&&ct++}Ot==="Polygon"&&_t++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(Ot==="MultiPolygon"&&(ct=0),h=0;h<w[a].length;h++){for(p=0;p<w[a][h].length-X;p++){if(n(w[a][h][p],F,ut,_t,ct)===!1)return!1;F++}ct++}_t++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(Sn(g.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var $i=function(e,n){if(!qn(n=n||{}))throw new Error("options is invalid");var r=n.precision,a=n.coordinates,h=n.mutate;if(r=r==null||isNaN(r)?6:r,a=a==null||isNaN(a)?3:a,!e)throw new Error("<geojson> is required");if(typeof r!="number")throw new Error("<precision> must be a number");if(typeof a!="number")throw new Error("<coordinates> must be a number");h!==!1&&h!==void 0||(e=JSON.parse(JSON.stringify(e)));var p=Math.pow(10,r);return Sn(e,function(g){(function(x,w,S){x.length>S&&x.splice(S,x.length);for(var V=0;V<x.length;V++)x[V]=Math.round(x[V]*w)/w})(g,p,a)}),e};function qe(e){if(!e)throw new Error("coord is required");if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates;if(Array.isArray(e)&&e.length>=2&&e[0].length===void 0&&e[1].length===void 0)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Oe(e){if(!e)throw new Error("coords is required");if(e.type==="Feature"&&e.geometry!==null)return e.geometry.coordinates;if(e.coordinates)return e.coordinates;if(Array.isArray(e))return e;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Qi(e,n){if(!e)throw new Error((n||"geojson")+" is required");if(e.geometry&&e.geometry.type)return e.geometry.type;if(e.type)return e.type;throw new Error((n||"geojson")+" is invalid")}var Ye=function(e){if(!e)throw new Error("geojson is required");var n=[];return Pn(e,function(r){(function(a,h){var p=[],g=a.geometry;switch(g.type){case"Polygon":p=Oe(g);break;case"LineString":p=[Oe(g)]}p.forEach(function(x){(function(w,S){var V=[];return w.reduce(function(X,F){var $,rt,at,ft,ut,mt,_t=ii([X,F],S);return _t.bbox=(rt=F,at=($=X)[0],ft=$[1],ut=rt[0],mt=rt[1],[at<ut?at:ut,ft<mt?ft:mt,at>ut?at:ut,ft>mt?ft:mt]),V.push(_t),F}),V})(x,a.properties).forEach(function(w){w.id=h.length,h.push(w)})})})(r,n)}),Qt(n)};function St(e,n){var r=Oe(e),a=Oe(n);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var h=r[0][0],p=r[0][1],g=r[1][0],x=r[1][1],w=a[0][0],S=a[0][1],V=a[1][0],X=a[1][1],F=(X-S)*(g-h)-(V-w)*(x-p),$=(V-w)*(p-S)-(X-S)*(h-w),rt=(g-h)*(p-S)-(x-p)*(h-w);if(F===0)return null;var at=$/F,ft=rt/F;return at>=0&&at<=1&&ft>=0&&ft<=1?Ei([h+at*(g-h),p+at*(x-p)]):null}var qt=function(e,n){var r={},a=[];if(e.type==="LineString"&&(e=He(e)),n.type==="LineString"&&(n=He(n)),e.type==="Feature"&&n.type==="Feature"&&e.geometry.type==="LineString"&&n.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&n.geometry.coordinates.length===2){var h=St(e,n);return h&&a.push(h),Qt(a)}var p=Ji();return p.load(Ye(n)),we(Ye(e),function(g){we(p.search(g),function(x){var w=St(g,x);if(w){var S=Oe(w).join(",");r[S]||(r[S]=!0,a.push(w))}})}),Qt(a)};function Ri(e){if(e==null)throw new Error("radians is required");return 180*(e%(2*Math.PI))/Math.PI}function Be(e){if(e==null)throw new Error("degrees is required");return e%360*Math.PI/180}function oi(e){return!!e&&e.constructor===Object}function Ii(e){if(!e)throw new Error("coord is required");if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates;if(Array.isArray(e)&&e.length>=2&&e[0].length===void 0&&e[1].length===void 0)return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function kt(e,n,r){if(!oi(r=r||{}))throw new Error("options is invalid");if(r.final===!0)return function(X,F){var $=kt(F,X);return $=($+180)%360}(e,n);var a=Ii(e),h=Ii(n),p=Be(a[0]),g=Be(h[0]),x=Be(a[1]),w=Be(h[1]),S=Math.sin(g-p)*Math.cos(w),V=Math.cos(x)*Math.sin(w)-Math.sin(x)*Math.cos(w)*Math.cos(g-p);return Ri(Math.atan2(S,V))}var Kt=kt,tn={meters:63710088e-1,metres:63710088e-1,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:63710088e-1/1852,inches:63710088e-1*39.37,yards:63710088e-1/1.0936,feet:20902260511392e-6,radians:1,degrees:63710088e-1/111325};function Di(e,n,r){if(!Ie(r=r||{}))throw new Error("options is invalid");var a=r.bbox,h=r.id;if(e===void 0)throw new Error("geometry is required");if(n&&n.constructor!==Object)throw new Error("properties must be an Object");a&&yi(a),h&&vi(h);var p={type:"Feature"};return h&&(p.id=h),a&&(p.bbox=a),p.properties=n||{},p.geometry=e,p}function ye(e,n,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Wt(e[0])||!Wt(e[1]))throw new Error("coordinates must contain numbers");return Di({type:"Point",coordinates:e},n,r)}function Yn(e,n){if(e==null)throw new Error("distance is required");if(n&&typeof n!="string")throw new Error("units must be a string");var r=tn[n||"kilometers"];if(!r)throw new Error(n+" units is invalid");return e/r}function gi(e){if(e==null)throw new Error("radians is required");return 180*(e%(2*Math.PI))/Math.PI}function Re(e){if(e==null)throw new Error("degrees is required");return e%360*Math.PI/180}function Wt(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Ie(e){return!!e&&e.constructor===Object}function yi(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(n){if(!Wt(n))throw new Error("bbox must only contain numbers")})}function vi(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}var Ai=function(e,n,r,a){if(!Ie(a=a||{}))throw new Error("options is invalid");var h=a.units,p=a.properties,g=function(F){if(!F)throw new Error("coord is required");if(F.type==="Feature"&&F.geometry!==null&&F.geometry.type==="Point")return F.geometry.coordinates;if(F.type==="Point")return F.coordinates;if(Array.isArray(F)&&F.length>=2&&F[0].length===void 0&&F[1].length===void 0)return F;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(e),x=Re(g[0]),w=Re(g[1]),S=Re(r),V=Yn(n,h),X=Math.asin(Math.sin(w)*Math.cos(V)+Math.cos(w)*Math.sin(V)*Math.cos(S));return ye([gi(x+Math.atan2(Math.sin(S)*Math.sin(V)*Math.cos(w),Math.cos(V)-Math.sin(w)*Math.sin(X))),gi(X)],p)};function De(e,n,r){var a=e[n];e[n]=e[r],e[r]=a}function en(e,n){return e<n?-1:e>n?1:0}var nn=function(e,n,r,a,h){(function p(g,x,w,S,V){for(;S>w;){if(S-w>600){var X=S-w+1,F=x-w+1,$=Math.log(X),rt=.5*Math.exp(2*$/3),at=.5*Math.sqrt($*rt*(X-rt)/X)*(F-X/2<0?-1:1),ft=Math.max(w,Math.floor(x-F*rt/X+at)),ut=Math.min(S,Math.floor(x+(X-F)*rt/X+at));p(g,x,ft,ut,V)}var mt=g[x],_t=w,ct=S;for(De(g,w,x),V(g[S],mt)>0&&De(g,w,S);_t<ct;){for(De(g,_t,ct),_t++,ct--;V(g[_t],mt)<0;)_t++;for(;V(g[ct],mt)>0;)ct--}V(g[w],mt)===0?De(g,w,ct):(ct++,De(g,ct,S)),ct<=x&&(w=ct+1),x<=ct&&(S=ct-1)}})(e,n,r||0,a||e.length-1,h||en)};function Xe(e,n){if(!(this instanceof Xe))return new Xe(e,n);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&this._initFormat(n),this.clear()}function rn(e,n,r){if(!r)return n.indexOf(e);for(var a=0;a<n.length;a++)if(r(e,n[a]))return a;return-1}function Ne(e,n){je(e,0,e.children.length,n,e)}function je(e,n,r,a,h){h||(h=Ge(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(var p,g=n;g<r;g++)p=e.children[g],ai(h,e.leaf?a(p):p);return h}function ai(e,n){return e.minX=Math.min(e.minX,n.minX),e.minY=Math.min(e.minY,n.minY),e.maxX=Math.max(e.maxX,n.maxX),e.maxY=Math.max(e.maxY,n.maxY),e}function zi(e,n){return e.minX-n.minX}function Tn(e,n){return e.minY-n.minY}function Ct(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function le(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Yt(e,n){return e.minX<=n.minX&&e.minY<=n.minY&&n.maxX<=e.maxX&&n.maxY<=e.maxY}function bi(e,n){return n.minX<=e.maxX&&n.minY<=e.maxY&&n.maxX>=e.minX&&n.maxY>=e.minY}function Ge(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Li(e,n,r,a,h){for(var p,g=[n,r];g.length;)(r=g.pop())-(n=g.pop())<=a||(p=n+Math.ceil((r-n)/a/2)*a,nn(e,p,n,r,h),g.push(n,p,p,r))}Xe.prototype={all:function(){return this._all(this.data,[])},search:function(e){var n=this.data,r=[],a=this.toBBox;if(!bi(e,n))return r;for(var h,p,g,x,w=[];n;){for(h=0,p=n.children.length;h<p;h++)g=n.children[h],bi(e,x=n.leaf?a(g):g)&&(n.leaf?r.push(g):Yt(e,x)?this._all(g,r):w.push(g));n=w.pop()}return r},collides:function(e){var n=this.data,r=this.toBBox;if(!bi(e,n))return!1;for(var a,h,p,g,x=[];n;){for(a=0,h=n.children.length;a<h;a++)if(p=n.children[a],bi(e,g=n.leaf?r(p):p)){if(n.leaf||Yt(e,g))return!0;x.push(p)}n=x.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var n=0,r=e.length;n<r;n++)this.insert(e[n]);return this}var a=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var h=this.data;this.data=a,a=h}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=Ge([]),this},remove:function(e,n){if(!e)return this;for(var r,a,h,p,g=this.data,x=this.toBBox(e),w=[],S=[];g||w.length;){if(g||(g=w.pop(),a=w[w.length-1],r=S.pop(),p=!0),g.leaf&&(h=rn(e,g.children,n))!==-1)return g.children.splice(h,1),w.push(g),this._condense(w),this;p||g.leaf||!Yt(g,x)?a?(r++,g=a.children[r],p=!1):g=null:(w.push(g),S.push(r),r=0,a=g,g=g.children[0])}return this},toBBox:function(e){return e},compareMinX:zi,compareMinY:Tn,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,n){for(var r=[];e;)e.leaf?n.push.apply(n,e.children):r.push.apply(r,e.children),e=r.pop();return n},_build:function(e,n,r,a){var h,p=r-n+1,g=this._maxEntries;if(p<=g)return Ne(h=Ge(e.slice(n,r+1)),this.toBBox),h;a||(a=Math.ceil(Math.log(p)/Math.log(g)),g=Math.ceil(p/Math.pow(g,a-1))),(h=Ge([])).leaf=!1,h.height=a;var x,w,S,V,X=Math.ceil(p/g),F=X*Math.ceil(Math.sqrt(g));for(Li(e,n,r,F,this.compareMinX),x=n;x<=r;x+=F)for(Li(e,x,S=Math.min(x+F-1,r),X,this.compareMinY),w=x;w<=S;w+=X)V=Math.min(w+X-1,S),h.children.push(this._build(e,w,V,a-1));return Ne(h,this.toBBox),h},_chooseSubtree:function(e,n,r,a){for(var h,p,g,x,w,S,V,X,F,$;a.push(n),!n.leaf&&a.length-1!==r;){for(V=X=1/0,h=0,p=n.children.length;h<p;h++)w=Ct(g=n.children[h]),F=e,$=g,(S=(Math.max($.maxX,F.maxX)-Math.min($.minX,F.minX))*(Math.max($.maxY,F.maxY)-Math.min($.minY,F.minY))-w)<X?(X=S,V=w<V?w:V,x=g):S===X&&w<V&&(V=w,x=g);n=x||n.children[0]}return n},_insert:function(e,n,r){var a=this.toBBox,h=r?e:a(e),p=[],g=this._chooseSubtree(h,this.data,n,p);for(g.children.push(e),ai(g,h);n>=0&&p[n].children.length>this._maxEntries;)this._split(p,n),n--;this._adjustParentBBoxes(h,p,n)},_split:function(e,n){var r=e[n],a=r.children.length,h=this._minEntries;this._chooseSplitAxis(r,h,a);var p=this._chooseSplitIndex(r,h,a),g=Ge(r.children.splice(p,r.children.length-p));g.height=r.height,g.leaf=r.leaf,Ne(r,this.toBBox),Ne(g,this.toBBox),n?e[n-1].children.push(g):this._splitRoot(r,g)},_splitRoot:function(e,n){this.data=Ge([e,n]),this.data.height=e.height+1,this.data.leaf=!1,Ne(this.data,this.toBBox)},_chooseSplitIndex:function(e,n,r){var a,h,p,g,x,w,S,V,X,F,$,rt,at,ft;for(w=S=1/0,a=n;a<=r-n;a++)h=je(e,0,a,this.toBBox),p=je(e,a,r,this.toBBox),X=h,F=p,$=void 0,rt=void 0,at=void 0,ft=void 0,$=Math.max(X.minX,F.minX),rt=Math.max(X.minY,F.minY),at=Math.min(X.maxX,F.maxX),ft=Math.min(X.maxY,F.maxY),g=Math.max(0,at-$)*Math.max(0,ft-rt),x=Ct(h)+Ct(p),g<w?(w=g,V=a,S=x<S?x:S):g===w&&x<S&&(S=x,V=a);return V},_chooseSplitAxis:function(e,n,r){var a=e.leaf?this.compareMinX:zi,h=e.leaf?this.compareMinY:Tn;this._allDistMargin(e,n,r,a)<this._allDistMargin(e,n,r,h)&&e.children.sort(a)},_allDistMargin:function(e,n,r,a){e.children.sort(a);var h,p,g=this.toBBox,x=je(e,0,n,g),w=je(e,r-n,r,g),S=le(x)+le(w);for(h=n;h<r-n;h++)p=e.children[h],ai(x,e.leaf?g(p):p),S+=le(x);for(h=r-n-1;h>=n;h--)p=e.children[h],ai(w,e.leaf?g(p):p),S+=le(w);return S},_adjustParentBBoxes:function(e,n,r){for(var a=r;a>=0;a--)ai(n[a],e)},_condense:function(e){for(var n,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(n=e[r-1].children).splice(n.indexOf(e[r]),1):this.clear():Ne(e[r],this.toBBox)},_initFormat:function(e){var n=["return a"," - b",";"];this.compareMinX=new Function("a","b",n.join(e[0])),this.compareMinY=new Function("a","b",n.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};var ve=Xe;function be(e,n,r){if(!Ni(r=r||{}))throw new Error("options is invalid");var a=r.bbox,h=r.id;if(e===void 0)throw new Error("geometry is required");if(n&&n.constructor!==Object)throw new Error("properties must be an Object");a&&On(a),h&&on(h);var p={type:"Feature"};return h&&(p.id=h),a&&(p.bbox=a),p.properties=n||{},p.geometry=e,p}function si(e,n,r){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ce(e[0])||!ce(e[1]))throw new Error("coordinates must contain numbers");return be({type:"Point",coordinates:e},n,r)}function Ke(e,n,r){if(!e)throw new Error("coordinates is required");if(e.length<2)throw new Error("coordinates must be an array of two or more positions");if(!ce(e[0][1])||!ce(e[0][1]))throw new Error("coordinates must contain numbers");return be({type:"LineString",coordinates:e},n,r)}function he(e,n){if(!Ni(n=n||{}))throw new Error("options is invalid");var r=n.bbox,a=n.id;if(!e)throw new Error("No features passed");if(!Array.isArray(e))throw new Error("features must be an Array");r&&On(r),a&&on(a);var h={type:"FeatureCollection"};return a&&(h.id=a),r&&(h.bbox=r),h.features=e,h}function ce(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Ni(e){return!!e&&e.constructor===Object}function On(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(n){if(!ce(n))throw new Error("bbox must only contain numbers")})}function on(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}function ji(e,n,r){if(e!==null)for(var a,h,p,g,x,w,S,V,X=0,F=0,$=e.type,rt=$==="FeatureCollection",at=$==="Feature",ft=rt?e.features.length:1,ut=0;ut<ft;ut++){x=(V=!!(S=rt?e.features[ut].geometry:at?e.geometry:e)&&S.type==="GeometryCollection")?S.geometries.length:1;for(var mt=0;mt<x;mt++){var _t=0,ct=0;if((g=V?S.geometries[mt]:S)!==null){w=g.coordinates;var Ot=g.type;switch(X=!r||Ot!=="Polygon"&&Ot!=="MultiPolygon"?0:1,Ot){case null:break;case"Point":if(n(w,F,ut,_t,ct)===!1)return!1;F++,_t++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(n(w[a],F,ut,_t,ct)===!1)return!1;F++,Ot==="MultiPoint"&&_t++}Ot==="LineString"&&_t++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(h=0;h<w[a].length-X;h++){if(n(w[a][h],F,ut,_t,ct)===!1)return!1;F++}Ot==="MultiLineString"&&_t++,Ot==="Polygon"&&ct++}Ot==="Polygon"&&_t++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(Ot==="MultiPolygon"&&(ct=0),h=0;h<w[a].length;h++){for(p=0;p<w[a][h].length-X;p++){if(n(w[a][h][p],F,ut,_t,ct)===!1)return!1;F++}ct++}_t++}break;case"GeometryCollection":for(a=0;a<g.geometries.length;a++)if(ji(g.geometries[a],n,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Mi(e,n){if(e.type==="Feature")n(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&n(e.features[r],r)!==!1;r++);}function an(e,n){var r,a,h,p,g,x,w,S,V,X,F=0,$=e.type==="FeatureCollection",rt=e.type==="Feature",at=$?e.features.length:1;for(r=0;r<at;r++){for(x=$?e.features[r].geometry:rt?e.geometry:e,S=$?e.features[r].properties:rt?e.properties:{},V=$?e.features[r].bbox:rt?e.bbox:void 0,X=$?e.features[r].id:rt?e.id:void 0,g=(w=!!x&&x.type==="GeometryCollection")?x.geometries.length:1,h=0;h<g;h++)if((p=w?x.geometries[h]:x)!==null)switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(n(p,F,S,V,X)===!1)return!1;break;case"GeometryCollection":for(a=0;a<p.geometries.length;a++)if(n(p.geometries[a],F,S,V,X)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(n(null,F,S,V,X)===!1)return!1;F++}}function ki(e,n){an(e,function(r,a,h,p,g){var x,w=r===null?null:r.type;switch(w){case null:case"Point":case"LineString":case"Polygon":return n(be(r,h,{bbox:p,id:g}),a,0)!==!1&&void 0}switch(w){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon"}for(var S=0;S<r.coordinates.length;S++){var V=r.coordinates[S];if(n(be({type:x,coordinates:V},h),a,S)===!1)return!1}})}function sn(e){var n=[e[0],e[1]],r=[e[0],e[3]],a=[e[2],e[3]];return{type:"Feature",bbox:e,properties:{},geometry:{type:"Polygon",coordinates:[[n,[e[2],e[1]],a,r,n]]}}}function Gi(e){var n=[1/0,1/0,-1/0,-1/0];return ji(e,function(r){n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}var Tt=function(e){var n=ve(e);return n.insert=function(r){if(Array.isArray(r)){var a=r;(r=sn(a)).bbox=a}else r.bbox=r.bbox?r.bbox:Gi(r);return ve.prototype.insert.call(this,r)},n.load=function(r){var a=[];return Array.isArray(r)?r.forEach(function(h){var p=sn(h);p.bbox=h,a.push(p)}):Mi(r,function(h){h.bbox=h.bbox?h.bbox:Gi(h),a.push(h)}),ve.prototype.load.call(this,a)},n.remove=function(r){if(Array.isArray(r)){var a=r;(r=sn(a)).bbox=a}return ve.prototype.remove.call(this,r)},n.clear=function(){return ve.prototype.clear.call(this)},n.search=function(r){return{type:"FeatureCollection",features:ve.prototype.search.call(this,this.toBBox(r))}},n.collides=function(r){return ve.prototype.collides.call(this,this.toBBox(r))},n.all=function(){return{type:"FeatureCollection",features:ve.prototype.all.call(this)}},n.toJSON=function(){return ve.prototype.toJSON.call(this)},n.fromJSON=function(r){return ve.prototype.fromJSON.call(this,r)},n.toBBox=function(r){var a;return{minX:(a=r.bbox?r.bbox:Array.isArray(r)&&r.length===4?r:Gi(r))[0],minY:a[1],maxX:a[2],maxY:a[3]}},n};function li(e){if(!e)throw new Error("coords is required");if(e.type==="Feature"&&e.geometry!==null)return e.geometry.coordinates;if(e.coordinates)return e.coordinates;if(Array.isArray(e))return e;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}var Le=function(e){if(!e)throw new Error("geojson is required");var n=[];return ki(e,function(r){(function(a,h){var p=[],g=a.geometry;switch(g.type){case"Polygon":p=li(g);break;case"LineString":p=[li(g)]}p.forEach(function(x){(function(w,S){var V=[];return w.reduce(function(X,F){var $,rt,at,ft,ut,mt,_t=Ke([X,F],S);return _t.bbox=(rt=F,at=($=X)[0],ft=$[1],ut=rt[0],mt=rt[1],[at<ut?at:ut,ft<mt?ft:mt,at>ut?at:ut,ft>mt?ft:mt]),V.push(_t),F}),V})(x,a.properties).forEach(function(w){w.id=h.length,h.push(w)})})})(r,n)}),he(n)};function hi(e,n){var r=li(e),a=li(n);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(a.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var h=r[0][0],p=r[0][1],g=r[1][0],x=r[1][1],w=a[0][0],S=a[0][1],V=a[1][0],X=a[1][1],F=(X-S)*(g-h)-(V-w)*(x-p),$=(V-w)*(p-S)-(X-S)*(h-w),rt=(g-h)*(p-S)-(x-p)*(h-w);if(F===0)return null;var at=$/F,ft=rt/F;return at>=0&&at<=1&&ft>=0&&ft<=1?si([h+at*(g-h),p+at*(x-p)]):null}var Bn=function(e,n){var r={},a=[];if(e.type==="LineString"&&(e=be(e)),n.type==="LineString"&&(n=be(n)),e.type==="Feature"&&n.type==="Feature"&&e.geometry.type==="LineString"&&n.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&n.geometry.coordinates.length===2){var h=hi(e,n);return h&&a.push(h),he(a)}var p=Tt();return p.load(Le(n)),Mi(Le(e),function(g){Mi(p.search(g),function(x){var w=hi(g,x);if(w){var S=li(w).join(",");r[S]||(r[S]=!0,a.push(w))}})}),he(a)},Xn=function(e,n,r){if(!Ni(r=r||{}))throw new Error("options is invalid");var a=e.geometry?e.geometry.type:e.type;if(a!=="LineString"&&a!=="MultiLineString")throw new Error("lines must be LineString or MultiLineString");var h=si([1/0,1/0],{dist:1/0}),p=0;return ki(e,function(g){for(var x=li(g),w=0;w<x.length-1;w++){var S=si(x[w]);S.properties.dist=Ce(n,S,r);var V=si(x[w+1]);V.properties.dist=Ce(n,V,r);var X=Ce(S,V,r),F=Math.max(S.properties.dist,V.properties.dist),$=Kt(S,V),rt=Ai(n,F,$+90,r),at=Ai(n,F,$-90,r),ft=Bn(Ke([rt.geometry.coordinates,at.geometry.coordinates]),Ke([S.geometry.coordinates,V.geometry.coordinates])),ut=null;ft.features.length>0&&((ut=ft.features[0]).properties.dist=Ce(n,ut,r),ut.properties.location=p+Ce(S,ut,r)),S.properties.dist<h.properties.dist&&((h=S).properties.index=w,h.properties.location=p),V.properties.dist<h.properties.dist&&((h=V).properties.index=w+1,h.properties.location=p+X),ut&&ut.properties.dist<h.properties.dist&&((h=ut).properties.index=w),p+=X}}),h};function Zi(e,n){var r=[],a=Ji();return Pn(n,function(h){if(r.forEach(function(x,w){x.id=w}),r.length){var p=a.search(h);if(p.features.length){var g=hn(h,p);r=r.filter(function(x){return x.id!==g.id}),a.remove(g),we(ln(g,h),function(x){r.push(x),a.insert(x)})}}else(r=ln(e,h).features).forEach(function(x){x.bbox||(x.bbox=Bi(ri(x)))}),a.load(Qt(r))}),Qt(r)}function ln(e,n){var r=[],a=Oe(e)[0],h=Oe(e)[e.geometry.coordinates.length-1];if(un(a,qe(n))||un(h,qe(n)))return Qt([e]);var p=Ji(),g=Ye(e);p.load(g);var x=p.search(n);if(!x.features.length)return Qt([e]);var w=hn(n,x),S=function(V,X,F){var $=F;return we(V,function(rt,at){$=at===0&&F===void 0?rt:X($,rt,at)}),$}(g,function(V,X,F){var $=Oe(X)[1],rt=qe(n);return F===w.id?(V.push(rt),r.push(ii(V)),un(rt,$)?[rt]:[rt,$]):(V.push($),V)},[a]);return S.length>1&&r.push(ii(S)),Qt(r)}function hn(e,n){if(!n.features.length)throw new Error("lines must contain features");if(n.features.length===1)return n.features[0];var r,a=1/0;return we(n,function(h){var p=Xn(h,e).properties.dist;p<a&&(r=h,a=p)}),r}function un(e,n){return e[0]===n[0]&&e[1]===n[1]}var cn=function(e,n){if(!e)throw new Error("line is required");if(!n)throw new Error("splitter is required");var r=Qi(e),a=Qi(n);if(r!=="LineString")throw new Error("line must be LineString");if(a==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(a==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var h=$i(n,{precision:7});switch(a){case"Point":return ln(e,h);case"MultiPoint":return Zi(e,h);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Zi(e,qt(e,h))}},Kn=l(67),Ee=l.n(Kn),Wn=l(27),fn=l.n(Wn);function wi(e){var n={type:"Feature"};return n.geometry=e,n}function ui(e){return e.type==="Feature"?e.geometry:e}function Ze(e){return e.geometry.coordinates}function dn(e){return wi({type:"Polygon",coordinates:e})}function pn(e){return wi({type:"MultiPolygon",coordinates:e})}function Jn(e){e instanceof L.Polyline&&(e=e.toGeoJSON(15));var n=Ze(e),r=function h(p){return Array.isArray(p)?1+h(p[0]):-1}(n),a=[];return r>1?n.forEach(function(h){a.push(function(p){return wi({type:"LineString",coordinates:p})}(h))}):a.push(e),a}function $n(e){var n=[];return e.eachLayer(function(r){n.push(Ze(r.toGeoJSON(15)))}),function(r){return wi({type:"MultiLineString",coordinates:r})}(n)}function mn(e,n){return function(r){if(Array.isArray(r))return r}(e)||function(r,a){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(r)))){var h=[],p=!0,g=!1,x=void 0;try{for(var w,S=r[Symbol.iterator]();!(p=(w=S.next()).done)&&(h.push(w.value),!a||h.length!==a);p=!0);}catch(V){g=!0,x=V}finally{try{p||S.return==null||S.return()}finally{if(g)throw x}}return h}}(e,n)||function(r,a){if(!!r){if(typeof r=="string")return Rn(r,a);var h=Object.prototype.toString.call(r).slice(8,-1);if(h==="Object"&&r.constructor&&(h=r.constructor.name),h==="Map"||h==="Set")return Array.from(r);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Rn(r,a)}}(e,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Rn(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=e[r];return a}tt.Cut=tt.Polygon.extend({initialize:function(e){this._map=e,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var e=this;if(this._editedLayers=[],this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect)){var n=this._layer.getLatLngs(),r=L.polygon(n,this.options.pathOptions);r._latlngInfos=this._layer._latlngInfo,this.cut(r),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(a){var h=a.layer,p=a.originalLayer;e._fireCut(p,h,p),e._fireCut(e._map,h,p),p.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}},cut:function(e){var n=this,r=this._map._layers,a=e._latlngInfos||[];Object.keys(r).map(function(h){return r[h]}).filter(function(h){return h.pm}).filter(function(h){return!h._pmTempLayer}).filter(function(h){return!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1}).filter(function(h){return h instanceof L.Polyline}).filter(function(h){return h!==e}).filter(function(h){return h.pm.options.allowCutting}).filter(function(h){return!(n.options.layersToCut&&L.Util.isArray(n.options.layersToCut)&&n.options.layersToCut.length>0)||n.options.layersToCut.indexOf(h)>-1}).filter(function(h){return!n._layerGroup.hasLayer(h)}).filter(function(h){try{var p=!!Ft()(e.toGeoJSON(15),h.toGeoJSON(15)).features.length>0;return p||h instanceof L.Polyline&&!(h instanceof L.Polygon)?p:(g=e.toGeoJSON(15),x=h.toGeoJSON(15),w=ui(g),S=ui(x),!((V=fn.a.intersection(w.coordinates,S.coordinates)).length===0||!(V.length===1?dn(V[0]):pn(V))))}catch{return h instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var g,x,w,S,V}).forEach(function(h){var p;if(h instanceof L.Polygon){var g=(p=L.polygon(h.getLatLngs())).getLatLngs();a.forEach(function(F){if(F&&F.snapInfo){var $=F.latlng,rt=n._calcClosestLayer($,[p]);if(rt&&rt.segment&&rt.distance<n.options.snapDistance){var at=rt.segment;if(at&&at.length===2){var ft=L.PM.Utils._getIndexFromSegment(g,at),ut=ft.indexPath,mt=ft.parentPath,_t=ft.newIndex;(ut.length>1?At()(g,mt):g).splice(_t,0,$)}}}})}else p=h;var x=n._cutLayer(e,p),w=L.geoJSON(x,h.options);if(w.getLayers().length===1){var S=w.getLayers();w=mn(S,1)[0]}n._setPane(w,"layerPane");var V=w.addTo(n._map.pm._getContainingLayer());if(V.pm.enable(h.pm.options),V.pm.disable(),h._pmTempLayer=!0,e._pmTempLayer=!0,h.remove(),h.removeFrom(n._map.pm._getContainingLayer()),e.remove(),e.removeFrom(n._map.pm._getContainingLayer()),V.getLayers&&V.getLayers().length===0&&n._map.pm.removeLayer({target:V}),V instanceof L.LayerGroup&&V.eachLayer(function(F){n._addDrawnLayerProp(F)}),n._addDrawnLayerProp(V),n.options.layersToCut&&L.Util.isArray(n.options.layersToCut)&&n.options.layersToCut.length>0){var X=n.options.layersToCut.indexOf(h);X>-1&&n.options.layersToCut.splice(X,1)}n._editedLayers.push({layer:V,originalLayer:h})})},_cutLayer:function(e,n){var r,a,h,p,g,x,w=L.geoJSON();if(n instanceof L.Polygon)a=n.toGeoJSON(15),h=e.toGeoJSON(15),p=ui(a),g=ui(h),r=(x=fn.a.difference(p.coordinates,g.coordinates)).length===0?null:x.length===1?dn(x[0]):pn(x);else{var S=Jn(n);S.forEach(function(V){var X=cn(V,e.toGeoJSON(15));(X&&X.features.length>0?L.geoJSON(X):L.geoJSON(V)).getLayers().forEach(function(F){Ee()(e.toGeoJSON(15),F.toGeoJSON(15))||F.addTo(w)})}),r=S.length>1?$n(w):w.toGeoJSON(15)}return r}});var In={enableLayerDrag:function(){var e;if(this.options.draggable){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,((e=this._layer._map)===null||e===void 0?void 0:e.options.preferCanvas)?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var n=this._layer instanceof L.Marker?this._layer._icon:this._layer._path;n&&L.DomEvent.on(n,"touchstart mousedown",this._simulateMouseDownEvent,this)}},disableLayerDrag:function(){var e;this._layerDragEnabled=!1,((e=this._layer._map)===null||e===void 0?void 0:e.options.preferCanvas)?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var n=this._layer instanceof L.Marker?this._layer._icon:this._layer._path;n&&L.DomEvent.off(n,"touchstart mousedown",this._simulateMouseDownEvent,this)},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(e){var n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseDown(n),!1},_simulateMouseMoveEvent:function(e){var n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseMove(n),!1},_simulateMouseUpEvent:function(e){var n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseUp(n),!1},_dragMixinOnMouseDown:function(e){if(!(e.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(e);var n=e._fromLayerSync,r=this._syncLayers("_dragMixinOnMouseDown",e);this._layer instanceof L.Marker&&(!this.options.snappable||n||r?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||n||r?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=e.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(e){this._overwriteEventIfItComesFromMarker(e);var n=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",e),this._dragging||(this._dragging=!0,L.DomUtil.addClass(n,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._layer._map.dragging.disable(),this._fireDragStart()),this._onLayerDrag(e),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(e){var n=this,r=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",e),this._originalMapDragState&&this._layer._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),window.setTimeout(function(){n._dragging=!1,L.DomUtil.removeClass(r,"leaflet-pm-dragging"),n._fireDragEnd(),n._fireEdit(),n._layerEdited=!0},10),!0)},_onLayerDrag:function(e){var n=e.latlng,r=n.lat-this._tempDragCoord.lat,a=n.lng-this._tempDragCoord.lng,h=function V(X){return X.map(function(F){return Array.isArray(F)?V(F):{lat:F.lat+r,lng:F.lng+a}})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var p=h([this._layer.getLatLng()]);this._layer.setLatLng(p[0])}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var g=this._layer.getLatLng();this._layer._snapped&&(g=this._layer._orgLatLng);var x=h([g]);this._layer.setLatLng(x[0])}else if(this._layer instanceof L.ImageOverlay){var w=h([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(w)}else{var S=h(this._layer.getLatLngs());this._layer.setLatLngs(S)}this._tempDragCoord=n,e.layer=this._layer,this._fireDrag(e)},addDraggingClass:function(){var e=this._getDOMElem();e&&L.DomUtil.addClass(e,"leaflet-pm-draggable")},removeDraggingClass:function(){var e=this._getDOMElem();e&&L.DomUtil.removeClass(e,"leaflet-pm-draggable")},_getDOMElem:function(){var e=null;return this._layer._path?e=this._layer._path:this._layer._renderer&&this._layer._renderer._container?e=this._layer._renderer._container:this._layer._image?e=this._layer._image:this._layer._icon&&(e=this._layer._icon),e},_overwriteEventIfItComesFromMarker:function(e){e.target.getLatLng&&(!e.target._radius||e.target._radius<=10)&&(e.containerPoint=this._map.mouseEventToContainerPoint(e.originalEvent),e.latlng=this._map.containerPointToLatLng(e.containerPoint))},_syncLayers:function(e,n){var r=this;if(this.enabled())return!1;if(!n._fromLayerSync&&this._layer===n.target&&this.options.syncLayersOnDrag){n._fromLayerSync=!0;var a=[];if(L.Util.isArray(this.options.syncLayersOnDrag))a=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(g){g instanceof L.LayerGroup&&(a=a.concat(g.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var h in this._parentLayerGroup){var p=this._parentLayerGroup[h];p.pm&&(a=p.pm.getLayers(!0))}return L.Util.isArray(a)&&a.length>0&&(a=a.filter(function(g){return!!g.pm}).filter(function(g){return!!g.pm.options.draggable})).forEach(function(g){g!==r._layer&&g.pm[e]&&(g._snapped=!1,g.pm[e](n))}),a.length>0}return!1},_stopDOMImageDrag:function(e){return e.preventDefault(),!1}};function We(e,n){n instanceof L.Layer&&(n=n.getLatLng());var r=e.getMaxZoom();return r===1/0&&(r=e.getZoom()),e.project(n,r)}function Je(e,n){var r=e.getMaxZoom();return r===1/0&&(r=e.getZoom()),e.unproject(n,r)}var $e={_onRotateStart:function(e){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=We(this._map,this._rotationOriginLatLng),this._rotationStartPoint=We(this._map,e.target.getLatLng()),this._initialRotateLatLng=Gt(this._layer),this._startAngle=this.getAngle();var n=Gt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,n),this._fireRotationStart(this._map,n)},_onRotate:function(e){var n=We(this._map,e.target.getLatLng()),r=this._rotationStartPoint,a=this._rotationOriginPoint,h=Math.atan2(n.y-a.y,n.x-a.x)-Math.atan2(r.y-a.y,r.x-a.x);this._layer.setLatLngs(this._rotateLayer(h,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var p=this;(function S(V){var X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(F>-1&&X.push(F),L.Util.isArray(V[0]))V.forEach(function(rt,at){return S(rt,X.slice(),at)});else{var $=At()(p._markers,X);V.forEach(function(rt,at){$[at].setLatLng(rt)})}})(this._layer.getLatLngs());var g=Gt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(h,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var x=180*h/Math.PI,w=(x=x<0?x+360:x)+this._startAngle;this._setAngle(w),this._rotationLayer.pm._setAngle(w),this._fireRotation(this._rotationLayer,x,g),this._fireRotation(this._map,x,g)},_onRotateEnd:function(){var e=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var n=Gt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Gt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,e,n),this._fireRotationEnd(this._map,e,n),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1)},_rotateLayer:function(e,n,r,a,h){var p=We(h,r);return this._matrix=a.clone().rotate(e,p).flip(),function g(x,w,S){var V=S.getMaxZoom();if(V===1/0&&(V=S.getZoom()),L.Util.isArray(x)){var X=[];return x.forEach(function(F){X.push(g(F,w,S))}),X}return x instanceof L.LatLng?function(F,$,rt,at){return rt.unproject($.transform(rt.project(F,at)),at)}(x,w,S,V):null}(n,this._matrix,h)},_setAngle:function(e){e=e<0?e+360:e,this._angle=e%360},_getRotationCenter:function(){var e=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),n=e.getCenter();return e.removeFrom(this._layer._map),n},enableRotate:function(){this.options.allowRotation?(this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}).addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Gt(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(e){var n=e*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(n,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+e),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(n,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers())},rotateLayerToAngle:function(e){var n=e-this.getAngle();this.rotateLayer(n)},getAngle:function(){return this._angle||0}},ne=L.Class.extend({includes:[In,et,$e,vt],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(e){L.Util.setOptions(this,e)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(e,n){n==="layerPane"?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":n==="vertexPane"?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":n==="markerPane"&&(e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(e,n){var r=n.target,a={layer:this._layer,marker:r,event:n},h="";return e==="move"?h="moveVertexValidation":e==="add"?h="addVertexValidation":e==="remove"&&(h="removeVertexValidation"),this.options[h]&&typeof this.options[h]=="function"&&!this.options[h](a)?(e==="move"&&(r._cancelDragEventChain=r.getLatLng()),!1):(r._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(e){return!e._cancelDragEventChain||(e._latlng=e._cancelDragEventChain,e.update(),!1)},_vertexValidationDragEnd:function(e){return!e._cancelDragEventChain||(e._cancelDragEventChain=null,!1)}});function Fe(e){return function(n){if(Array.isArray(n))return xe(n)}(e)||function(n){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(n))return Array.from(n)}(e)||function(n,r){if(!!n){if(typeof n=="string")return xe(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return xe(n,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function xe(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=e[r];return a}ne.LayerGroup=L.Class.extend({initialize:function(e){var n=this;this._layerGroup=e,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(r){return n._initLayer(r)}),this._layerGroup.on("layeradd",L.Util.throttle(function(r){if(!r.layer._pmTempLayer){n._layers=n.getLayers();var a=n._layers.filter(function(h){return!h.pm._parentLayerGroup||!(n._layerGroup._leaflet_id in h.pm._parentLayerGroup)});a.forEach(function(h){n._initLayer(h)}),a.length>0&&n._getMap()&&n._getMap().pm.globalEditModeEnabled()&&n.enabled()&&n.enable(n.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(r){n._removeLayerFromGroup(r.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(r){r.target._pmTempLayer||(n._layers=n.getLayers())},100,this),this)},enable:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.length===0&&(this._layers=this.getLayers()),this._options=e,this._layers.forEach(function(r){r instanceof L.LayerGroup?n.indexOf(r._leaflet_id)===-1&&(n.push(r._leaflet_id),r.pm.enable(e,n)):r.pm.enable(e)})},disable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];e.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.disable(e)):n.pm.disable()})},enabled:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];e.length===0&&(this._layers=this.getLayers());var n=this._layers.find(function(r){return r instanceof L.LayerGroup?e.indexOf(r._leaflet_id)===-1&&(e.push(r._leaflet_id),r.pm.enabled(e)):r.pm.enabled()});return!!n},toggleEdit:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.length===0&&(this._layers=this.getLayers()),this._options=e,this._layers.forEach(function(r){r instanceof L.LayerGroup?n.indexOf(r._leaflet_id)===-1&&(n.push(r._leaflet_id),r.pm.toggleEdit(e,n)):r.pm.toggleEdit(e)})},_initLayer:function(e){var n=L.Util.stamp(this._layerGroup);e.pm._parentLayerGroup||(e.pm._parentLayerGroup={}),e.pm._parentLayerGroup[n]=this._layerGroup},_removeLayerFromGroup:function(e){if(e.pm&&e.pm._layerGroup){var n=L.Util.stamp(this._layerGroup);delete e.pm._layerGroup[n]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var e=this._layers.find(function(n){return n.pm.dragging()});return!!e}return!1},getOptions:function(){return this.options},_getMap:function(){var e;return this._map||((e=this._layers.find(function(n){return!!n._map}))===null||e===void 0?void 0:e._map)||null},getLayers:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],h=[];return e?this._layerGroup.getLayers().forEach(function(p){h.push(p),p instanceof L.LayerGroup&&a.indexOf(p._leaflet_id)===-1&&(a.push(p._leaflet_id),h=h.concat(p.pm.getLayers(!0,!0,!0,a)))}):h=this._layerGroup.getLayers(),r&&(h=h.filter(function(p){return!(p instanceof L.LayerGroup)})),n&&(h=(h=(h=h.filter(function(p){return!!p.pm})).filter(function(p){return!p._pmTempLayer})).filter(function(p){return!L.PM.optIn&&!p.options.pmIgnore||L.PM.optIn&&p.options.pmIgnore===!1})),h},setOptions:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];n.length===0&&(this._layers=this.getLayers()),this.options=e,this._layers.forEach(function(r){r.pm&&(r instanceof L.LayerGroup?n.indexOf(r._leaflet_id)===-1&&(n.push(r._leaflet_id),r.pm.setOptions(e,n)):r.pm.setOptions(e))})}}),ne.Marker=ne.extend({_shape:"Marker",initialize:function(e){this._layer=e,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,e),this._map=this._layer._map,this.options.allowEditing?this.enabled()||(this.applyOptions(),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this._enabled=!1,this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable())},enabled:function(){return this._enabled},toggleEdit:function(e){this.enabled()?this.disable():this.enable(e)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(e){var n=e.target;n.remove(),this._fireRemove(n),this._fireRemove(this._map,n)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var e=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,e.off("pm:drag",this._handleSnapping,this),e.on("pm:drag",this._handleSnapping,this),e.off("pm:dragend",this._cleanupSnapping,this),e.on("pm:dragend",this._cleanupSnapping,this),e.off("pm:dragstart",this._unsnap,this),e.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var e=this._layer;e.off("pm:drag",this._handleSnapping,this),e.off("pm:dragend",this._cleanupSnapping,this),e.off("pm:dragstart",this._unsnap,this)}});var Dn={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.applyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.applyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var e=[].concat(Fe(this._markerGroup.getLayers()),Fe(this.markerCache));this.markerCache=e.filter(function(n,r,a){return a.indexOf(n)===r})},renderLimits:function(e){var n=this;this.markerCache.forEach(function(r){e.includes(r)?n._markerGroup.addLayer(r):n._markerGroup.removeLayer(r)})},applyLimitFilters:function(e){var n=e.latlng,r=n===void 0?{lat:0,lng:0}:n;if(!this._preventRenderMarkers){var a=Fe(this._filterClosestMarkers(r));this.renderLimits(a)}},_filterClosestMarkers:function(e){var n=Fe(this.markerCache),r=this.options.limitMarkersToCount;return n.sort(function(a,h){return a._latlng.distanceTo(e)-h._latlng.distanceTo(e)}),n.filter(function(a,h){return!(r>-1)||h<r})},_preventRenderMarkers:!1,_preventRenderingMarkers:function(e){this._preventRenderMarkers=!!e}};function Qn(e,n){return function(r){if(Array.isArray(r))return r}(e)||function(r,a){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(r)))){var h=[],p=!0,g=!1,x=void 0;try{for(var w,S=r[Symbol.iterator]();!(p=(w=S.next()).done)&&(h.push(w.value),!a||h.length!==a);p=!0);}catch(V){g=!0,x=V}finally{try{p||S.return==null||S.return()}finally{if(g)throw x}}return h}}(e,n)||function(r,a){if(!!r){if(typeof r=="string")return _n(r,a);var h=Object.prototype.toString.call(r).slice(8,-1);if(h==="Object"&&r.constructor&&(h=r.constructor.name),h==="Map"||h==="Set")return Array.from(r);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return _n(r,a)}}(e,n)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _n(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=e[r];return a}ne.Line=ne.extend({includes:[Dn],_shape:"Line",initialize:function(e){this._layer=e,this._enabled=!1},enable:function(e){L.Util.setOptions(this,e),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer;if(!this.enabled()||e.pm._dragging)return!1;e.pm._enabled=!1,e.pm._markerGroup.clearLayers(),e.pm._markerGroup.removeFrom(this._map),this._layer.off("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var n=e._path?e._path:this._layer._renderer._container;return L.DomUtil.removeClass(n,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(n,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),!0},enabled:function(){return this._enabled},toggleEdit:function(e){return this.enabled()?this.disable():this.enable(e),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_onLayerRemove:function(e){this.disable(e.target)},_initMarkers:function(){var e=this,n=this._map,r=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,this._markers=function a(h){if(Array.isArray(h[0]))return h.map(a,e);var p=h.map(e._createMarker,e);return e.options.hideMiddleMarkers!==!0&&h.map(function(g,x){var w=e.isPolygon()?(x+1)%h.length:x+1;return e._createMiddleMarker(p[x],p[w])}),p}(r),this.filterMarkerGroup(),n.addLayer(this._markerGroup)},_createMarker:function(e){var n=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._pmTempLayer=!0,this.options.rotate?(n.on("dragstart",this._onRotateStart,this),n.on("drag",this._onRotate,this),n.on("dragend",this._onRotateEnd,this)):(n.on("click",this._onVertexClick,this),n.on("dragstart",this._onMarkerDragStart,this),n.on("move",this._onMarkerDrag,this),n.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||n.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(n),n},_createMiddleMarker:function(e,n){if(!e||!n)return!1;var r=L.PM.Utils.calcMiddleLatLng(this._map,e.getLatLng(),n.getLatLng()),a=this._createMarker(r),h=L.divIcon({className:"marker-icon marker-icon-middle"});return a.setIcon(h),a.leftM=e,a.rightM=n,e._middleMarkerNext=a,n._middleMarkerPrev=a,a.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),a.on("movestart",this._onMiddleMarkerMoveStart,this),a},_onMiddleMarkerClick:function(e){var n=e.target;if(this._vertexValidation("add",e)){var r=L.divIcon({className:"marker-icon"});n.setIcon(r),this._addMarker(n,n.leftM,n.rightM)}},_onMiddleMarkerMoveStart:function(e){var n=e.target;n.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",e)?(n._dragging=!0,this._addMarker(n,n.leftM,n.rightM)):n.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(e){var n=e.target;this._vertexValidationDrag(n)},_onMiddleMarkerMoveEnd:function(e){var n=e.target;if(n.off("move",this._onMiddleMarkerMovePrevent,this),n.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(n)){var r=L.divIcon({className:"marker-icon"});n.setIcon(r),setTimeout(function(){delete n._dragging},100)}},_addMarker:function(e,n,r){e.off("movestart",this._onMiddleMarkerMoveStart,this),e.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var a=e.getLatLng(),h=this._layer._latlngs;delete e.leftM,delete e.rightM;var p=this.findDeepMarkerIndex(this._markers,n),g=p.indexPath,x=p.index,w=p.parentPath,S=g.length>1?At()(h,w):h,V=g.length>1?At()(this._markers,w):this._markers;S.splice(x+1,0,a),V.splice(x+1,0,e),this._layer.setLatLngs(h),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(n,e),this._createMiddleMarker(e,r)),this._fireEdit(),this._layerEdited=!0,this._fireVertexAdded(e,this.findDeepMarkerIndex(this._markers,e).indexPath,a),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return bt()(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(e){var n=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;e?this._flashLayer():(n.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(bt()(this._layer.toGeoJSON(15)))}else n.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var e=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){e._layer.setStyle({color:e.cachedColor}),e.isRed=!1},200)},_updateDisabledMarkerStyle:function(e,n){var r=this;e.forEach(function(a){if(Array.isArray(a))return r._updateDisabledMarkerStyle(a,n);a._icon&&(n&&!r._checkMarkerAllowedToDrag(a)?L.DomUtil.addClass(a._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(a._icon,"vertexmarker-disabled"))})},_removeMarker:function(e){var n=e.target;if(this._vertexValidation("remove",e)){if(!this.options.allowSelfIntersection){var r=this._layer.getLatLngs();this._coordsBeforeEdit=JSON.parse(JSON.stringify(r))}var a=this._layer.getLatLngs(),h=this.findDeepMarkerIndex(this._markers,n),p=h.indexPath,g=h.index,x=h.parentPath;if(p){var w=p.length>1?At()(a,x):a,S=p.length>1?At()(this._markers,x):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(w.length<=2||this.isPolygon()&&w.length<=3)){w.splice(g,1),this._layer.setLatLngs(a),this.isPolygon()&&w.length<=2&&w.splice(0,w.length);var V=!1;if(w.length<=1&&(w.splice(0,w.length),this._layer.setLatLngs(a),this.disable(),this.enable(this.options),V=!0),di(a)&&this._layer.remove(),a=wt(a),this._layer.setLatLngs(a),this._markers=wt(this._markers),!V&&(S=p.length>1?At()(this._markers,x):this._markers,n._middleMarkerPrev&&this._markerGroup.removeLayer(n._middleMarkerPrev),n._middleMarkerNext&&this._markerGroup.removeLayer(n._middleMarkerNext),this._markerGroup.removeLayer(n),S)){var X,F;if(this.isPolygon()?(X=(g+1)%S.length,F=(g+(S.length-1))%S.length):(F=g-1<0?void 0:g-1,X=g+1>=S.length?void 0:g+1),X!==F){var $=S[F],rt=S[X];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker($,rt)}S.splice(g,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(n,p)}else this._flashLayer()}}},findDeepMarkerIndex:function(e,n){var r;e.some(function h(p){return function(g,x){var w=p.concat(x);return g._leaflet_id===n._leaflet_id?(r=w,!0):Array.isArray(g)&&g.some(h(w))}}([]));var a={};return r&&(a={indexPath:r,index:r[r.length-1],parentPath:r.slice(0,r.length-1)}),a},updatePolygonCoordsFromMarkerDrag:function(e){var n=this._layer.getLatLngs(),r=e.getLatLng(),a=this.findDeepMarkerIndex(this._markers,e),h=a.indexPath,p=a.index,g=a.parentPath;(h.length>1?At()(n,g):n).splice(p,1,r),this._layer.setLatLngs(n)},_getNeighborMarkers:function(e){var n=this.findDeepMarkerIndex(this._markers,e),r=n.indexPath,a=n.index,h=n.parentPath,p=r.length>1?At()(this._markers,h):this._markers,g=(a+1)%p.length;return{prevMarker:p[(a+(p.length-1))%p.length],nextMarker:p[g]}},_checkMarkerAllowedToDrag:function(e){var n=this._getNeighborMarkers(e),r=n.prevMarker,a=n.nextMarker,h=L.polyline([r.getLatLng(),e.getLatLng()]),p=L.polyline([e.getLatLng(),a.getLatLng()]),g=Ft()(this._layer.toGeoJSON(15),h.toGeoJSON(15)).features.length,x=Ft()(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length;return e.getLatLng()===this._markers[0][0].getLatLng()?x+=1:e.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&x<=2)},_onMarkerDragStart:function(e){var n=e.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",e)){var r=this.findDeepMarkerIndex(this._markers,n).indexPath;this._fireMarkerDragStart(e,r),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs()),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(n):this._markerAllowedToDrag=null}},_onMarkerDrag:function(e){var n=e.target;if(this._vertexValidationDrag(n)){var r=this.findDeepMarkerIndex(this._markers,n),a=r.indexPath,h=r.index,p=r.parentPath;if(a){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(n);var g=a.length>1?At()(this._markers,p):this._markers,x=(h+1)%g.length,w=(h+(g.length-1))%g.length,S=n.getLatLng(),V=g[w].getLatLng(),X=g[x].getLatLng();if(n._middleMarkerNext){var F=L.PM.Utils.calcMiddleLatLng(this._map,S,X);n._middleMarkerNext.setLatLng(F)}if(n._middleMarkerPrev){var $=L.PM.Utils.calcMiddleLatLng(this._map,S,V);n._middleMarkerPrev.setLatLng($)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(e,a)}}},_onMarkerDragEnd:function(e){var n=e.target;if(this._vertexValidationDragEnd(n)){var r=this.findDeepMarkerIndex(this._markers,n).indexPath,a=this.hasSelfIntersection();a&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(a=!1);var h=!this.options.allowSelfIntersection&&a;if(this._fireMarkerDragEnd(e,r,h),h)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(e,r);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0}},_onVertexClick:function(e){var n=e.target;if(!n._dragging){var r=this.findDeepMarkerIndex(this._markers,n).indexPath;this._fireVertexClick(e,r)}}}),ne.Polygon=ne.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(e){var n=this._getNeighborMarkers(e),r=n.prevMarker,a=n.nextMarker,h=L.polyline([r.getLatLng(),e.getLatLng()]),p=L.polyline([e.getLatLng(),a.getLatLng()]),g=Ft()(this._layer.toGeoJSON(15),h.toGeoJSON(15)).features.length,x=Ft()(this._layer.toGeoJSON(15),p.toGeoJSON(15)).features.length;return!(g<=2&&x<=2)}}),ne.Rectangle=ne.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var e=this,n=this._map,r=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,n.addLayer(this._markerGroup),this._markers=[],this._markers[0]=r.map(this._createMarker,this);var a=Qn(this._markers,1);this._cornerMarkers=a[0],this._layer.getLatLngs()[0].forEach(function(h,p){var g=e._cornerMarkers.find(function(x){return x._index===p});g&&g.setLatLng(h)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(e,n){var r=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(r,"vertexPane"),r._origLatLng=e,r._index=n,r._pmTempLayer=!0,this._markerGroup.addLayer(r),r},_addMarkerEvents:function(){var e=this;this._markers[0].forEach(function(n){n.on("dragstart",e._onMarkerDragStart,e),n.on("drag",e._onMarkerDrag,e),n.on("dragend",e._onMarkerDragEnd,e),e.options.preventMarkerRemoval||n.on("contextmenu",e._removeMarker,e)})},_removeMarker:function(){return null},_onMarkerDragStart:function(e){if(this._vertexValidation("move",e)){var n=e.target,r=this._cornerMarkers;n._oppositeCornerLatLng=r.find(function(a){return a._index===(n._index+2)%4}).getLatLng(),n._snapped=!1,this._fireMarkerDragStart(e)}},_onMarkerDrag:function(e){var n=e.target;this._vertexValidationDrag(n)&&n._index!==void 0&&(this._adjustRectangleForMarkerMove(n),this._fireMarkerDrag(e))},_onMarkerDragEnd:function(e){var n=e.target;this._vertexValidationDragEnd(n)&&(this._cornerMarkers.forEach(function(r){delete r._oppositeCornerLatLng}),this._fireMarkerDragEnd(e),this._fireEdit(),this._layerEdited=!0)},_adjustRectangleForMarkerMove:function(e){L.extend(e._origLatLng,e._latlng);var n=L.PM.Utils._getRotatedRectangle(e.getLatLng(),e._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(n),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var e=this,n=this._layer.getLatLngs()[0];n&&n.length!==4&&n.length>0?(n.forEach(function(r,a){e._cornerMarkers[a].setLatLng(r)}),this._cornerMarkers.slice(n.length).forEach(function(r){r.setLatLng(n[0])})):n&&n.length?this._cornerMarkers.forEach(function(r){r.setLatLng(n[r._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){this._layer.getBounds();var e=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(e[0],e[2],this._angle||0,this._map)}}),ne.Circle=ne.extend({_shape:"Circle",initialize:function(e){this._layer=e,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(e){var n=this;L.Util.setOptions(this,e),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",function(r){n.disable(r.target)}),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer;if(!this.enabled()||e.pm._dragging)return!1;this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),e.pm._enabled=!1,e.pm._helperLayers.clearLayers();var n=e._path?e._path:this._layer._renderer._container;return L.DomUtil.removeClass(n,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),!0},enabled:function(){return this._enabled},toggleEdit:function(e){this.enabled()?this.disable():this.enable(e)},_initMarkers:function(){var e=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(e);var n=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(n,r);this._centerMarker=this._createCenterMarker(n),this._outerMarker=this._createOuterMarker(a),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(e,n){var r=e.getLatLng(),a=n.getLatLng();this._hintline=L.polyline([r,a],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(e){var n=this._createMarker(e);return L.DomUtil.addClass(n._icon,"leaflet-pm-draggable"),n.on("drag",this._moveCircle,this),n.on("dragstart",this._onCircleDragStart,this),n.on("drag",this._onCircleDrag,this),n.on("dragend",this._onCircleDragEnd,this),n},_createOuterMarker:function(e){var n=this._createMarker(e);return n.on("drag",this._resizeCircle,this),n},_createMarker:function(e){var n=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._origLatLng=e,n._pmTempLayer=!0,n.on("dragstart",this._onMarkerDragStart,this),n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(n),n},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(e){if(!e.target._cancelDragEventChain){var n=e.latlng;this._layer.setLatLng(n);var r=this._layer._radius,a=this._getLatLngOnCircle(n,r);this._outerMarker._latlng=a,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit")}},_syncCircleRadius:function(){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng(),r=this._map.distance(e,n);this.options.minRadiusCircle&&r<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(r),this._updateHiddenPolyCircle()},_syncHintLine:function(){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng();this._hintline.setLatLngs([e,n])},_disableSnapping:function(){var e=this;this._markers.forEach(function(n){n.off("move",e._syncHintLine,e),n.off("move",e._syncCircleRadius,e),n.off("drag",e._handleSnapping,e),n.off("dragend",e._cleanupSnapping,e)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(e){this._vertexValidation("move",e)&&this._fireMarkerDragStart(e)},_onMarkerDrag:function(e){var n=e.target;this._vertexValidationDrag(n)&&this._fireMarkerDrag(e)},_onMarkerDragEnd:function(e){var n=e.target;this._vertexValidationDragEnd(n)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(e))},_onCircleDragStart:function(e){this._vertexValidationDrag(e.target)?(delete this._vertexValidationReset,this._fireDragStart(e)):this._vertexValidationReset=!0},_onCircleDrag:function(e){this._vertexValidationReset||this._fireDrag(e)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var e=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!e).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!e),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(e,n){var r=this._map.project(e),a=L.point(r.x+n,r.y);return this._map.unproject(a)},_getNewDestinationOfOuterMarker:function(){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng(),r=this._map.distance(e,n);return this.options.minRadiusCircle&&r<this.options.minRadiusCircle?n=Ut(this._map,e,n,this.options.minRadiusCircle):this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle&&(n=Ut(this._map,e,n,this.options.maxRadiusCircle)),n},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng(),r=this._map.distance(e,n);(this.options.minRadiusCircle&&r<this.options.minRadiusCircle||this.options.maxRadiusCircle&&r>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),ne.CircleMarker=ne.extend({_shape:"CircleMarker",initialize:function(e){this._layer=e,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,e),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this.applyOptions(),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable())},disable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer;return!e.pm._dragging&&(e.pm._helperLayers&&e.pm._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),e.pm._enabled=!1,!0)},enabled:function(){return this._enabled},toggleEdit:function(e){this.enabled()?this.disable():this.enable(e)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var e=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(e);var n=this._layer.getLatLng(),r=this._layer._radius,a=this._getLatLngOnCircle(n,r);this._centerMarker=this._createCenterMarker(n),this._outerMarker=this._createOuterMarker(a),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(e,n){var r=this._map.project(e),a=L.point(r.x+n,r.y);return this._map.unproject(a)},_createHintLine:function(e,n){var r=e.getLatLng(),a=n.getLatLng();this._hintline=L.polyline([r,a],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(e){var n=this._createMarker(e);return this.options.draggable?L.DomUtil.addClass(n._icon,"leaflet-pm-draggable"):n.dragging.disable(),n},_createOuterMarker:function(e){var n=this._createMarker(e);return n.on("drag",this._resizeCircle,this),n},_createMarker:function(e){var n=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._origLatLng=e,n._pmTempLayer=!0,n.on("dragstart",this._onMarkerDragStart,this),n.on("drag",this._onMarkerDrag,this),n.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(n),n},_moveCircle:function(){var e=this._centerMarker.getLatLng();this._layer.setLatLng(e);var n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._outerMarker._latlng=r,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit")},_syncMarkers:function(){var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._outerMarker.setLatLng(r),this._centerMarker.setLatLng(e),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(r),this._updateHiddenPolyCircle()},_syncHintLine:function(){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng();this._hintline.setLatLngs([e,n])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(e){this._map.pm.Draw.CircleMarker._layerIsDragging=!0,this._vertexValidation("move",e)},_onMarkerDragStart:function(e){this._vertexValidation("move",e)&&this._fireMarkerDragStart(e)},_onMarkerDrag:function(e){var n=e.target;n instanceof L.Marker&&!this._vertexValidationDrag(n)||this._fireMarkerDrag(e)},_onMarkerDragEnd:function(e){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var n=e.target;this._vertexValidationDragEnd(n)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(e))},_initSnappableMarkersDrag:function(){var e=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,e.off("pm:drag",this._handleSnapping,this),e.on("pm:drag",this._handleSnapping,this),e.off("pm:dragend",this._cleanupSnapping,this),e.on("pm:dragend",this._cleanupSnapping,this),e.off("pm:dragstart",this._unsnap,this),e.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var e=this._layer;e.off("pm:drag",this._handleSnapping,this),e.off("pm:dragend",this._cleanupSnapping,this),e.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var e=this._layer._map||this._map;if(e){var n=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),e,this._layer.getLatLng()),r=L.circle(this._layer.getLatLng(),this._layer.options);r.setRadius(n);var a=e&&e.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(r,200,!a).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(r,200,!a),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));return this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?n=Ut(this._map,e,n,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,e)):this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(n=Ut(this._map,e,n,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,e))),n},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var e=this._centerMarker.getLatLng(),n=this._outerMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),ne.ImageOverlay=ne.extend({_shape:"ImageOverlay",initialize:function(e){this._layer=e,this._enabled=!1},toggleEdit:function(e){this.enabled()?this.disable():this.enable(e)},enabled:function(){return this._enabled},enable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,e),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer;return!e.pm._dragging&&(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),e.pm._enabled=!1,!0)},_findCorners:function(){var e=this._layer.getBounds();return[e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]}}),l(153),l(154);var gn=function(e,n,r,a,h,p){this._matrix=[e,n,r,a,h,p]};gn.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},gn.prototype={transform:function(e){return this._transform(e.clone())},_transform:function(e){var n=this._matrix,r=e.x,a=e.y;return e.x=n[0]*r+n[1]*a+n[4],e.y=n[2]*r+n[3]*a+n[5],e},untransform:function(e){var n=this._matrix;return new L.Point((e.x/n[0]-n[4])/n[0],(e.y/n[2]-n[5])/n[2])},clone:function(){var e=this._matrix;return new L.PM.Matrix(e[0],e[1],e[2],e[3],e[4],e[5])},translate:function(e){return e===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof e=="number"?(n=e,r=e):(n=e.x,r=e.y),this._add(1,0,0,1,n,r));var n,r},scale:function(e,n){return e===void 0?new L.Point(this._matrix[0],this._matrix[3]):(n=n||L.point(0,0),typeof e=="number"?(r=e,a=e):(r=e.x,a=e.y),this._add(r,0,0,a,n.x,n.y)._add(1,0,0,1,-n.x,-n.y));var r,a},rotate:function(e,n){var r=Math.cos(e),a=Math.sin(e);return n=n||new L.Point(0,0),this._add(r,a,-a,r,n.x,n.y)._add(1,0,0,1,-n.x,-n.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(e,n,r,a,h,p){var g,x=[[],[],[]],w=this._matrix,S=[[w[0],w[2],w[4]],[w[1],w[3],w[5]],[0,0,1]],V=[[e,r,h],[n,a,p],[0,0,1]];e&&e instanceof L.PM.Matrix&&(V=[[(w=e._matrix)[0],w[2],w[4]],[w[1],w[3],w[5]],[0,0,1]]);for(var X=0;X<3;X+=1)for(var F=0;F<3;F+=1){g=0;for(var $=0;$<3;$+=1)g+=S[X][$]*V[$][F];x[X][F]=g}return this._matrix=[x[0][0],x[1][0],x[0][1],x[1][1],x[0][2],x[1][2]],this}};var yn=gn,vn={calcMiddleLatLng:function(e,n,r){var a=e.project(n),h=e.project(r);return e.unproject(a._add(h)._divideBy(2))},findLayers:function(e){var n=[];return e.eachLayer(function(r){(r instanceof L.Polyline||r instanceof L.Marker||r instanceof L.Circle||r instanceof L.CircleMarker||r instanceof L.ImageOverlay)&&n.push(r)}),n=(n=(n=n.filter(function(r){return!!r.pm})).filter(function(r){return!r._pmTempLayer})).filter(function(r){return!L.PM.optIn&&!r.options.pmIgnore||L.PM.optIn&&r.options.pmIgnore===!1})},circleToPolygon:function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],a=e.getLatLng(),h=e.getRadius(),p=ae(a,h,n,0,r),g=[],x=0;x<p.length;x+=1){var w=[p[x].lat,p[x].lng];g.push(w)}return L.polygon(g,e.options)},disablePopup:function(e){e.getPopup()&&(e._tempPopupCopy=e.getPopup(),e.unbindPopup())},enablePopup:function(e){e._tempPopupCopy&&(e.bindPopup(e._tempPopupCopy),delete e._tempPopupCopy)},_fireEvent:function(e,n,r){var a=arguments.length>3&&arguments[3]!==void 0&&arguments[3];e.fire(n,r,a);var h=this.getAllParentGroups(e),p=h.groups;p.forEach(function(g){g.fire(n,r,a)})},getAllParentGroups:function(e){var n=[],r=[];return!e._pmLastGroupFetch||!e._pmLastGroupFetch.time||new Date().getTime()-e._pmLastGroupFetch.time>1e3?(function a(h){for(var p in h._eventParents)if(n.indexOf(p)===-1){n.push(p);var g=h._eventParents[p];r.push(g),a(g)}}(e),e._pmLastGroupFetch={time:new Date().getTime(),groups:r,groupIds:n},{groupIds:n,groups:r}):{groups:e._pmLastGroupFetch.groups,groupIds:e._pmLastGroupFetch.groupIds}},createGeodesicPolygon:ae,getTranslation:st,findDeepCoordIndex:function(e,n){var r;e.some(function h(p){return function(g,x){var w=p.concat(x);return g.lat&&g.lat===n.lat&&g.lng===n.lng?(r=w,!0):Array.isArray(g)&&g.some(h(w))}}([]));var a={};return r&&(a={indexPath:r,index:r[r.length-1],parentPath:r.slice(0,r.length-1)}),a},_getIndexFromSegment:function(e,n){if(n&&n.length===2){var r=this.findDeepCoordIndex(e,n[0]),a=this.findDeepCoordIndex(e,n[1]),h=Math.max(r.index,a.index);return r.index!==0&&a.index!==0||h===1||(h+=1),{indexA:r,indexB:a,newIndex:h,indexPath:r.indexPath,parentPath:r.parentPath}}return null},_getRotatedRectangle:function(e,n,r,a){var h=We(a,e),p=We(a,n),g=r*Math.PI/180,x=Math.cos(g),w=Math.sin(g),S=(p.x-h.x)*x+(p.y-h.y)*w,V=(p.y-h.y)*x-(p.x-h.x)*w,X=S*x+h.x,F=S*w+h.y,$=-V*w+h.x,rt=V*x+h.y;return[Je(a,h),Je(a,{x:X,y:F}),Je(a,p),Je(a,{x:$,y:rt})]},pxRadiusToMeterRadius:function(e,n,r){var a=n.project(r),h=L.point(a.x+e,a.y);return n.distance(n.unproject(h),r)}};L.PM=L.PM||{version:f.version,Map:It,Toolbar:O,Draw:tt,Edit:ne,Utils:vn,Matrix:yn,activeLang:"en",optIn:!1,initialize:function(e){this.addInitHooks(e)},setOptIn:function(e){this.optIn=!!e},addInitHooks:function(){function e(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this))}function n(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Marker(this))}function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}function p(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}function x(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}function w(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.Map.addInitHook(e),L.LayerGroup.addInitHook(n),L.Marker.addInitHook(r),L.CircleMarker.addInitHook(a),L.Polyline.addInitHook(h),L.Polygon.addInitHook(p),L.Rectangle.addInitHook(g),L.Circle.addInitHook(x),L.ImageOverlay.addInitHook(w)},reInitLayer:function(e){var n=this;e instanceof L.LayerGroup&&e.eachLayer(function(r){n.reInitLayer(r)}),e.pm||L.PM.optIn&&e.options.pmIgnore!==!1||e.options.pmIgnore||(e instanceof L.Map?e.pm=new L.PM.Map(e):e instanceof L.Marker?e.pm=new L.PM.Edit.Marker(e):e instanceof L.Circle?e.pm=new L.PM.Edit.Circle(e):e instanceof L.CircleMarker?e.pm=new L.PM.Edit.CircleMarker(e):e instanceof L.Rectangle?e.pm=new L.PM.Edit.Rectangle(e):e instanceof L.Polygon?e.pm=new L.PM.Edit.Polygon(e):e instanceof L.Polyline?e.pm=new L.PM.Edit.Line(e):e instanceof L.LayerGroup?e.pm=new L.PM.Edit.LayerGroup(e):e instanceof L.ImageOverlay&&(e.pm=new L.PM.Edit.ImageOverlay(e)))}},L.PM.initialize()}]);var Me=63710088e-1,Pr={centimeters:Me*100,centimetres:Me*100,degrees:Me/111325,feet:Me*3.28084,inches:Me*39.37,kilometers:Me/1e3,kilometres:Me/1e3,meters:Me,metres:Me,miles:Me/1609.344,millimeters:Me*1e3,millimetres:Me*1e3,nauticalmiles:Me/1852,radians:1,yards:Me*1.0936};function Fn(m,k,l){l===void 0&&(l={});var f={type:"Feature"};return(l.id===0||l.id)&&(f.id=l.id),l.bbox&&(f.bbox=l.bbox),f.properties=k||{},f.geometry=m,f}function to(m,k,l){if(l===void 0&&(l={}),!m)throw new Error("coordinates is required");if(!Array.isArray(m))throw new Error("coordinates must be an Array");if(m.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Cr(m[0])||!Cr(m[1]))throw new Error("coordinates must contain numbers");var f={type:"Point",coordinates:m};return Fn(f,k,l)}function Xi(m,k,l){if(l===void 0&&(l={}),m.length<2)throw new Error("coordinates must be an array of two or more positions");var f={type:"LineString",coordinates:m};return Fn(f,k,l)}function eo(m,k){k===void 0&&(k={});var l={type:"FeatureCollection"};return k.id&&(l.id=k.id),k.bbox&&(l.bbox=k.bbox),l.features=m,l}function io(m,k){k===void 0&&(k="kilometers");var l=Pr[k];if(!l)throw new Error(k+" units is invalid");return m*l}function no(m,k){k===void 0&&(k="kilometers");var l=Pr[k];if(!l)throw new Error(k+" units is invalid");return m/l}function rr(m){var k=m%(2*Math.PI);return k*180/Math.PI}function ze(m){var k=m%360;return k*Math.PI/180}function Cr(m){return!isNaN(m)&&m!==null&&!Array.isArray(m)}function Er(m){return!!m&&m.constructor===Object}function Un(m,k,l){if(m!==null)for(var f,c,y,_,P,B,I,Z=0,E=0,T,N=m.type,U=N==="FeatureCollection",R=N==="Feature",z=U?m.features.length:1,M=0;M<z;M++){I=U?m.features[M].geometry:R?m.geometry:m,T=I?I.type==="GeometryCollection":!1,P=T?I.geometries.length:1;for(var C=0;C<P;C++){var D=0,q=0;if(_=T?I.geometries[C]:I,_!==null){B=_.coordinates;var K=_.type;switch(Z=l&&(K==="Polygon"||K==="MultiPolygon")?1:0,K){case null:break;case"Point":if(k(B,E,M,D,q)===!1)return!1;E++,D++;break;case"LineString":case"MultiPoint":for(f=0;f<B.length;f++){if(k(B[f],E,M,D,q)===!1)return!1;E++,K==="MultiPoint"&&D++}K==="LineString"&&D++;break;case"Polygon":case"MultiLineString":for(f=0;f<B.length;f++){for(c=0;c<B[f].length-Z;c++){if(k(B[f][c],E,M,D,q)===!1)return!1;E++}K==="MultiLineString"&&D++,K==="Polygon"&&q++}K==="Polygon"&&D++;break;case"MultiPolygon":for(f=0;f<B.length;f++){for(q=0,c=0;c<B[f].length;c++){for(y=0;y<B[f][c].length-Z;y++){if(k(B[f][c][y],E,M,D,q)===!1)return!1;E++}q++}D++}break;case"GeometryCollection":for(f=0;f<_.geometries.length;f++)if(Un(_.geometries[f],k,l)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function po(m){var k=[];return Un(m,function(l){k.push(l)}),k}function ro(m,k){var l,f,c,y,_,P,B,I,Z,E,T=0,N=m.type==="FeatureCollection",U=m.type==="Feature",R=N?m.features.length:1;for(l=0;l<R;l++){for(P=N?m.features[l].geometry:U?m.geometry:m,I=N?m.features[l].properties:U?m.properties:{},Z=N?m.features[l].bbox:U?m.bbox:void 0,E=N?m.features[l].id:U?m.id:void 0,B=P?P.type==="GeometryCollection":!1,_=B?P.geometries.length:1,c=0;c<_;c++){if(y=B?P.geometries[c]:P,y===null){if(k(null,T,I,Z,E)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(k(y,T,I,Z,E)===!1)return!1;break}case"GeometryCollection":{for(f=0;f<y.geometries.length;f++)if(k(y.geometries[f],T,I,Z,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}T++}}function Sr(m,k){ro(m,function(l,f,c,y,_){var P=l===null?null:l.type;switch(P){case null:case"Point":case"LineString":case"Polygon":return k(Fn(l,c,{bbox:y,id:_}),f,0)===!1?!1:void 0}var B;switch(P){case"MultiPoint":B="Point";break;case"MultiLineString":B="LineString";break;case"MultiPolygon":B="Polygon";break}for(var I=0;I<l.coordinates.length;I++){var Z=l.coordinates[I],E={type:B,coordinates:Z};if(k(Fn(E,c),f,I)===!1)return!1}})}function oo(m,k){Sr(m,function(l,f,c){var y=0;if(!!l.geometry){var _=l.geometry.type;if(!(_==="Point"||_==="MultiPoint")){var P,B=0,I=0,Z=0;if(Un(l,function(E,T,N,U,R){if(P===void 0||f>B||U>I||R>Z){P=E,B=f,I=U,Z=R,y=0;return}var z=Xi([P,E],l.properties);if(k(z,f,c,R,y)===!1)return!1;y++,P=E})===!1)return!1}}})}function ao(m,k,l){var f=l,c=!1;return oo(m,function(y,_,P,B,I){c===!1&&l===void 0?f=y:f=k(f,y,_,P,B,I),c=!0}),f}function Tr(m){var k=[1/0,1/0,-1/0,-1/0];return Un(m,function(l){k[0]>l[0]&&(k[0]=l[0]),k[1]>l[1]&&(k[1]=l[1]),k[2]<l[0]&&(k[2]=l[0]),k[3]<l[1]&&(k[3]=l[1])}),k}Tr.default=Tr;function wn(m){if(!m)throw new Error("coord is required");if(!Array.isArray(m)){if(m.type==="Feature"&&m.geometry!==null&&m.geometry.type==="Point")return m.geometry.coordinates;if(m.type==="Point")return m.coordinates}if(Array.isArray(m)&&m.length>=2&&!Array.isArray(m[0])&&!Array.isArray(m[1]))return m;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Or(m,k,l){l===void 0&&(l={});var f=wn(m),c=wn(k),y=ze(c[1]-f[1]),_=ze(c[0]-f[0]),P=ze(f[1]),B=ze(c[1]),I=Math.pow(Math.sin(y/2),2)+Math.pow(Math.sin(_/2),2)*Math.cos(P)*Math.cos(B);return io(2*Math.atan2(Math.sqrt(I),Math.sqrt(1-I)),l.units)}function Br(m,k,l,f){f===void 0&&(f={});var c=wn(m),y=ze(c[0]),_=ze(c[1]),P=ze(l),B=no(k,f.units),I=Math.asin(Math.sin(_)*Math.cos(B)+Math.cos(_)*Math.sin(B)*Math.cos(P)),Z=y+Math.atan2(Math.sin(P)*Math.sin(B)*Math.cos(_),Math.cos(B)-Math.sin(_)*Math.sin(I)),E=rr(Z),T=rr(I);return to([E,T],f.properties)}function or(m,k,l){if(l===void 0&&(l={}),l.final===!0)return so(m,k);var f=wn(m),c=wn(k),y=ze(f[0]),_=ze(c[0]),P=ze(f[1]),B=ze(c[1]),I=Math.sin(_-y)*Math.cos(B),Z=Math.cos(P)*Math.sin(B)-Math.sin(P)*Math.cos(B)*Math.cos(_-y);return rr(Math.atan2(I,Z))}function so(m,k){var l=or(k,m);return l=(l+180)%360,l}function lo(m,k){return k===void 0&&(k={}),ao(m,function(l,f){var c=f.geometry.coordinates;return l+Or(c[0],c[1],k)},0)}function ho(m,k,l,f){if(f=f||{},!Er(f))throw new Error("options is invalid");var c,y=[];if(m.type==="Feature")c=m.geometry.coordinates;else if(m.type==="LineString")c=m.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var _=c.length,P=0,B,I,Z,E=0;E<c.length&&!(k>=P&&E===c.length-1);E++){if(P>k&&y.length===0){if(B=k-P,!B)return y.push(c[E]),Xi(y);I=or(c[E],c[E-1])-180,Z=Br(c[E],B,I,f),y.push(Z.geometry.coordinates)}if(P>=l)return B=l-P,B?(I=or(c[E],c[E-1])-180,Z=Br(c[E],B,I,f),y.push(Z.geometry.coordinates),Xi(y)):(y.push(c[E]),Xi(y));if(P>=k&&y.push(c[E]),E===c.length-1)return Xi(y);P+=Or(c[E],c[E+1],f)}if(P<k&&c.length===_)throw new Error("Start position is beyond line");var T=c[c.length-1];return Xi([T,T])}function mo(m,k,l){if(l=l||{},!Er(l))throw new Error("options is invalid");var f=l.units,c=l.reverse;if(!m)throw new Error("geojson is required");if(k<=0)throw new Error("segmentLength must be greater than 0");var y=[];return Sr(m,function(_){c&&(_.geometry.coordinates=_.geometry.coordinates.reverse()),uo(_,k,f,function(P){y.push(P)})}),eo(y)}function uo(m,k,l,f){var c=lo(m,{units:l});if(c<=k)return f(m);var y=c/k;Number.isInteger(y)||(y=Math.floor(y)+1);for(var _=0;_<y;_++){var P=ho(m,k*_,k*(_+1),{units:l});f(P,_)}}export{fo as L,Xi as a,mo as b,po as c,Un as d,Tr as e,lo as f,co as g,Qr as h,nr as l};
